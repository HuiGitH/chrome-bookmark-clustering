(lp0
S'http://www.opstool.com/article/255'
p1
aS'\xe7\x90\x86\xe8\xa7\xa3hadoop fsck\xe3\x80\x81fs -dus\xe3\x80\x81-count -q\xe7\x9a\x84\xe5\xa4\xa7\xe5\xb0\x8f\xe8\xbe\x93\xe5\x87\xba - Ops\xe8\xbf\x90\xe7\xbb\xb4\xe5\xb7\xa5\xe5\x85\xb7'
p2
aI0
aV<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\u000a<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">\u000a<head>\u000a    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>\u000a    <meta name="keywords" content="linux \u8fd0\u7ef4 hadoop fsck count dus "/>\u000a    <meta name="author" content="jinglei.syh"/>\u000a    <meta name="robots" content="all"/>\u000a    <title>\u7406\u89e3hadoop fsck\u3001fs -dus\u3001-count -q\u7684\u5927\u5c0f\u8f93\u51fa - Ops\u8fd0\u7ef4\u5de5\u5177</title>\u000a    <link rel="stylesheet" href="/css/common.css?ver=20140302" type="text/css"/>\u000a    <link rel="stylesheet" href="/css/md.css?ver=20140208" type="text/css"/>\u000a    <link rel="stylesheet" href="/css/prettify.css?ver=20140209" type="text/css"/>\u000a    <link rel="stylesheet" href="/js/tree/jquery.treeview.css" type="text/css"/>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/jquery-1.7.2.min.js"></script>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/tree/jquery.treeview.js"></script>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/jquery.cookie.js"></script>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/prettify.js"></script>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/commom.js?ver=201403020005"></script>\u000a    <script type="text/javascript"  charset="utf-8" src="/js/atcount.js?ver=20140207"></script>\u000a<!--    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>-->\u000a</head>\u000a    <body>\u000a    <div id='headbar' >\u000a        <div id='logo'>\u000a            <h1 style='display:inline'><a href='/'>&nbsp;Ops\u8fd0\u7ef4\u5de5\u5177&nbsp;</a></h1>\u000a        </div>\u000a        <div id='search_box'>\u000a            <div id='search_holder'>\u000a               <div>\u000a                   <form action='/index.php' method='get' onsubmit="return search_check();">\u000a                       <fieldset style='border:0px;padding:0px;'>\u000a                           <input type='hidden' name='cat' value='s'/>\u000a                           <input type="text" name='act' id='search_input' placeholder="\u7ad9\u5185\u5168\u6587\u68c0\u7d22" >\u000a                           <input type="submit" value="\u641c\u7d22" id='search_button'>\u000a                           <span class='msg' id='messager'></span>\u000a                       </fieldset>\u000a                   </form>\u000a               </div>\u000a            </div>\u000a        </div>\u000a        <Div id='toprightlinks'>\u000a           <span class='link1'><a href='/'>\u7b14\u8bb0</a></span> \u000a           <span class='link2'><a href='/tools.php'>\u5de5\u5177</a></span> \u000a           <span class='link2'><a href='/about'>\u5173\u4e8e</a></span> \u000a           <span class='link3'><a href='http://sso.opstool.com/weibo/sso.php?r=http://www.opstool.com/article/255'>\u5fae\u535a\u767b\u9646</a></span> \u000a        </div>\u000a        <div style='display:none;clear:both'></div>\u000a    </div>\u000a    <div id='wapper'>\u000a        <div id='maindiv' >\u000a            <div id='leftbar'>\u000a<!--\u000a                <div id="menuhandler">\u000a                    <img id='menu_close_img' src="/img/close.png" alt='close'/>\u000a                    <img id='menu_open_img' style='display:none' src="/img/open.png" alt='open'/>\u000a                </div>\u000a-->\u000a                <div id='navtree'>\u000a                    <ul id="browser" class="filetree">\u000a                        <li><span class="folder"><a href='/'>Ops\u8fd0\u7ef4\u5de5\u5177</a></span>\u000a                        <ul>\u000a                            <li><span class='folder'><a href='http://www.opstool.com/category/34'>\u8fd0\u7ef4\u7b14\u8bb0(118)</a></span><ul><li><span class='folder'><a href='/category/35'>\u7cfb\u7edf\u7ba1\u7406(97)</a></span></li><li><span class='folder'><a href='/category/36'>xen\u865a\u62df\u5316(9)</a></span></li><li><span class='folder'><a href='/category/41'>Hadoop(12)</a></span></li></ul></li><li><span class='folder'><a href='http://www.opstool.com/category/51'>\u975e\u4e13\u4e1a\u7b14\u8bb0(29)</a></span><ul><li><span class='folder'><a href='/category/44'>Hive(4)</a></span></li><li><span class='folder'><a href='/category/48'>Python(6)</a></span></li><li><span class='folder'><a href='/category/53'>PHP(3)</a></span></li><li><span class='folder'><a href='/category/55'>\u6298\u817e\u4e13\u680f(11)</a></span></li><li><span class='folder'><a href='/category/59'>R\u8bed\u8a00(5)</a></span></li></ul></li>                            </ul>\u000a                        </li>\u000a                    </ul>\u000a                </div>\u000a                <div id='friends_link'>\u000a                    <p>&nbsp;<img src='/img/friends.gif' style='margin-right:4px;' alt='\u53cb\u60c5\u94fe\u63a5'/>\u53cb\u60c5\u94fe\u63a5</p>\u000a                    <ul class='lins_ul'>\u000a                        <li class='friends_link_li'><a href='http://www.bsdmap.com:8110/' target='_blank'>\u82b1\u5f00\u7684\u5730\u65b9</a></li> \u000a                        <li class='friends_link_li'><a href='http://kerrigan.sinaapp.com/' target='_blank'>\u82cd\u7a79\u5e7b\u60f3</a></li> \u000a                        <li class='friends_link_li'><a href='http://tux.cublog.cn' target='_blank'>\u672a\u6765\u5c5e\u4e8eLinux!</a></li> \u000a                        <li class='friends_link_li'><a href='http://www.firefoxbug.com/' target='_blank'>Firefoxbug</a></li> \u000a                    </ul>\u000a                </div>\u000a                <div class='footlogo'>\u000a                    <span>Copyright © 2012-2014&nbsp;</span><br/><br/>\u000a                </div>\u000a            </div>\u000a            <div id='maincontent_wapper'>\u000a                <div id='maincontent'>\u000a                        <div id='article_view'><div id='article_meta'><h2 id='article_titile'>\u7406\u89e3hadoop fsck\u3001fs -dus\u3001-count -q\u7684\u5927\u5c0f\u8f93\u51fa</h2><p id='article_meta_info'><span id='a_date' >&nbsp;&nbsp;&nbsp;&nbsp;</span><span style='font-size:0.9em'>&nbsp;2014\u5e7404\u670815\u65e5&nbsp;&nbsp;</span><span id='a_author' >&nbsp;&nbsp;&nbsp;&nbsp;</span><span style='font-size:0.9em'>&nbsp;\u78ca\u78casyh&nbsp;&nbsp;</span><span id='a_cateory'>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style='font-size:0.9em'>&nbsp;\u8fd0\u7ef4\u7b14\u8bb0->Hadoop</span>&nbsp;&nbsp;<span id='a_tag'>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style='font-size:0.9em'>hadoop&nbsp;fsck&nbsp;count&nbsp;dus&nbsp;</p></div><div id='article_content' class='markdown-body'><p>\u5f88\u591ahadoop\u7528\u6237\u7ecf\u5e38\u8ff7\u60d1hadoop fsck\uff0chadoop fs -dus\uff0chadoop -count -q\u7b49hadoop\u6587\u4ef6\u7cfb\u7edf\u547d\u4ee4\u8f93\u51fa\u7684\u5927\u5c0f\u4ee5\u53ca\u610f\u4e49\u3002<br />\u000a\u8fd9\u91cc\u5bf9\u8fd9\u7c7b\u95ee\u9898\u505a\u4e00\u4e2a\u5c0f\u7ed3\u3002\u9996\u5148\u6211\u4eec\u6765\u660e\u786e2\u4e2a\u6982\u5ff5\uff1a</p>\u000a<ul>\u000a<li>\u903b\u8f91\u7a7a\u95f4\uff0c\u5373\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e0a\u771f\u6b63\u7684\u6587\u4ef6\u5927\u5c0f</li>\u000a<li>\u7269\u7406\u7a7a\u95f4\uff0c\u5373\u5b58\u5728\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e0a\u8be5\u6587\u4ef6\u5b9e\u9645\u5360\u7528\u7684\u7a7a\u95f4</li>\u000a</ul>\u000a<p><strong> \u4e3a\u4ec0\u4e48\u903b\u8f91\u7a7a\u95f4\u4e00\u822c\u4e0d\u7b49\u4e8e\u7269\u7406\u7a7a\u95f4\uff1f</strong><br />\u000a\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e3a\u4e86\u4fdd\u8bc1\u6587\u4ef6\u7684\u53ef\u9760\u6027\uff0c\u5f80\u5f80\u4f1a\u4fdd\u5b58\u591a\u4e2a\u5907\u4efd\uff08\u4e00\u822c\u662f3\u4efd)\uff0c\u53ea\u8981\u5907\u4efd\u6570\u4e0d\u4e3a1\u7684\u60c5\u51b5\u4e0b\uff0c\u4e00\u822c\u7269\u7406\u7a7a\u95f4\u4f1a\u662f\u903b\u8f91\u7a7a\u95f4\u7684\u51e0\u500d\u3002\u5173\u7cfb\u5982\u4e0b\uff1a</p>\u000a<blockquote>\u000a<p>HDFS\u7269\u7406\u7a7a\u95f4=\u903b\u8f91\u7a7a\u95f4*block\u5907\u4efd\u6570</p>\u000a</blockquote>\u000a<p><strong> hadoop fsck\u548chadoop fs -dus </strong><br />\u000a\u6267\u884chadoop fsck\u548chadoop fs -dus\u663e\u793a\u7684\u6587\u4ef6\u5927\u5c0f\u8868\u793a\u7684\u662f\u6587\u4ef6\u5360\u7528\u7684\u903b\u8f91\u7a7a\u95f4\u3002</p>\u000a<pre>$ hadoop fsck /path/to/directory\u000a Total size:    16565944775310 B    &lt;=== \u770b\u8fd9\u91cc\u000a Total dirs:    3922\u000a Total files:   418464\u000a Total blocks (validated):      502705 (avg. block size 32953610 B)\u000a Minimally replicated blocks:   502705 (100.0 %)\u000a Over-replicated blocks:        0 (0.0 %)\u000a Under-replicated blocks:       0 (0.0 %)\u000a Mis-replicated blocks:         0 (0.0 %)\u000a Default replication factor:    3\u000a Average block replication:     3.0\u000a Corrupt blocks:                0\u000a Missing replicas:              0 (0.0 %)\u000a Number of data-nodes:          18\u000a Number of racks:               1\u000aFSCK ended at Thu Oct 20 20:49:59 CET 2011 in 7516 milliseconds\u000a \u000aThe filesystem under path '/path/to/directory' is HEALTHY\u000a\u000a$ hadoop fs -dus /path/to/directory\u000ahdfs://master:54310/path/to/directory        16565944775310    &lt;=== \u770b\u8fd9\u91cc</pre>\u000a<p>\u6b63\u5982\u547d\u4ee4\u793a\u4f8b\u6240\u89c1\uff0chadoop fsck\u548chadoop fs -dus\u62a5\u544a\u7684\u6587\u4ef6\u5927\u5c0f\u90fd\u662fHDFS\u6587\u4ef6\u5b9e\u9645\u5360\u7528\u7684\u5927\u5c0f\uff0c\u5373\u8fd9\u4e2a\u7a7a\u95f4\u5927\u5c0f\u662f\u6ca1\u6709\u7b97\u5757\u7684\u5907\u4efd\u6570\u7684\u3002\u6587\u4ef6\u771f\u6b63\u5360\u7528\u7684\u7269\u7406\u7a7a\u95f4=\u903b\u8f91\u7a7a\u95f4<em>block\u5907\u4efd\u6570\u636e\uff0c\u537316565944775310 </em>3=49697834325930\uff0c\u8fd9\u4e2a49697834325930\u662f\u7269\u7406\u7a7a\u95f4\u3002</p>\u000a<p><strong> hadoop fs -count -q </strong><br />\u000a\u901a\u8fc7\u6267\u884chadoop fs -count -q /path/to/directory  \u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u76ee\u5f55\u771f\u6b63\u7684\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u3002\u6267\u884c\u7ed3\u679c\u5982\u4e0b:</p>\u000a<pre>$ hadoop fs -count -q /path/to/directory\u000a  QUOTA  REMAINING_QUOTA     SPACE_QUOTA  REMAINING_SPACE_QUOTA    DIR_COUNT  FILE_COUNT      CONTENT_SIZE FILE_NAME\u000a   none              inf  54975581388800          5277747062870        3922       418464    16565944775310 hdfs://master:54310/path/to/directory</pre>\u000a<p>fs -count -q\u4f1a\u8f93\u51fa8\u5217\uff0c\u5206\u522b\u8868\u793a\u5982\u4e0b:</p>\u000a<table>\u000a<tr>\u000a	<td style="text-align: left">\u547d\u540d\u7a7a\u95f4\u7684quota\uff08\u9650\u5236\u6587\u4ef6\u6570\uff09</td>\u000a	<td style="text-align: left">\u5269\u4f59\u7684\u547d\u540d\u7a7a\u95f4quota</td>\u000a	<td style="text-align: left">\u7269\u7406\u7a7a\u95f4\u7684quota \uff08\u9650\u5236\u7a7a\u95f4\u5360\u7528\u5927\u5c0f\uff09</td>\u000a	<td style="text-align: left">\u5269\u4f59\u7684\u7269\u7406\u7a7a\u95f4</td>\u000a	<td style="text-align: left">\u76ee\u5f55\u6570\u7edf\u8ba1</td>\u000a	<td style="text-align: left">\u6587\u4ef6\u6570\u7edf\u8ba1</td>\u000a	<td style="text-align: left">\u76ee\u5f55\u903b\u8f91\u7a7a\u95f4\u603b\u5927\u5c0f</td>\u000a	<td style="text-align: left">\u8def\u5f84</td>\u000a</tr>\u000a</table>\u000a<p>\u53ef\u4ee5\u770b\u51fa\u901a\u8fc7hadoop fs -count -q \u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u76ee\u5f55\u6bd4\u8f83\u8be6\u7ec6\u7684\u7a7a\u95f4\u548cqutoa\u5360\u7528\u60c5\u51b5\uff0c\u5305\u542b\u4e86\u7269\u7406\u7a7a\u95f4\u3001\u903b\u8f91\u7a7a\u95f4\u3001\u6587\u4ef6\u6570\u3001\u76ee\u5f55\u6570\u3001qutoa\u5269\u4f59\u91cf\u7b49\u3002</p></div></div><div class='markdown-body'><p><strong>\u76f8\u5173\u6587\u6863:</strong></p><ul><li><a href='/article/204'>\u5e38\u7528hadoop\u547d\u4ee4</a></li><li><a href='/article/235'>hadoop\u6837\u4f8b\u7a0b\u5e8f</a></li><li><a href='/article/249'>Hadoop\u6d4b\u8bd5TeraSort</a></li><li><a href='/article/265'>Hadoop\u67e5\u770b\u672c\u5730Sequencefile\u6587\u4ef6</a></li><li><a href='/article/268'>Hadoop\u5982\u4f55Kill\u6307\u5b9a\u7528\u6237\u7684\u6240\u6709Job</a></li><li><a href='/article/337'>\u786e\u8ba4Hadoop\u4e2d\u4e22\u5931\u7684\u6587\u4ef6</a></li></ul></div><br/><div><a target='_blank' href='https://www.aliyun.com/act/aliyun/juhe2.php?ali_trackid=2:mm_27951266_7612040_27464560:1460272211_261_126820205'><img src='http://files.opstool.com/man/tu1.jpg'></a>&nbsp;&nbsp;&nbsp;&nbsp;<a target='_blank' href='https://www.aliyun.com/product/rds/?ali_trackid=2:mm_27951266_7612040_27464560:1460272222_2k2_1678893839'><img src='http://files.opstool.com/man/tu2.jpg'/></a>&nbsp;&nbsp;&nbsp;&nbsp;<a target='_blank' href='https://wanwang.aliyun.com/domain/dns/?ali_trackid=2:mm_27951266_7612040_27464560:1460272235_264_993369268'><img src='http://files.opstool.com/man/tu3.jpg'/></a></div>                </div>\u000a            </div>\u000a            </div>\u000a            <div id='divclear'/>\u000a        </div>\u000a    </div>\u000a</body>\u000a</html>\u000a
p3
a.