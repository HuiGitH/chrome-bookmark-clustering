(lp0
S'http://blogread.cn/it/article/4601?f=wb'
p1
aS'redis\xe5\x86\x85\xe5\xad\x98\xe5\xae\xb9\xe9\x87\x8f\xe7\x9a\x84\xe9\xa2\x84\xe4\xbc\xb0\xe5\x92\x8c\xe4\xbc\x98\xe5\x8c\x96 -- \xe7\xb3\xbb\xe7\xbb\x9f\xe6\x9e\xb6\xe6\x9e\x84 -- IT\xe6\x8a\x80\xe6\x9c\xaf\xe5\x8d\x9a\xe5\xae\xa2\xe5\xa4\xa7\xe5\xad\xa6\xe4\xb9\xa0 -- \xe5\x85\xb1\xe5\xad\xa6\xe4\xb9\xa0 \xe5\x85\xb1\xe8\xbf\x9b\xe6\xad\xa5\xef\xbc\x81'
p2
aI0
aV		<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\u000a<html xmlns="http://www.w3.org/1999/xhtml">\u000a<head>\u000a<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\u000a<title>redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316 -- \u7cfb\u7edf\u67b6\u6784 -- IT\u6280\u672f\u535a\u5ba2\u5927\u5b66\u4e60 -- \u5171\u5b66\u4e60 \u5171\u8fdb\u6b65\uff01</title>\u000a<meta name="description" content="redis\u662f\u4e2a\u5185\u5b58\u5168\u96c6\u7684kv\u6570\u636e\u5e93,\u4e0d\u5b58\u5728\u90e8\u5206\u6570\u636e\u5728\u78c1\u76d8\u90e8\u5206\u6570\u636e\u5728\u5185\u5b58\u91cc\u7684\u60c5\u51b5,\u6240\u4ee5\u63d0\u524d\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u975e\u5e38\u91cd\u8981.\u672c\u6587\u5c06\u4ee5\u6700\u5e38\u7528\u7684string\u548czipmap\u4e24\u7c7b\u6570\u636e\u7ed3\u6784\u5728jemalloc\u5185\u5b58\u5206\u914d\u5668\u4e0b\u7684\u5185\u5b58\u5bb9\u91cf\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u7684\u65b9\u6cd5. \u5148\u8bf4\u8bf4jemalloc,\u4f20\u8bf4\u4e2d\u89e3\u51b3firefox\u5185\u5b58\u95ee\u9898freebsd\u7684\u9ed8\u8ba4malloc\u5206\u914d\u5668,area,thread-cache\u529f\u80fd\u548ctmalloc\u975e\u5e38\u7684\u76f8\u8bc6.\u57282.4\u7248\u672c\u88abredis\u5f15\u5165,\u5728antirez\u7684\u535a\u6587\u4e2d\u63d0\u5230\u5185\u8282\u7ea630%\u7684\u5185\u5b58\u4f7f\u7528.\u76f8\u6bd4glibc\u7684malloc\u9700\u8981\u5728\u6bcf\u4e2a\u5185\u5b58\u5916..." />\u000a<meta name="keywords" content="redis,\u5bb9\u91cf,redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316,\u7cfb\u7edf\u67b6\u6784" />\u000a<meta name="renderer" content="webkit">\u000a<meta property="qc:admins" content="0135301347725146367147" />\u000a<link rel="canonical" href="http://blogread.cn/it/article/4601"/>\u000a<meta name="Cache-control" content="no-transform">\u000a<html>\u000a<link href="/it/css/css.css" rel="stylesheet" type="text/css" />\u000a<link href="/it/plugins/ueditor/third-party/SyntaxHighlighter/shCoreDefault.css" rel="stylesheet" type="text/css" />\u000a<script type="text/javascript" src="http://lib.vipsinaapp.com/js/jquery/1.8/jquery.min.js"></script>\u000a<script type="text/javascript" src="/it/plugins/ueditor/third-party/SyntaxHighlighter/shCore.js"></script>\u000a \u000a<script type="text/javascript">\u000a	SyntaxHighlighter.all() //\u6267\u884c\u4ee3\u7801\u9ad8\u4eae  \u000a</script> \u000a\u000a<script type="text/javascript">\u000a	window.google_analytics_uacct = "UA-6082292-6";\u000a</script>\u000a<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=3741373929" type="text/javascript" charset="utf-8"></script>\u000a\u000a<script type="text/javascript">\u000afunction nav_locate(){\u000a	var top=$(document).scrollTop();\u000a\u000a	if(($.browser.msie==true)&&($.browser.version==6.0)){\u000a		if(top>131) {\u000a			//$('.main').css('margin-top', '80px');\u000a			//$("#nav").css({position:"absolute",top:top-131});\u000a		}\u000a		if(top > rightLowest) {\u000a			follow_card("absolute", 10);\u000a		}\u000a	}else{\u000a		if(top>131) {\u000a			//$('.main').css('margin-top', '80px');\u000a			//$("#nav").css({position:"fixed",top:0});\u000a		}\u000a		if(top > rightLowest) {\u000a			\u000a			follow_card("fixed", 10);\u000a		}\u000a	}\u000a	if(top<=131) {\u000a		//$('.main').removeAttr('style');\u000a		//$("#nav").css({position:"static",top:0});\u000a		\u000a		follow_card("static", 0);\u000a	}\u000a	if(top<=rightLowest) {\u000a		follow_card("static", 0);\u000a	}\u000a}\u000a\u000afunction follow_card(strPosition, numTop){\u000a	if ($("#maybelike").length > 0){\u000a		$("#maybelike").css({position:strPosition,top:numTop});\u000a	}else if ($("#rightHotArticle").length > 0){\u000a		$("#rightHotArticle").css({position:strPosition,top:numTop});\u000a	}else if ($("#newArtile").length > 0){\u000a		$("#newArtile").css({position:strPosition,top:numTop});\u000a	}\u000a}\u000a\u000a$(function(){\u000a	rightLowest = $("#lastdiv").offset().top + $("#lastdiv").height();\u000a	window.onscroll=nav_locate;\u000a	window.onresize=nav_locate;\u000a});\u000a\u000a\u000a//-------------- \u000a\u000a$(document).ready(function(){\u000a	$("#adlayerclose").click(function(){\u000a		$("#adlayer").hide();\u000a	});\u000a	$("#adlayerclose").click(function(){\u000a		$("#adlayertitle").show();\u000a	});\u000a	\u000a	$("#adlayeropen").click(function(){\u000a		$("#adlayer").show();\u000a		$("#adlayertitle").hide();\u000a	});\u000a});\u000a\u000a</script>\u000a\u000a</head>\u000a\u000a<body>\u000a\u000a<div class="body">\u000a	<div class="topnav">\u000a		&nbsp;&nbsp;&nbsp;&nbsp;<a href="/news/?f=blogread_header" style="color:red;"><strong>\u6280\u672f\u5934\u6761</strong>\uff08\u6295\u9012\u4f60\u7684\u6587\u7ae0\uff09</a>\u000a		&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/search.php">\u641c\u7d22\u672c\u7ad9</a>\u000a		&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/subscribe/">\u90ae\u4ef6\u8ba2\u9605</a>\u000a		&nbsp;&nbsp;&nbsp;&nbsp;\u5fae\u4fe1\u53f7\uff1aIT\u6280\u672f\u535a\u5ba2\u5927\u5b66\u4e60\u000a			</div>\u000a    \u000a    <div class="banner">\u000a        	<div class="logo"><h2><a href="/it/">IT\u6280\u672f\u535a\u5ba2\u5927\u5b66\u4e60</a></h2><font color="#FB993B">-- \u5171\u5b66\u4e60 \u5171\u8fdb\u6b65\uff01 --</font></div>\u000a        	<div class="ad">\u000a\u000a				        	\u000a		       							<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>\u000a					<!-- 728x90, \u521b\u5efa\u4e8e 09-10-14 -->\u000a					<ins class="adsbygoogle"\u000a					     style="display:inline-block;width:728px;height:90px"\u000a					     data-ad-client="ca-pub-2206192680127944"\u000a					     data-ad-slot="2235377458"></ins>\u000a					<script>\u000a					(adsbygoogle = window.adsbygoogle || []).push({});\u000a					</script>\u000a										\u000a				            </div>    \u000a	</div><!-- banner -->\u000a\u000a	<div class="nav" id="nav"> \u000a		<a href="/it/category/24">iOS\u5f00\u53d1</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/25">Android\u5f00\u53d1</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/2">PHP</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/26">Java</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/3">MySQL</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/4">Oracle</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/5">Linux</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/6">Apache</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/9">\u7b97\u6cd5</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/16">\u5b89\u5168</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/15">\u7f51\u7edc\u7cfb\u7edf</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/17">\u7cfb\u7edf\u67b6\u6784</a>&nbsp;&nbsp;&nbsp;&nbsp;\u000a		<a href="/it/category/18">\u7cfb\u7edf\u8fd0\u7ef4</a>\u000a		<br />  \u000a		<a href="/it/category/7">JavaScript</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/12">CSS/HTML</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/13">\u7528\u6237\u7814\u7a76</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/20">\u4fe1\u606f\u548c\u4ea4\u4e92</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/19">\u89c6\u89c9\u8bbe\u8ba1</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/21">\u8bbe\u8ba1\u601d\u60f3</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/11">\u53d1\u73b0</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/10">\u594b\u6597</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/14">\u4e92\u8054\u7f51</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/23">\u6e90\u7801\u5206\u6790</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/22">\u7f16\u7a0b\u8bed\u8a00</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="/it/category/8">\u5176\u4ed6</a> \u000a	</div> 	\u000a	<div class="main"> \u000a\u000a		<div class="main_left">\u000a			\u000a			\u000a			<div class="posi">\u000a				<strong>\u60a8\u73b0\u5728\u7684\u4f4d\u7f6e</strong>\uff1a<a href="http://blogread.cn/it/">\u9996\u9875</a> --> <a href="http://blogread.cn/it/category/17">\u7cfb\u7edf\u67b6\u6784</a> --> redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316\u000a			</div>\u000a\u000a			<div class="articlebox">\u000a				<div class="title"><h2>redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316</h2></div>\u000a				<div class="info">\u000a											<script type="text/javascript" charset="utf-8">\u000a(function(){\u000a  var _w = 106 , _h = 24;\u000a  var param = {\u000a    /*url:location.href,*/\u000a    url:'http://blogread.cn/it/article/4601?f=wb1', \u000a    type:'5',\u000a    count:'', /**\u662f\u5426\u663e\u793a\u5206\u4eab\u6570\uff0c1\u663e\u793a(\u53ef\u9009)*/\u000a    appkey:'3741373929', /**\u60a8\u7533\u8bf7\u7684\u5e94\u7528appkey,\u663e\u793a\u5206\u4eab\u6765\u6e90(\u53ef\u9009)*/\u000a    title:'\u3010redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316\u3011redis\u662f\u4e2a\u5185\u5b58\u5168\u96c6\u7684kv\u6570\u636e\u5e93,\u4e0d\u5b58\u5728\u90e8\u5206\u6570\u636e\u5728\u78c1\u76d8\u90e8\u5206\u6570\u636e\u5728\u5185\u5b58\u91cc\u7684\u60c5\u51b5,\u6240\u4ee5\u63d0\u524d\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u975e\u5e38\u91cd\u8981.\u672c\u6587\u5c06\u4ee5\u6700\u5e38\u7528\u7684string\u548czipmap\u4e24\u7c7b\u6570\u636e\u7ed3\u6784\u5728jemalloc\u5185\u5b58\u5206\u914d\u5668\u4e0b\u7684\u5185\u5b58\u5bb9\u91cf\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u7684\u65b9\u6cd5. \u5148\u8bf4\u8bf4jemalloc,\u4f20\u8bf4\u4e2d\u89e3\u51b3firefox\u5185\u5b58\u95ee\u9898freebsd\u7684\u9ed8\u8ba4malloc\u5206\u914d\u5668,area,thread-cache\u529f\u80fd\u548ctmalloc\u975e\u5e38\u7684\u76f8\u8bc6.\u57282.4\u7248\u672c\u88abredis\u5f15\u5165,\u5728antirez\u7684\u535a\u6587\u4e2d\u63d0\u5230\u5185\u8282\u7ea630%\u7684\u5185\u5b58\u4f7f\u7528.\u76f8\u6bd4glibc\u7684malloc\u9700\u8981\u5728\u6bcf\u4e2a\u5185\u5b58\u5916...', /**\u5206\u4eab\u7684\u6587\u5b57\u5185\u5bb9(\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6240\u5728\u9875\u9762\u7684title)*/\u000a    pic:'', /**\u5206\u4eab\u56fe\u7247\u7684\u8def\u5f84(\u53ef\u9009)*/\u000a    ralateUid:'1646218964', /**\u5173\u8054\u7528\u6237\u7684UID\uff0c\u5206\u4eab\u5fae\u535a\u4f1a@\u8be5\u7528\u6237(\u53ef\u9009)*/\u000a	language:'zh_cn', /**\u8bbe\u7f6e\u8bed\u8a00\uff0czh_cn|zh_tw(\u53ef\u9009)*/\u000a    rnd:new Date().valueOf()\u000a  }\u000a  var temp = [];\u000a  for( var p in param ){\u000a    temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )\u000a  }\u000a  document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')\u000a})()\u000a</script>\u000a															\u6d4f\u89c8:2448\u6b21&nbsp;&nbsp;<a href="#original">\u51fa\u5904\u4fe1\u606f</a>\u000a				</div>\u000a\u000a				<div class="article">\u000a										<div style="float:right;margin: 4px;">\u000a\u000a												<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>\u000a						<!-- blogread\u6b63\u6587\u9875336-280 -->\u000a						<ins class="adsbygoogle"\u000a						     style="display:inline-block;width:336px;height:280px"\u000a						     data-ad-client="ca-pub-2206192680127944"\u000a						     data-ad-slot="2362052085"></ins>\u000a						<script>\u000a						(adsbygoogle = window.adsbygoogle || []).push({});\u000a						</script>\u000a												\u000a					</div>\u000a					\u000a					<P>&nbsp;&nbsp;&nbsp;&nbsp;redis\u662f\u4e2a\u5185\u5b58\u5168\u96c6\u7684kv\u6570\u636e\u5e93,\u4e0d\u5b58\u5728\u90e8\u5206\u6570\u636e\u5728\u78c1\u76d8\u90e8\u5206\u6570\u636e\u5728\u5185\u5b58\u91cc\u7684\u60c5\u51b5,\u6240\u4ee5\u63d0\u524d\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u975e\u5e38\u91cd\u8981.\u672c\u6587\u5c06\u4ee5\u6700\u5e38\u7528\u7684string\u548czipmap\u4e24\u7c7b\u6570\u636e\u7ed3\u6784\u5728jemalloc\u5185\u5b58\u5206\u914d\u5668\u4e0b\u7684\u5185\u5b58\u5bb9\u91cf\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u7684\u65b9\u6cd5.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u5148\u8bf4\u8bf4jemalloc,\u4f20\u8bf4\u4e2d\u89e3\u51b3firefox\u5185\u5b58\u95ee\u9898freebsd\u7684\u9ed8\u8ba4malloc\u5206\u914d\u5668,area,thread-cache\u529f\u80fd\u548ctmalloc\u975e\u5e38\u7684\u76f8\u8bc6.\u57282.4\u7248\u672c\u88abredis\u5f15\u5165,\u5728<A href="http://antirez.com/post/everything-about-redis-24.html">antirez\u7684\u535a\u6587</A>\u4e2d\u63d0\u5230\u5185\u8282\u7ea630%\u7684\u5185\u5b58\u4f7f\u7528.\u76f8\u6bd4glibc\u7684malloc\u9700\u8981\u5728\u6bcf\u4e2a\u5185\u5b58\u5916\u9644\u52a0\u4e00\u4e2a\u989d\u5916\u76844\u5b57\u8282\u5185\u5b58\u5757,jemalloc\u53ef\u4ee5\u901a\u8fc7je_malloc_usable_size\u51fd\u6570\u83b7\u5f97\u6307\u9488\u5b9e\u9645\u6307\u5411\u7684\u5185\u5b58\u5927\u5c0f,\u8fd9\u6837redis\u91cc\u7684\u6bcf\u4e2akey\u6216\u8005value\u90fd\u53ef\u4ee5\u8282\u7ea64\u4e2a\u5b57\u8282,\u4e0d\u5c11\u963f.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u4e0b\u9762\u662fjemalloc size class categories,\u5de6\u8fb9\u662f\u7528\u6237\u7533\u8bf7\u5185\u5b58\u8303\u56f4,\u53f3\u8fb9\u662f\u5b9e\u9645\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f.\u8fd9\u5f20\u8868\u540e\u9762\u4f1a\u7528\u5230.</P><PRE>1     - 4     size class:4\u000a5     - 8     size class:8\u000a9     - 16    size class:16\u000a17    - 32    size class:32\u000a33    - 48    size class:48\u000a49    - 64    size class:64\u000a65    - 80    size class:80\u000a81    - 96    size class:96\u000a97    - 112   size class:112\u000a113   - 128   size class:128\u000a129   - 192   size class:192\u000a193   - 256   size class:256\u000a257   - 320   size class:320\u000a321   - 384   size class:384\u000a385   - 448   size class:448\u000a449   - 512   size class:512\u000a513   - 768   size class:768\u000a769   - 1024  size class:1024\u000a1025  - 1280  size class:1280\u000a1281  - 1536  size class:1536\u000a1537  - 1792  size class:1792\u000a1793  - 2048  size class:2048\u000a2049  - 2304  size class:2304\u000a2305  - 2560  size class:2560</PRE>\u000a<H2>string</H2>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;string\u7c7b\u578b\u770b\u4f3c\u7b80\u5355,\u4f46\u8fd8\u662f\u6709\u51e0\u4e2a\u53ef\u4f18\u5316\u7684\u70b9.\u5148\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684set\u547d\u4ee4\u6240\u6dfb\u52a0\u7684\u6570\u636e\u7ed3\u6784.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;<A href="http://www.hoterran.info/wp-content/uploads/2011/11/string.jpg"><IMG class="aligncenter size-full wp-image-542" title=string alt="" src="http://www.hoterran.info/wp-content/uploads/2011/11/string.jpg" width=531 height=189></A></P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u4e00\u4e2aset hello world\u547d\u4ee4\u6700\u7ec8(\u4e2d\u95f4\u4f1amalloc,free\u7684\u6211\u4eec\u4e0d\u8003\u8651)\u4f1a\u4ea7\u751f4\u4e2a\u5bf9\u8c61,\u4e00\u4e2adictEntry(12\u5b57\u8282),\u4e00\u4e2asds\u7528\u4e8e\u5b58\u50a8key,\u8fd8\u6709\u4e00\u4e2aredisObject(12\u5b57\u8282),\u8fd8\u6709\u4e00\u4e2a\u5b58\u50a8string\u7684sds.sds\u5bf9\u8c61\u9664\u4e86\u5305\u542b\u5b57\u7b26\u4e32\u672c\u751f\u4e4b\u5916,\u8fd8\u6709\u4e00\u4e2asds header\u548c\u989d\u5916\u7684\u4e00\u4e2a\u5b57\u8282\u4f5c\u4e3a\u5b57\u7b26\u4e32\u7ed3\u5c3e\u51719\u4e2a\u5b57\u8282.</P><PRE>sds.c\u000a========\u000a 51 sds sdsnewlen(const void *init, size_t initlen) {\u000a 52     struct sdshdr *sh;\u000a 53\u000a 54     sh = zmalloc(sizeof(struct sdshdr)+initlen+1);\u000a\u000asds.h\u000a=======\u000a 39 struct sdshdr {\u000a 40     int len;\u000a 41     int free;\u000a 42     char buf[];\u000a 43\u000a};</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u6839\u636ejemalloc size class\u90a3\u5f20\u8868,\u8fd9\u4e2a\u547d\u4ee4\u6700\u7ec8\u7533\u8bf7\u7684\u5185\u5b58\u4e3a16(dictEtnry) + 16 (redisObject) + 16(\u201chello\u201d) + 16(\u201cworld\u201d),\u4e00\u517164\u5b57\u8282.\u6ce8\u610f\u5982\u679ckey\u6216\u8005value\u7684\u5b57\u7b26\u4e32\u957f\u5ea6+9\u5b57\u8282\u8d85\u8fc716\u5b57\u8282,\u5219\u5b9e\u9645\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f32\u5b57\u8282.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u63d0\u4e00\u4e0bstring\u5e38\u89c1\u7684\u4f18\u5316\u65b9\u6cd5</P>\u000a<H3>\u5c3d\u91cf\u4f7fvalue\u4e3a\u7eaf\u6570\u5b57</H3>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8fd9\u6837\u5b57\u7b26\u4e32\u4f1a\u8f6c\u5316\u6210int\u7c7b\u578b\u51cf\u5c11\u5185\u5b58\u7684\u4f7f\u7528.</P><PRE>redis.c\u000a=========\u000a37 void setCommand(redisClient *c) {\u000a38   c-&gt;argv[2] = tryObjectEncoding(c-&gt;argv[2]);\u000a39   setGenericCommand(c,0,c-&gt;argv[1],c-&gt;argv[2],NULL);\u000a40 }\u000aobject.c =======\u000a275   o-&gt;encoding = REDIS_ENCODING_INT;\u000a276   sdsfree(o-&gt;ptr);\u000a277   o-&gt;ptr = (void*) value;</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u53ef\u4ee5\u770b\u5230sds\u88ab\u91ca\u653e\u4e86,\u6570\u5b57\u88ab\u5b58\u50a8\u5728\u6307\u9488\u4f4d\u4e0a,\u6240\u4ee5\u5bf9\u4e8eset hello 1111111\u5c31\u53ea\u9700\u898148\u5b57\u8282\u7684\u5185\u5b58.</P>\u000a<H3>\u8c03\u6574REDIS_SHARED_INTEGERS</H3>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u5982\u679cvalue\u6570\u5b57\u5c0f\u4e8e\u5b8fREDIS_SHARED_INTEGERS(\u9ed8\u8ba410000),\u5219\u8fd9\u4e2aredisObject\u4e5f\u90fd\u8282\u7701\u4e86,\u4f7f\u7528redis Server\u542f\u52a8\u65f6\u7684share Object.</P><PRE>object.c\u000a=======\u000a269 if (server.maxmemory == 0 &amp;&amp; value &gt;= 0 &amp;&amp; value &lt; REDIS_SHARED_INTEGERS &amp;&amp;\u000a270   pthread_equal(pthread_self(),server.mainthread)) {\u000a271   decrRefCount(o);\u000a272   incrRefCount(shared.integers[value]);\u000a273   return shared.integers[value];\u000a274 }</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8fd9\u6837\u4e00\u4e2aset hello 111\u5c31\u53ea\u9700\u898132\u5b57\u8282,\u8fderedisObject\u4e5f\u7701\u4e86.\u6240\u4ee5\u5bf9\u4e8evalue\u90fd\u662f\u5c0f\u6570\u5b57\u7684\u5e94\u7528,\u9002\u5f53\u8c03\u5927REDIS_SHARED_INTEGERS\u8fd9\u4e2a\u5b8f\u53ef\u4ee5\u5f88\u597d\u7684\u8282\u7ea6\u5185\u5b58.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u51fa\u53bbkv\u4e4b\u5916,dict\u7684bucket\u9010\u6e10\u53d8\u5927\u4e5f\u9700\u8981\u6d88\u8017\u5185\u5b58,bucket\u7684\u5143\u7d20\u662f\u4e2a\u6307\u9488(dictEntry**), \u800cbucket\u7684\u5927\u5c0f\u662f\u8d85\u8fc7key\u4e2a\u6570\u5411\u4e0a\u6c42\u6574\u76842\u7684n\u6b21\u65b9,\u5bf9\u4e8e1w\u4e2akey\u5982\u679crehash\u8fc7\u540e\u5c31\u9700\u898116384\u4e2abucket.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u5f00\u59cbstring\u7c7b\u578b\u7684\u5bb9\u91cf\u9884\u4f30\u6d4b\u8bd5, \u811a\u672c\u5982\u4e0b</P><PRE>#! /bin/bash\u000a\u000aredis-cli info|grep used_memory:\u000a\u000afor (( start = 10000; start &lt; 30000; start++ ))\u000ado\u000a    redis-cli set a$start baaaaaaaa$start &gt; /dev/null\u000adone\u000a\u000aredis-cli info|grep used_memory:</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u6839\u636e\u4e0a\u9762\u7684\u603b\u7ed3\u6211\u4eec\u5f97\u51fastring\u516c\u5f0f</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;string\u7c7b\u578b\u7684\u5185\u5b58\u5927\u5c0f = \u952e\u503c\u4e2a\u6570 * (dictEntry\u5927\u5c0f + redisObject\u5927\u5c0f + \u5305\u542bkey\u7684sds\u5927\u5c0f + \u5305\u542bvalue\u7684sds\u5927\u5c0f) + bucket\u4e2a\u6570 * 4</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u4e0b\u9762\u662f\u6211\u4eec\u7684\u9884\u4f30\u503c</P><PRE>&gt;&gt;&gt; 20000 * (16 + 16 + 16 + 32) + 32768 * 4\u000a1731072</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8fd0\u884c\u4e00\u4e0b\u6d4b\u8bd5\u811a\u672c</P><PRE>hoterran@~/Projects/redis-2.4.1$ bash redis-mem-test.sh\u000aused_memory:564352\u000aused_memory:2295424</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8ba1\u7b97\u4e00\u4e0b\u5dee\u503c</P><PRE>&gt;&gt;&gt; 2295424 - 564352\u000a1731072</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u90fd\u662f1731072,\u8bf4\u660e\u9884\u4f30\u975e\u5e38\u7684\u51c6\u786e, ^_^</P>\u000a<H2>zipmap</H2>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;<A href="http://blog.nosqlfan.com/html/3379.html">\u8fd9\u7bc7\u6587\u7ae0</A>\u5df2\u7ecf\u89e3\u91cazipmap\u7684\u6548\u679c,\u53ef\u4ee5\u5927\u91cf\u7684\u8282\u7ea6\u5185\u5b58\u7684\u4f7f\u7528.\u5bf9\u4e8e\u4e00\u4e2a\u666e\u901a\u7684subkey\u548cvalue,\u53ea\u9700\u8981\u989d\u5916\u76843\u4e2a\u5b57\u8282(keylen,valuelen,freelen)\u6765\u5b58\u50a8,\u53e6\u5916\u7684hash key\u4e5f\u53ea\u9700\u8981\u989d\u5916\u76842\u4e2a\u5b57\u8282(zm\u5934\u5c3e)\u6765\u5b58\u50a8subkey\u7684\u4e2a\u6570\u548c\u7ed3\u675f\u7b26.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;<A href="http://www.hoterran.info/wp-content/uploads/2011/11/zipmap.jpg"><IMG class="aligncenter size-full wp-image-554" title=zipmap alt="" src="http://www.hoterran.info/wp-content/uploads/2011/11/zipmap.jpg" width=776 height=266></A></P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;zipmap\u7c7b\u578b\u7684\u5185\u5b58\u5927\u5c0f = hashkey\u4e2a\u6570 * (dictEntry\u5927\u5c0f + redisObject\u5927\u5c0f + \u5305\u542bkey\u7684sds\u5927\u5c0f + subkey\u7684\u603b\u5927\u5c0f) + bucket\u4e2a\u6570 * 4</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u5f00\u59cb\u5bb9\u91cf\u9884\u4f30\u6d4b\u8bd5,100\u4e2ahashkey,\u5176\u4e2d\u6bcf\u4e2ahashkey\u91cc\u5305\u542b300\u4e2asubkey, \u8fd9\u91cckey+value\u7684\u957f\u5ea6\u4e3a5\u5b57\u8282</P><PRE>#! /bin/bash\u000a\u000aredis-cli info|grep used_memory:\u000a\u000afor (( start = 100; start &lt; 200; start++ ))\u000ado\u000a    for (( start2 = 100; start2 &lt; 400; start2++ ))\u000a    do\u000a         redis-cli hset test$start a$start2 "1" &gt; /dev/null\u000a    done\u000adone\u000a\u000aredis-cli info|grep used_memory:</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8fd9\u91ccsubkey\u662f\u540c\u65f6\u7533\u8bf7\u7684\u7684,\u5927\u5c0f\u662f300 * (5 + 3) + 2 =2402\u5b57\u8282,\u6839\u636e\u4e0a\u9762jemalloc size class\u53ef\u4ee5\u770b\u51fa\u5b9e\u9645\u7533\u8bf7\u7684\u5185\u5b58\u4e3a2560.\u53e6\u5916100hashkey\u7684bucket\u662f128.\u6240\u4ee5\u603b\u7684\u9884\u4f30\u5927\u5c0f\u4e3a</P><PRE>&gt;&gt;&gt; 100 * (16 + 16 + 16 + 2560) + 128 * 4\u000a261312</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8fd0\u884c\u4e00\u4e0b\u4e0a\u9762\u7684\u811a\u672c</P><PRE>hoterran@~/Projects/redis-2.4.1$ bash redis-mem-test-zipmap.sh\u000aused_memory:555916\u000aused_memory:817228</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u8ba1\u7b97\u4e00\u4e0b\u5dee\u503c</P><PRE>&gt;&gt;&gt; 817228 - 555916\u000a261312</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u662f\u7684\u5b8c\u5168\u4e00\u6837,\u9884\u4f30\u5f88\u51c6\u786e.</P>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u53e6\u5916\u626f\u626fzipmap\u7684\u4e00\u4e2a\u7f3a\u9677,zipmap\u7528\u4e8e\u8bb0\u5f55subkey\u4e2a\u6570\u7684zmlen\u53ea\u6709\u4e00\u4e2a\u5b57\u8282,\u8d85\u8fc7254\u4e2asubkey\u540e\u5219\u65e0\u6cd5\u8bb0\u5f55,\u9700\u8981\u904d\u5386\u6574\u4e2azipmap\u624d\u80fd\u83b7\u5f97subkey\u7684\u4e2a\u6570.\u800c\u6211\u4eec\u73b0\u5728\u5e38\u628ahash_max_zipmap_entries\u8bbe\u7f6e\u4e3a1000,\u8fd9\u6837\u8d85\u8fc7254\u4e2asubkey\u4e4b\u540e\u6bcf\u6b21hset\u6548\u7387\u90fd\u5f88\u5dee.</P><PRE>354     if (zm[0] &lt; ZIPMAP_BIGLEN) {\u000a355         len = zm[0];                       //\u5c0f\u4e8e254,\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\u000a356     } else {\u000a357         unsigned char *p = zipmapRewind(zm);   //\u904d\u5386zipmap\u000a358         while((p = zipmapNext(p,NULL,NULL,NULL,NULL)) != NULL) len++;\u000a359\u000a360         /* Re-store length if small enough */\u000a361         if (len &lt; ZIPMAP_BIGLEN) zm[0] = len;\u000a362     }</PRE>\u000a<P>&nbsp;&nbsp;&nbsp;&nbsp;\u7b80\u5355\u628azmlen\u8bbe\u7f6e\u4e3a2\u4e2a\u5b57\u8282(\u53ef\u4ee5\u5b58\u50a865534\u4e2asubkey)\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898,<A href="https://github.com/antirez/redis/issues/188">\u4eca\u5929\u548cantirez\u804a\u4e86\u4e00\u4e0b</A>,\u8fd9\u4f1a\u7834\u574frdb\u7684\u517c\u5bb9\u6027,\u8fd9\u4e2a\u529f\u80fd\u6539\u8fdb\u63a8\u8fdf\u52303.0\u7248\u672c,\u53e6\u5916\u8fd9\u4e2a\u7f3a\u9677\u53ef\u80fd\u662fweibo\u7684redis\u673a\u5668cpu\u6d88\u8017\u8fc7\u9ad8\u7684\u539f\u56e0\u4e4b\u4e00.</P>\u000a						\u000a										<div>\u000a						<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>\u000a						<!-- blogread\u6587\u7ae0\u5e95\u90e8 -->\u000a						<ins class="adsbygoogle"\u000a						     style="display:inline-block;width:728px;height:90px"\u000a						     data-ad-client="ca-pub-2206192680127944"\u000a						     data-ad-slot="1471313689"></ins>\u000a						<script>\u000a						(adsbygoogle = window.adsbygoogle || []).push({});\u000a						</script>\u000a					</div>\u000a										\u000a										<div style="margin:10px 0px;padding:10px;background:#F3F781;text-align:center;-moz-border-radius: 5px;border-radius: 5px;">\u000a					\u89c9\u5f97\u6587\u7ae0\u6709\u7528\uff1f\u7acb\u5373\uff1a\u000a<script type="text/javascript" charset="utf-8">\u000a(function(){\u000a  var _w = 106 , _h = 24;\u000a  var param = {\u000a    /*url:location.href,*/\u000a    url:'http://blogread.cn/it/article/4601?f=wb2', \u000a    type:'5',\u000a    count:'', /**\u662f\u5426\u663e\u793a\u5206\u4eab\u6570\uff0c1\u663e\u793a(\u53ef\u9009)*/\u000a    appkey:'3741373929', /**\u60a8\u7533\u8bf7\u7684\u5e94\u7528appkey,\u663e\u793a\u5206\u4eab\u6765\u6e90(\u53ef\u9009)*/\u000a    title:'\u3010redis\u5185\u5b58\u5bb9\u91cf\u7684\u9884\u4f30\u548c\u4f18\u5316\u3011redis\u662f\u4e2a\u5185\u5b58\u5168\u96c6\u7684kv\u6570\u636e\u5e93,\u4e0d\u5b58\u5728\u90e8\u5206\u6570\u636e\u5728\u78c1\u76d8\u90e8\u5206\u6570\u636e\u5728\u5185\u5b58\u91cc\u7684\u60c5\u51b5,\u6240\u4ee5\u63d0\u524d\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u975e\u5e38\u91cd\u8981.\u672c\u6587\u5c06\u4ee5\u6700\u5e38\u7528\u7684string\u548czipmap\u4e24\u7c7b\u6570\u636e\u7ed3\u6784\u5728jemalloc\u5185\u5b58\u5206\u914d\u5668\u4e0b\u7684\u5185\u5b58\u5bb9\u91cf\u9884\u4f30\u548c\u8282\u7ea6\u5185\u5b58\u7684\u65b9\u6cd5. \u5148\u8bf4\u8bf4jemalloc,\u4f20\u8bf4\u4e2d\u89e3\u51b3firefox\u5185\u5b58\u95ee\u9898freebsd\u7684\u9ed8\u8ba4malloc\u5206\u914d\u5668,area,thread-cache\u529f\u80fd\u548ctmalloc\u975e\u5e38\u7684\u76f8\u8bc6.\u57282.4\u7248\u672c\u88abredis\u5f15\u5165,\u5728antirez\u7684\u535a\u6587\u4e2d\u63d0\u5230\u5185\u8282\u7ea630%\u7684\u5185\u5b58\u4f7f\u7528.\u76f8\u6bd4glibc\u7684malloc\u9700\u8981\u5728\u6bcf\u4e2a\u5185\u5b58\u5916...', /**\u5206\u4eab\u7684\u6587\u5b57\u5185\u5bb9(\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6240\u5728\u9875\u9762\u7684title)*/\u000a    pic:'', /**\u5206\u4eab\u56fe\u7247\u7684\u8def\u5f84(\u53ef\u9009)*/\u000a    ralateUid:'1646218964', /**\u5173\u8054\u7528\u6237\u7684UID\uff0c\u5206\u4eab\u5fae\u535a\u4f1a@\u8be5\u7528\u6237(\u53ef\u9009)*/\u000a	language:'zh_cn', /**\u8bbe\u7f6e\u8bed\u8a00\uff0czh_cn|zh_tw(\u53ef\u9009)*/\u000a    rnd:new Date().valueOf()\u000a  }\u000a  var temp = [];\u000a  for( var p in param ){\u000a    temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )\u000a  }\u000a  document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')\u000a})()\u000a</script>\u000a						\u548c\u670b\u53cb\u4e00\u8d77 <strong>\u5171\u5b66\u4e60 \u5171\u8fdb\u6b65\uff01</strong>\u000a						\u000a										</div>\u000a										\u000a										<h3>\u5efa\u8bae\u7ee7\u7eed\u5b66\u4e60\uff1a</h3>\u000a					<ol>\u000a													<li><a href="http://blogread.cn/it/article/4005?f=sa">redis\u6e90\u4ee3\u7801\u5206\u6790 -  persistence &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a30371)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/5068?f=sa">Redis\u6d88\u606f\u961f\u5217\u7684\u82e5\u5e72\u5b9e\u73b0\u65b9\u5f0f &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a9364)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/5984?f=sa">\u57fa\u4e8eRedis\u6784\u5efa\u7cfb\u7edf\u7684\u7ecf\u9a8c\u548c\u6559\u8bad &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a8479)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/4298?f=sa">\u6d45\u8c08redis\u6570\u636e\u5e93\u7684\u952e\u503c\u8bbe\u8ba1 &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a7353)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/3478?f=sa">redis\u5728\u5927\u6570\u636e\u91cf\u4e0b\u7684\u538b\u6d4b\u8868\u73b0 &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a6140)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/1635?f=sa">redis \u8fd0\u7ef4\u5b9e\u9645\u7ecf\u9a8c\u7eaa\u5f55\u4e4b\u4e00 &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a5681)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/3939?f=sa">Redis\u4f5c\u8005\u8c08Redis\u5e94\u7528\u573a\u666f &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a5667)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/3615?f=sa">Redis\u5185\u5b58\u5b58\u50a8\u7ed3\u6784\u5206\u6790 &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a5571)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/4075?f=sa">\u8ba9Redis\u4f7f\u7528TCMalloc\uff0c\u5b9e\u73b0\u9ad8\u6027\u80fdNOSql\u670d\u52a1\u5668 &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a5416)</span></a></li>\u000a													<li><a href="http://blogread.cn/it/article/4112?f=sa">redis\u6e90\u4ee3\u7801\u5206\u6790  &nbsp;&nbsp; <span style="font-size:14px;">(\u9605\u8bfb\uff1a5175)</span></a></li>\u000a												\u000a					</ol>\u000a										\u000a					<!-- \u000a					<h3>\u7a0b\u5e8f\u5458\u7684\u624b\u673a\u58f3\uff1a</h3>\u000a						<div style="margin:10px 0px;padding:10px;font-size:12px;">\u000a							<div style="float:left;-moz-border-radius: 5px;border-radius: 5px;border:#CAC9C9 1px solid;width:46%;padding:10px;">\u000a								1\u3001\u201cAlways Awesome\u201d\uff0c\u751f\u6d3b\u603b\u6709\u6b22\u4e50\u6291\u6216\u60b2\u4f24\uff0c\u6ca1\u5173\u7cfb\uff0c\u603b\u6709\u529e\u6cd5\u7684\uff1asad.stop() && beAwesome()\u3002\u000a								<br />\u000a								\u6233\uff1a<a href="http://t.cn/R4LuiiX" target="_blank">\u8d2d\u4e70\u5730\u5740</a>\u000a								<br />\u000a								<a href="http://t.cn/R4LuiiX" target="_blank"><img style="width:300px;" src="http://ww3.sinaimg.cn/bmiddle/621f4ed4jw1ezol7zu028j20d20pm0th.jpg" /></a>\u000a							</div>\u000a							<div style="float:right;-moz-border-radius: 5px;border-radius: 5px;border:#CAC9C9 1px solid;width:46%;padding:10px;">\u000a								2\u3001\u201cBug\u9ed1\u6d1e\u201d\uff0c\u4e0a\u7ebf\u524d\u62dc\u4e00\u62dc\uff0cBug\u5168\u8fdb\u9ed1\u6d1e\u3002\u000a								<br />\u000a								\u6233\uff1a<a href="http://t.cn/R4Luii6" target="_blank">\u8d2d\u4e70\u5730\u5740</a>\u000a								<br /><br />\u000a								<a href="http://t.cn/R4Luii6" target="_blank"><img style="width:300px;" src="http://ww3.sinaimg.cn/bmiddle/621f4ed4jw1ezol7zuv9qj20cy0pmq66.jpg" /></a>\u000a							</div>\u000a						</div>\u000a					 -->\u000a					\u000a					\u000a					<div style="margin:10px 0px;padding:10px;text-align:center;-moz-border-radius: 5px;border-radius: 5px;">\u000a						<b>QQ\u6280\u672f\u4ea4\u6d41\u7fa4\uff1a445447336\uff0c\u6b22\u8fce\u52a0\u5165\uff01</b><br />\u000a						<b>\u626b\u4e00\u626b\u8ba2\u9605\u6211\u7684\u5fae\u4fe1\u53f7\uff1aIT\u6280\u672f\u535a\u5ba2\u5927\u5b66\u4e60</b><br />\u000a						<iframe src="http://blogread.cn/it/images/weixin/qrcode_for_gh_609c8c16bbd2_258.jpg" frameborder="0" height="258"></iframe>\u000a					</div>\u000a					\u000a\u000a				</div><!-- article -->\u000a\u000a			</div><!-- articlebox -->\u000a				<!--\u000a			<div class="comment">\u000a				<div class="tip"><a name="mobileshell">\u6765\u4e86\uff0c\u7a0b\u5e8f\u5458\u4e13\u7528\u624b\u673a\u58f3\uff01</a></div>\u000a				<p>&nbsp;&nbsp;&nbsp;&nbsp;\u8be6\u60c5\u8bf7\u89c1\uff1a<a href="http://weibo.com/ttarticle/p/show?id=2309403937099593202247" target="_blank">\u624b\u673a\u58f3\u4ecb\u7ecd</a></p>\u000a				<ul>\u000a					<li>\u201cBug\u9ed1\u6d1e\u201d\uff0c\u4e0a\u7ebf\u524d\u62dc\u4e00\u62dc\uff0cBug\u5168\u8fdb\u9ed1\u6d1e\uff1a<a href="http://t.cn/R4Luii6" target="_blank">\u8d2d\u4e70\u5730\u5740</a></li>\u000a					<li>\u201cAlways Awesome\u201d\uff0c\u751f\u6d3b\u603b\u6709\u6b22\u4e50\u6291\u6216\u60b2\u4f24\uff0c\u6ca1\u5173\u7cfb\uff0c\u603b\u6709\u529e\u6cd5\u7684\uff1asad.stop() && beAwesome()\uff1a<a href="http://t.cn/R4LuiiX" target="_blank">\u8d2d\u4e70\u5730\u5740</a></li>\u000a				</ul>\u000a			</div>\u000a			 -->\u000a			<div class="around">\u000a				<div class="prefix"><!-- <img src="http://blogread.cn/it/images/article.gif" border="0"> --><img src="http://ww3.sinaimg.cn/large/4bda79adjw1en67ot7zhhg200900f01y.gif" border="0"> <strong>\u524d\u4e00\u7bc7\uff1a</strong><a href="http://blogread.cn/it/article/4598">\u5730\u56fe\u68c0\u7d22 </a></div>\u000a				<div class="suffix"><!-- <img src="http://blogread.cn/it/images/article.gif" border="0"> --><img src="http://ww3.sinaimg.cn/large/4bda79adjw1en67ot7zhhg200900f01y.gif" border="0"> <strong>\u540e\u4e00\u7bc7\uff1a</strong><a href="http://blogread.cn/it/article/4603">Zookeeper\u5de5\u4f5c\u539f\u7406</a></div>\u000a			</div>\u000a			\u000a			<div class="comment">\u000a				<div class="tip"><a name="original">\u6587\u7ae0\u4fe1\u606f</a></div>\u000a				\u000a				<ul>\u000a					<li>\u4f5c\u8005\uff1a<a href="http://blogread.cn/it/channel/292">hoterran</a>&nbsp;&nbsp;&nbsp;&nbsp;\u6765\u6e90\uff1a <a href="http://www.hoterran.info/forecast-redis-memory" target="_blank">\u8fd0\u7ef4\u548c\u5f00\u53d1</a></li>\u000a					<li>\u6807\u7b7e\uff1a    <a href="http://blogread.cn/it/tags/redis">redis</a>    <a href="http://blogread.cn/it/tags/%E5%AE%B9%E9%87%8F">\u5bb9\u91cf</a></li>\u000a					<li>\u53d1\u5e03\u65f6\u95f4\uff1a2011-11-16 23:43:06</li>\u000a				</ul>\u000a			</div>\u000a\u000a						<div class="comment">\u000a				<div class="tip"><a name="comment">\u8bc4\u8bba</a></div>\u000a				<div class="commentbox">\u000a					<wb:comments url="http://blogread.cn/it/article/4601?f=wb" brandline="y" width="auto" appkey="3741373929" ></wb:comments>\u000a				</div>\u000a				<!--\u000a									<ol>\u6682\u65f6\u8fd8\u6ca1\u6709\u8bc4\u8bba\uff0c\u8981\u4e0d\u60a8\u5148\u6765\uff1f</ol>\u000a								 -->\u000a                \u000a            </div><!-- comment -->\u000a			\u000a            \u000a<!-- \u000a            <div class="commentadd">\u000a\u000a            	\u000a            	<form action="" method="post">\u000a            		<input type="hidden" name="idArticle" value="4601" />\u000a            	<div class="tip">\u5de9\u56fa\u77e5\u8bc6\uff0c\u4ece\u8bc4\u8bba\u5f00\u59cb\uff01</div>\u000a            	<div class="info">\u000a                	\u6635\u79f0(*)\uff1a<input name="name" type="text" id="name" value="" size="8">\u000a                    <br />\u90ae\u7bb1(*)\uff1a<input name="email" type="text" id="email" value="" size="20">\u000a                   \u4e2a\u4eba\u7f51\u7ad9\uff1a<input name="site" type="text" id="site" value="" size="30">\u000a                    <p>\uff08\u6635\u79f0\u3001\u90ae\u7bb1\u548c\u5185\u5bb9\u4e3a\u5fc5\u586b\uff0c\u90ae\u7bb1\u5c06\u88ab\u4fdd\u5bc6\uff01\uff09</p>\u000a                </div>\u000a                <div class="content">\u000a                	<textarea name="content" cols="70" rows="10" wrap="PHYSICAL"></textarea>\u000a                </div>\u000a                <div class="post">\u000a                	<input name="submit" type="submit" value="\u63d0\u4ea4\u8bc4\u8bba"> \u5de9\u56fa\u77e5\u8bc6\uff0c\u4ece\u8bc4\u8bba\u5f00\u59cb\uff01\u000a                </div>\u000a                </form>\u000a                \u000a            </div>!-- commentadd -->\u000a\u000a        </div><!-- main_left -->\u000a\u000a        <div class="main_right"> \u000a\u000a            \u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a            <div class="category" id="maybelike">\u000a                <div class="title">\u000a                    \u5efa\u8bae\u7ee7\u7eed\u5b66\u4e60\u000a                </div>\u000a                <div class="info">\u000a                    <ul>\u000a                    <!-- \u000a                    <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://weibo.com/ttarticle/p/show?id=2309403937099593202247" target="_blank"><font color="red">\u3010\u63a8\u8350\u3011\u6765\u4e86\uff0c\u7a0b\u5e8f\u5458\u4e13\u7528\u624b\u673a\u58f3\uff01</font></a></li>\u000a                     -->\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/4005?f=sr">redis\u6e90\u4ee3\u7801\u5206\u6790 -  persistence</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/5068?f=sr">Redis\u6d88\u606f\u961f\u5217\u7684\u82e5\u5e72\u5b9e\u73b0\u65b9\u5f0f</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/5984?f=sr">\u57fa\u4e8eRedis\u6784\u5efa\u7cfb\u7edf\u7684\u7ecf\u9a8c\u548c\u6559\u8bad</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/4298?f=sr">\u6d45\u8c08redis\u6570\u636e\u5e93\u7684\u952e\u503c\u8bbe\u8ba1</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/3478?f=sr">redis\u5728\u5927\u6570\u636e\u91cf\u4e0b\u7684\u538b\u6d4b\u8868\u73b0</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/1635?f=sr">redis \u8fd0\u7ef4\u5b9e\u9645\u7ecf\u9a8c\u7eaa\u5f55\u4e4b\u4e00</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/3939?f=sr">Redis\u4f5c\u8005\u8c08Redis\u5e94\u7528\u573a\u666f</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/3615?f=sr">Redis\u5185\u5b58\u5b58\u50a8\u7ed3\u6784\u5206\u6790</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/4075?f=sr">\u8ba9Redis\u4f7f\u7528TCMalloc\uff0c\u5b9e\u73b0\u9ad8\u6027\u80fdNOSql\u670d\u52a1\u5668</a></li>\u000a                                            <li><img src="http://blogread.cn/it/images/re.gif" border="0"><a href="http://blogread.cn/it/article/4112?f=sr">redis\u6e90\u4ee3\u7801\u5206\u6790 </a></li>\u000a                        \u000a                    </ul>\u000a                </div>\u000a            </div><!-- category -->\u000a\u000a\u000a            \u000a\u000a\u000a            <div class="category" id="rightHotArticle">\u000a                <div class="title">\u000a                    \u8fd13\u5929\u5341\u5927\u70ed\u6587\u000a                </div>\u000a                <div class="info">\u000a                    <ul>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[532] <a href="http://blogread.cn/it/article/7098?f=hot3">App\u7684\u6210\u672c</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[467] <a href="http://blogread.cn/it/article/7090?f=hot3">\u521d\u63a2\u5355\u70b9\u767b\u5f55 SSO</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[437] <a href="http://blogread.cn/it/article/7100?f=hot3">emacs\u6539\u53d8\u4eba\u751f</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[396] <a href="http://blogread.cn/it/article/7112?f=hot3">\u7a0b\u5e8f\u4eba\u751f\u7684\u56db\u4e2a\u8c61\u9650\u548c\u4e24\u6761\u4e3b\u7ebf</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[321] <a href="http://blogread.cn/it/article/7115?f=hot3">POST\u4e0eGET\u7684\u533a\u522b\u53caRESTful</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[279] <a href="http://blogread.cn/it/article/7073?f=hot3">\u4e00\u4e2a\u6545\u4e8b\u544a\u8bc9\u4f60\u6bd4\u7279\u5e01\u7684\u539f\u7406\u53ca\u8fd0\u4f5c\u673a\u5236</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[245] <a href="http://blogread.cn/it/article/7099?f=hot3">\u8403\u53d6(traits)\u7f16\u7a0b\u6280\u672f\u7684\u4ecb\u7ecd\u548c\u5e94\u7528</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[243] <a href="http://blogread.cn/it/article/7084?f=hot3">\u5982\u4f55\u4f7f\u75281M\u7684\u5185\u5b58\u6392\u5e8f100\u4e07\u4e2a8\u4f4d\u6570</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[227] <a href="http://blogread.cn/it/article/7114?f=hot3">&amp; * # \u8fd9\u4e09\u4e2a\u662f\u4ec0\u4e48\u7b26\u53f7\uff1f</a></li>\u000a                                                	<li>\u000a                            		<!-- <img src="http://blogread.cn/it/images/h_article.gif" border="0"> -->\u000a                            		<img src="http://ww1.sinaimg.cn/large/4bda79adjw1en67lqdi7wg200b00d02r.gif" border="0">\u000a                            		[217] <a href="http://blogread.cn/it/article/7108?f=hot3">redis\u8d85\u65f6\u95ee\u9898\u5206\u6790</a></li>\u000a                                        </ul>\u000a                </div>\u000a            </div><!-- category -->\u000a\u000a            <div class="category">\u000a                <div class="info" style="text-align:center">\u000a<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>\u000a<!-- it\u53f3\u4fa7 -->\u000a<ins class="adsbygoogle"\u000a     style="display:inline-block;width:250px;height:250px"\u000a     data-ad-client="ca-pub-2206192680127944"\u000a     data-ad-slot="5430998082"></ins>\u000a<script>\u000a(adsbygoogle = window.adsbygoogle || []).push({});\u000a</script>\u000a				</div>\u000a            </div><!-- category -->\u000a\u000a\u000a\u000a<div id="rightLowest" style="display: none">rightLowest </div>\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a<div class="category" id="lastdiv">\u000a\u000a</div>            \u000a        </div><!-- main_right --> \u000a\u000a    </div> \u000a\u000a            \u000a    <!--  && 0 != $flagSimilar -->\u000a    <div class="bottomarticle">\u000a            &copy; 2009 - 2016 by blogread.cn \u5fae\u535a\uff1a<a href="http://weibo.com/blogread" target="_blank">@IT\u6280\u672f\u535a\u5ba2\u5927\u5b66\u4e60</a>\u000a        \u000a        <br />\u000a        <br />\u000a		<a href="http://www.miibeian.gov.cn" target="_blank">\u4eacICP\u590715002552\u53f7</a>\u000a		<script language="javascript" type="text/javascript" src="http://js.users.51.la/2709512.js"></script>\u000a<noscript><a href="http://www.51.la/?2709512" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/2709512.asp" style="border:none" /></a></noscript>\u000a\u000a	<script src="http://s15.cnzz.com/stat.php?id=2320291&web_id=2320291" language="JavaScript"></script>\u000a	\u000a	\u000a	<script type="text/javascript">\u000avar gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");\u000adocument.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));\u000a</script>\u000a<script type="text/javascript">\u000atry {\u000avar pageTracker = _gat._getTracker("UA-6082292-6");\u000apageTracker._trackPageview();\u000a} catch(err) {}</script>\u000a\u000a<script type="text/javascript">\u000avar _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");\u000adocument.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F7d07e17bc73562efebd41b6ddcd5a499' type='text/javascript'%3E%3C/script%3E"));\u000a</script>\u000a\u000a    </div><!-- bottom -->\u000a\u000a		 \u000a</div><!-- body -->\u000a\u000a</body> \u000a</html>
p3
a.