(lp0
S'http://www.cnblogs.com/wuyuegb2312/archive/2013/04/09/3008320.html'
p1
aS'\xe3\x80\x8a\xe5\xa4\xa7\xe8\xaf\x9d\xe8\xae\xbe\xe8\xae\xa1\xe6\xa8\xa1\xe5\xbc\x8f\xe3\x80\x8bPython\xe7\x89\x88\xe4\xbb\xa3\xe7\xa0\x81\xe5\xae\x9e\xe7\x8e\xb0 - \xe4\xba\x94\xe5\xb2\xb3 - \xe5\x8d\x9a\xe5\xae\xa2\xe5\x9b\xad'
p2
aI0
aV\u000a<!DOCTYPE html>\u000a<html lang="zh-cn">\u000a<head>\u000a<meta charset="utf-8"/>\u000a<meta name="viewport" content="width=device-width, initial-scale=1" />\u000a<title>\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300bPython\u7248\u4ee3\u7801\u5b9e\u73b0 - \u4e94\u5cb3 - \u535a\u5ba2\u56ed</title>\u000a<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=03KQeESEmpLfzDqUo0NiWUg5Zd5aRam3JHBZTK05Wug1"/>\u000a<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/marvin2/bundle-marvin2-brown.css?v=XX5jb76xyBTDkuz4GHc9T_qGUR-1oOf-1_iv8KwHFqI1"/>\u000a<link type="text/css" rel="stylesheet" href="/blog/customcss/80216.css?v=P%2bF%2brShdabRuk5XZnxZBXgMxunw%3d"/>\u000a<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="/skins/marvin2/bundle-marvin2-brown-mobile.css?v=s1URr8GiI08eYZEcPvlBXiknGbF-P5zPjJI50ZC8c281"/>\u000a<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/wuyuegb2312/rss"/>\u000a<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/wuyuegb2312/rsd.xml"/>\u000a<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/wuyuegb2312/wlwmanifest.xml"/>\u000a<script src="//common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  \u000a<script type="text/javascript">var currentBlogApp = 'wuyuegb2312', cb_enable_mathjax=false;var isLogined=false;</script>\u000a<script src="/bundles/blog-common.js?v=hH1lCMV8WaIu271Nx7jPuv36TENW9-RsSxziLxUpjtc1" type="text/javascript"></script>\u000a</head>\u000a<body>\u000a<a name="top"></a>\u000a<div id="page_begin_html"></div><script>load_page_begin_html();</script>\u000a\u000a<div id="top">\u000a\u000a<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/wuyuegb2312/">Cyberspace_TechNode</a></h1>\u000a<p id="tagline">\u865a\u5fc3\u5b66\u4e60 \u4e13\u6ce8 \u8c41\u8fbe</p>\u000a</div>\u000a<div id="leftmenu">\u000a\u000a	\u000a<h3>\u5bfc\u822a</h3>\u000a<ul>\u000a	<li>\u000a		<a id="blog_nav_sitehome" href="http://www.cnblogs.com/">\u535a\u5ba2\u56ed</a>\u000a	<li><a id="blog_nav_myhome" href="http://www.cnblogs.com/wuyuegb2312/">\u9996\u9875</a></li>\u000a	<li><a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">\u65b0\u968f\u7b14</a></li>\u000a	<li>\u000a		<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/%E4%BA%94%E5%B2%B3">\u8054\u7cfb</a>\u000a	<li>\u000a		<a id="blog_nav_rss" href="http://www.cnblogs.com/wuyuegb2312/rss">\u8ba2\u9605</a><a id="blog_nav_rss_image" href="http://www.cnblogs.com/wuyuegb2312/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="\u8ba2\u9605" /></a>\u000a	<li>\u000a		<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">\u7ba1\u7406</a></li>\u000a</ul>\u000a\u000a	<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>\u000a	<div id="blog_stats">\u000a<h3>\u7edf\u8ba1</h3>\u000a<ul>\u000a	<li>\u000a		\u968f\u7b14 -\u000a		115\u000a	<li>\u000a		\u6587\u7ae0 -\u000a		38\u000a	<li>\u000a		\u8bc4\u8bba -\u000a		243\u000a	<li>\u000a		\u5f15\u7528 -\u000a		0\u000a	</li>\u000a</ul>\u000a</div>\u000a	\u000a<h3>\u516c\u544a</h3>\u000a	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>\u000a\u000a	<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>\u000a\u000a</div>\u000a<div id="main">\u000a	\u000a<div id="post_detail">\u000a	<div class="post">\u000a		<h2>\u000a			<a id="cb_post_title_url" href="http://www.cnblogs.com/wuyuegb2312/archive/2013/04/09/3008320.html">\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300bPython\u7248\u4ee3\u7801\u5b9e\u73b0</a>\u000a		</h2>\u000a		<div id="cnblogs_post_body"><p>\u3000\u3000\u4e0a\u4e00\u5468\u628a\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300b\u770b\u5b8c\u4e86\uff0c\u5bf9\u9762\u5411\u5bf9\u8c61\u6280\u672f\u6709\u4e86\u65b0\u7684\u7406\u89e3\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5728C\u4e0b\u5199\u4ee3\u7801\u6bd4\u8f83\u591a\u3001\u5076\u5c14\u4f1a\u7528\u5230\u4e00\u4e9b\u811a\u672c\u8bed\u8a00\u5199\u811a\u672c\u7684\u4eba\u6765\u8bf4\uff0c\u5f88\u662f\u5f00\u9614\u773c\u754c\u3002\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300b\u7684\u4ee3\u7801\u4f7f\u7528C#\u5199\u6210\u7684\uff0c\u800c\u5728\u672c\u4eba\u63a5\u89e6\u5230\u7684\u9762\u5411\u5bf9\u8c61\u8bed\u8a00\u4e2d\uff0c\u53ea\u5bf9C++\u548cPython\u8fd8\u7b97\u4e86\u89e3\uff0c\u4e3a\u4e86\u52a0\u6df1\u5bf9\u5404\u4e2a\u6a21\u5f0f\u7684\u7406\u89e3\uff0c\u6211\u5728\u7f51\u4e0a\u4e0b\u8f7d\u4e86\u4e00\u4e2aC++\u7248\u7684\u6e90\u4ee3\u7801\uff0c\u5e76\u6839\u636e\u81ea\u5df1\u7684\u7406\u89e3\u8fb9\u8bfb\u8fd9\u672c\u4e66\u8fb9\u52a8\u624b\u5b9e\u8df5C++\u6e90\u4ee3\u7801\uff0c\u540c\u65f6\u5c06\u5176\u6539\u5199\u6210\u4e86Python\u4ee3\u7801\uff0c\u7b97\u662f\u4e00\u7bad\u4e09\u96d5\u5427\u3002</p>\u000a<p>\u3000\u3000\u7531\u4e8e\u8fd9\u4e9b\u4ee3\u7801\u7684\u76ee\u7684\u662f\u5c55\u793a\u5404\u4e2a\u8bbe\u8ba1\u6a21\u5f0f\u800c\u975e\u5b8c\u6210\u4e00\u4e2a\u5177\u4f53\u7684\u590d\u6742\u4efb\u52a1\uff0c\u57fa\u4e8eC++\u7248\u672c\u6539\u5199\uff0c\u4f8b\u5b50\u7684\u53d6\u6750\u4e5f\u548c\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300b\u57fa\u672c\u76f8\u540c\uff0c\u518d\u52a0\u4e0a\u4e2a\u4eba\u6c34\u5e73\u6709\u9650\uff0c\u56e0\u6b64\u8fd9\u4e9bPython\u7248\u4ee3\u7801\u5199\u7684\u6bd4\u8f83\u7b80\u5355\uff0c\u867d\u7136\u80fd\u8dd1\u8d77\u6765\u662f\u4e0d\u5047\uff0c\u4e0d\u8fc7\u96be\u514d\u6709bug\uff0c\u800c\u4e14\u5b9e\u73b0\u4e5f\u4e0d\u4e00\u5b9a\u6700\u4f18\uff0cC++\u7684\u5473\u9053\u6bd4\u8f83\u6d53\u800c\u4e0d\u591fpythonic\uff0c\u8fd8\u8bf7\u9ad8\u624b\u5305\u5bb9\u6307\u6b63\u3002\u4e0d\u8fc7\u6211\u8fd8\u662f\u5c3d\u91cf\u628a\u6216\u591a\u6216\u5c11\u6709\u4e9bpythonic\u7684\u4e1c\u897f\u653e\u5728\u6bcf\u4e2a\u6a21\u5f0f\u7684&ldquo;\u4ee3\u7801\u7279\u70b9&rdquo;\u90e8\u5206\u8fdb\u884c\u5c55\u793a\uff0c\u800c\u8fd9\u4e2a&ldquo;\u4ee3\u7801\u7279\u70b9&rdquo;\u91cc\u4e5f\u4e0d\u4ec5\u4ec5\u662fpythonic\u7684\u4e1c\u897f\u3002</p>\u000a<p>\u3000\u3000\u4f7f\u7528Python\u7248\u672c\u4e3a2.6\u3002</p>\u000a<p>\u3000\u3000\u914d\u56fe\u540c\u6837\u6458\u81ea\u300a\u5927\u8bdd\u8bbe\u8ba1\u6a21\u5f0f\u300b\uff0c\u56e0\u6b64\u662fC#\u98ce\u683c\u7684UML\u7c7b\u56fe\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u6392\u7248\u5df2\u7ecf\u7f29\u5c0f\u4e86\u3002</p>\u000a<p>\u3000\u3000</p>\u000a<p><strong>\u4e00\u3001\u7b80\u5355\u5de5\u5382\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch1.%e7%ae%80%e5%8d%95%e5%b7%a5%e5%8e%82.png" alt="" width="514" height="240" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5de5\u5382\u6839\u636e\u6761\u4ef6\u4ea7\u751f\u4e0d\u540c\u529f\u80fd\u7684\u7c7b\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u56db\u5219\u8fd0\u7b97\u8ba1\u7b97\u5668\uff0c\u6839\u636e\u7528\u6237\u7684\u8f93\u5165\u4ea7\u751f\u76f8\u5e94\u7684\u8fd0\u7b97\u7c7b\uff0c\u7528\u8fd9\u4e2a\u8fd0\u7b97\u7c7b\u5904\u7406\u5177\u4f53\u7684\u8fd0\u7b97\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1aC/C++\u4e2d\u7684switch...case...\u5206\u652f\u4f7f\u7528\u5b57\u5178\u7684\u65b9\u5f0f\u4ee3\u66ff\u3002</p>\u000a<p>\u3000\u3000\u3000\u3000\u3000\u4f7f\u7528\u5f02\u5e38\u673a\u5236\u5bf9\u9664\u6570\u4e3a0\u7684\u60c5\u51b5\u8fdb\u884c\u5904\u7406\u3002</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('7e6c737d-2062-4abb-967d-2ff3479efb1f')"><img id="code_img_closed_7e6c737d-2062-4abb-967d-2ff3479efb1f" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_7e6c737d-2062-4abb-967d-2ff3479efb1f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7e6c737d-2062-4abb-967d-2ff3479efb1f',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u7b80\u5355\u5de5\u5382\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_7e6c737d-2062-4abb-967d-2ff3479efb1f" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Operation:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationAdd(Operation):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">return</span> self.op1+<span style="color: #000000;">self.op2\u000a\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationSub(Operation):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">return</span> self.op1-<span style="color: #000000;">self.op2\u000a\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationMul(Operation):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">return</span> self.op1*<span style="color: #000000;">self.op2\u000a\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationDiv(Operation):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">try</span><span style="color: #000000;">:\u000a            result </span>= self.op1/<span style="color: #000000;">self.op2\u000a            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> result\u000a        </span><span style="color: #0000ff;">except</span><span style="color: #000000;">:\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">error:divided by zero.</span><span style="color: #800000;">"</span>\u000a            <span style="color: #0000ff;">return</span><span style="color: #000000;"> 0\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationUndef(Operation):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Undefine operation.</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">return</span><span style="color: #000000;"> 0\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> OperationFactory:\u000a    operation </span>=<span style="color: #000000;"> {}\u000a    operation[</span><span style="color: #800000;">"</span><span style="color: #800000;">+</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> OperationAdd();\u000a    operation[</span><span style="color: #800000;">"</span><span style="color: #800000;">-</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> OperationSub();\u000a    operation[</span><span style="color: #800000;">"</span><span style="color: #800000;">*</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> OperationMul();\u000a    operation[</span><span style="color: #800000;">"</span><span style="color: #800000;">/</span><span style="color: #800000;">"</span>] =<span style="color: #000000;"> OperationDiv();\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> createOperation(self,ch):        \u000a        </span><span style="color: #0000ff;">if</span> ch <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.operation:\u000a            op </span>=<span style="color: #000000;"> self.operation[ch]\u000a        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            op </span>=<span style="color: #000000;"> OperationUndef()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> op\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    op </span>= raw_input(<span style="color: #800000;">"</span><span style="color: #800000;">operator: </span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    opa </span>= input(<span style="color: #800000;">"</span><span style="color: #800000;">a: </span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    opb </span>= input(<span style="color: #800000;">"</span><span style="color: #800000;">b: </span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    factory </span>=<span style="color: #000000;"> OperationFactory()\u000a    cal </span>=<span style="color: #000000;"> factory.createOperation(op)\u000a    cal.op1 </span>=<span style="color: #000000;"> opa\u000a    cal.op2 </span>=<span style="color: #000000;"> opb\u000a    </span><span style="color: #0000ff;">print</span> cal.GetResult()</pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u3001\u7b56\u7565\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch2.%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f.png" alt="" width="478" height="225" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5b9a\u4e49\u7b97\u6cd5\u5bb6\u65cf\u5e76\u4e14\u5206\u522b\u5c01\u88c5\uff0c\u5b83\u4eec\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u66ff\u6362\u800c\u4e0d\u5f71\u54cd\u5ba2\u6237\u7aef\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u5546\u573a\u6536\u94f6\u8f6f\u4ef6\uff0c\u9700\u8981\u6839\u636e\u4e0d\u540c\u7684\u9500\u552e\u7b56\u7565\u65b9\u5f0f\u8fdb\u884c\u6536\u8d39</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u4e0d\u540c\u4e8e\u540c\u4f8b1\uff0c\u8fd9\u91cc\u4f7f\u7528\u5b57\u5178\u662f\u4e3a\u4e86\u907f\u514d\u5173\u952e\u5b57\u4e0d\u5728\u5b57\u5178\u5bfc\u81f4bug\u7684\u9677\u9631\u3002</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('068e7718-c755-42f2-b5e6-4c85ad8c635f')"><img id="code_img_closed_068e7718-c755-42f2-b5e6-4c85ad8c635f" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_068e7718-c755-42f2-b5e6-4c85ad8c635f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('068e7718-c755-42f2-b5e6-4c85ad8c635f',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u7b56\u7565\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_068e7718-c755-42f2-b5e6-4c85ad8c635f" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> CashSuper:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> AcceptCash(self,money):\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> 0\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> CashNormal(CashSuper):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> AcceptCash(self,money):\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> money\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> CashRebate(CashSuper):\u000a    discount </span>=<span style="color: #000000;"> 0\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,ds):\u000a        self.discount </span>=<span style="color: #000000;"> ds\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> AcceptCash(self,money):\u000a        </span><span style="color: #0000ff;">return</span> money *<span style="color: #000000;"> self.discount\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> CashReturn(CashSuper):\u000a    total </span>=<span style="color: #000000;"> 0;\u000a    ret </span>=<span style="color: #000000;"> 0;\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,t,r):\u000a        self.total </span>=<span style="color: #000000;"> t\u000a        self.ret </span>=<span style="color: #000000;"> r\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> AcceptCash(self,money):\u000a        </span><span style="color: #0000ff;">if</span> (money&gt;=<span style="color: #000000;">self.total):\u000a            </span><span style="color: #0000ff;">return</span> money -<span style="color: #000000;"> self.ret\u000a        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> money\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> CashContext:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,csuper):\u000a        self.cs </span>=<span style="color: #000000;"> csuper\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetResult(self,money):\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> self.cs.AcceptCash(money)\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    money </span>= input(<span style="color: #800000;">"</span><span style="color: #800000;">money:</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    strategy </span>=<span style="color: #000000;"> {}\u000a    strategy[</span>1] =<span style="color: #000000;"> CashContext(CashNormal())\u000a    strategy[</span>2] = CashContext(CashRebate(0.8<span style="color: #000000;">))\u000a    strategy[</span>3] = CashContext(CashReturn(300,100<span style="color: #000000;">))\u000a    ctype </span>= input(<span style="color: #800000;">"</span><span style="color: #800000;">type:[1]for normal,[2]for 80% discount [3]for 300 -100.</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    </span><span style="color: #0000ff;">if</span> ctype <span style="color: #0000ff;">in</span><span style="color: #000000;"> strategy:\u000a        cc </span>=<span style="color: #000000;"> strategy[ctype]\u000a    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Undefine type.Use normal mode.</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        cc </span>= strategy[1<span style="color: #000000;">]\u000a    </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">you will pay:%d</span><span style="color: #800000;">"</span> %(cc.GetResult(money))</pre>\u000a</div>\u000a</div>\u000a<p><strong>\u4e09\u3001\u88c5\u9970\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch3.%e8%a3%85%e9%a5%b0%e6%a8%a1%e5%bc%8f.png" alt="" width="554" height="385" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u52a8\u6001\u5730\u4e3a\u5bf9\u8c61\u589e\u52a0\u989d\u5916\u7684\u804c\u8d23</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u5c55\u793a\u4e00\u4e2a\u4eba\u4e00\u4ef6\u4e00\u4ef6\u7a7f\u8863\u670d\u7684\u8fc7\u7a0b\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('b34bb03a-4ee7-49e7-bddb-1d6ae18d8d2c')"><img id="code_img_closed_b34bb03a-4ee7-49e7-bddb-1d6ae18d8d2c" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b34bb03a-4ee7-49e7-bddb-1d6ae18d8d2c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b34bb03a-4ee7-49e7-bddb-1d6ae18d8d2c',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u88c5\u9970\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_b34bb03a-4ee7-49e7-bddb-1d6ae18d8d2c" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,tname):\u000a        self.name </span>=<span style="color: #000000;"> tname\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Show(self):\u000a       </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">dressed %s</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Finery(Person):\u000a    componet </span>=<span style="color: #000000;"> None\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Decorate(self,ct):\u000a        self.componet </span>=<span style="color: #000000;"> ct\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Show(self):\u000a    </span><span style="color: #0000ff;">if</span>(self.componet!=<span style="color: #000000;">None):\u000a        self.componet.Show()\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TShirts(Finery):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Show(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Big T-shirt </span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        self.componet.Show()\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> BigTrouser(Finery):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Show(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Big Trouser </span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        self.componet.Show()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    p </span>= Person(<span style="color: #800000;">"</span><span style="color: #800000;">somebody</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    bt </span>=<span style="color: #000000;"> BigTrouser()\u000a    ts </span>=<span style="color: #000000;"> TShirts()\u000a    bt.Decorate(p)\u000a    ts.Decorate(bt)\u000a    ts.Show()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u56db\u3001\u4ee3\u7406\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch.4%e4%bb%a3%e7%90%86%e6%a8%a1%e5%bc%8f.png" alt="" width="543" height="286" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u4e3a\u5176\u4ed6\u5bf9\u8c61\u63d0\u4f9b\u4e00\u79cd\u4ee3\u7406\u4ee5\u63a7\u5236\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u540c\u6a21\u5f0f\u7279\u70b9\u63cf\u8ff0\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('1535d2b3-2e62-4ad9-a910-eb9991003b92')"><img id="code_img_closed_1535d2b3-2e62-4ad9-a910-eb9991003b92" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_1535d2b3-2e62-4ad9-a910-eb9991003b92" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1535d2b3-2e62-4ad9-a910-eb9991003b92',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u4ee3\u7406\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_1535d2b3-2e62-4ad9-a910-eb9991003b92" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Interface :\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Request(self):\u000a    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> 0\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> RealSubject(Interface): \u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Request(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Real request.</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Proxy(Interface):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Request(self):\u000a        self.real </span>=<span style="color: #000000;"> RealSubject()\u000a        self.real.Request()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    p </span>=<span style="color: #000000;"> Proxy()\u000a    p.Request()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u4e94\u3001\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch5.%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f.png" alt="" width="492" height="289" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u8ba9\u5b50\u7c7b\u51b3\u5b9a\u5b9e\u4f8b\u5316\u54ea\u4e00\u4e2a\u7c7b\u3002\u8fd9\u4f7f\u5f97\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u5316\u5ef6\u8fdf\u5230\u5176\u5b50\u7c7b\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u57fa\u7c7b\u96f7\u950b\u7c7b\uff0c\u6d3e\u751f\u51fa\u5b66\u751f\u7c7b\u548c\u5fd7\u613f\u8005\u7c7b\uff0c\u7531\u8fd9\u4e24\u79cd\u5b50\u7c7b\u5b8c\u6210&ldquo;\u5b66\u96f7\u950b&rdquo;\u5de5\u4f5c\u3002\u5b50\u7c7b\u7684\u521b\u5efa\u7531\u96f7\u950b\u5de5\u5382\u7684\u5bf9\u5e94\u7684\u5b50\u7c7b\u5b8c\u6210\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('a00d3914-e3e7-4659-a454-723fdc5a1a5c')"><img id="code_img_closed_a00d3914-e3e7-4659-a454-723fdc5a1a5c" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_a00d3914-e3e7-4659-a454-723fdc5a1a5c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a00d3914-e3e7-4659-a454-723fdc5a1a5c',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u5de5\u5382\u65b9\u6cd5\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_a00d3914-e3e7-4659-a454-723fdc5a1a5c" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> LeiFeng:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Sweep(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">LeiFeng sweep</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Student(LeiFeng):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Sweep(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Student sweep</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Volenter(LeiFeng):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Sweep(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Volenter sweep</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> LeiFengFactory:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateLeiFeng(self):\u000a        temp </span>=<span style="color: #000000;"> LeiFeng()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> StudentFactory(LeiFengFactory):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateLeiFeng(self):\u000a        temp </span>=<span style="color: #000000;"> Student()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> VolenterFactory(LeiFengFactory):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateLeiFeng(self):\u000a        temp </span>=<span style="color: #000000;"> Volenter()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    sf </span>=<span style="color: #000000;"> StudentFactory()\u000a    s</span>=<span style="color: #000000;">sf.CreateLeiFeng()\u000a    s.Sweep()\u000a    sdf </span>=<span style="color: #000000;"> VolenterFactory()\u000a    sd</span>=<span style="color: #000000;">sdf.CreateLeiFeng()\u000a    sd.Sweep()</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p>&nbsp;<strong>\u516d\u3001\u539f\u578b\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch6.%e5%8e%9f%e5%9e%8b%e6%a8%a1%e5%bc%8f.png" alt="" width="430" height="232" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u7528\u539f\u578b\u5b9e\u4f8b\u6307\u5b9a\u521b\u5efa\u5bf9\u8c61\u7684\u79cd\u7c7b\uff0c\u5e76\u4e14\u901a\u8fc7\u62f7\u8d1d\u8fd9\u4e9b\u539f\u578b\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u4ece\u7b80\u5386\u539f\u578b\uff0c\u751f\u6210\u65b0\u7684\u7b80\u5386</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u7b80\u5386\u7c7bResume\u63d0\u4f9b\u7684Clone()\u65b9\u6cd5\u5176\u5b9e\u5e76\u4e0d\u662f\u771f\u6b63\u7684Clone\uff0c\u53ea\u662f\u4e3a\u5df2\u5b58\u5728\u5bf9\u8c61\u589e\u52a0\u4e86\u4e00\u6b21\u5f15\u7528\u3002</p>\u000a<p>\u3000\u3000\u3000\u3000\u3000Python\u4e3a\u5bf9\u8c61\u63d0\u4f9b\u7684copy\u6a21\u5757\u4e2d\u7684copy\u65b9\u6cd5\u548cdeepcopy\u65b9\u6cd5\u5df2\u7ecf\u5b9e\u73b0\u4e86\u539f\u578b\u6a21\u5f0f\uff0c\u4f46\u7531\u4e8e\u4f8b\u5b50\u7684\u5c42\u6b21\u8f83\u6d45\uff0c\u4e8c\u8005\u770b\u4e0d\u51fa\u533a\u522b\u3002</p>\u000a<p>\u3000\u3000\u3000\u3000</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('c8843274-6827-44bc-a943-98b15dc8e9fa')"><img id="code_img_closed_c8843274-6827-44bc-a943-98b15dc8e9fa" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c8843274-6827-44bc-a943-98b15dc8e9fa" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c8843274-6827-44bc-a943-98b15dc8e9fa',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u539f\u578b\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_c8843274-6827-44bc-a943-98b15dc8e9fa" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> copy\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> WorkExp:\u000a    place</span>=<span style="color: #800000;">""</span><span style="color: #000000;">\u000a    year</span>=<span style="color: #000000;">0\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Resume:\u000a    name </span>= <span style="color: #800000;">''</span><span style="color: #000000;">\u000a    age </span>=<span style="color: #000000;"> 0\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,n):\u000a        self.name </span>=<span style="color: #000000;"> n\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetAge(self,a):\u000a        self.age </span>=<span style="color: #000000;"> a\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetWorkExp(self,p,y):\u000a        self.place </span>=<span style="color: #000000;"> p\u000a        self.year </span>=<span style="color: #000000;"> y\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Display(self):\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> self.age\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> self.place\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> self.year\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Clone(self):\u000a    </span><span style="color: #008000;">#</span><span style="color: #008000;">\u5b9e\u9645\u4e0d\u662f&ldquo;\u514b\u9686&rdquo;\uff0c\u53ea\u662f\u8fd4\u56de\u4e86\u81ea\u8eab</span>\u000a        <span style="color: #0000ff;">return</span><span style="color: #000000;"> self\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    a </span>= Resume(<span style="color: #800000;">"</span><span style="color: #800000;">a</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    b </span>=<span style="color: #000000;"> a.Clone()\u000a    c </span>=<span style="color: #000000;"> copy.copy(a)\u000a    d </span>=<span style="color: #000000;"> copy.deepcopy(a)\u000a    a.SetAge(</span>7<span style="color: #000000;">)\u000a    b.SetAge(</span>12<span style="color: #000000;">)\u000a    c.SetAge(</span>15<span style="color: #000000;">)\u000a    d.SetAge(</span>18<span style="color: #000000;">)\u000a    a.SetWorkExp(</span><span style="color: #800000;">"</span><span style="color: #800000;">PrimarySchool</span><span style="color: #800000;">"</span>,1996<span style="color: #000000;">)\u000a    b.SetWorkExp(</span><span style="color: #800000;">"</span><span style="color: #800000;">MidSchool</span><span style="color: #800000;">"</span>,2001<span style="color: #000000;">)\u000a    c.SetWorkExp(</span><span style="color: #800000;">"</span><span style="color: #800000;">HighSchool</span><span style="color: #800000;">"</span>,2004<span style="color: #000000;">)\u000a    d.SetWorkExp(</span><span style="color: #800000;">"</span><span style="color: #800000;">University</span><span style="color: #800000;">"</span>,2007<span style="color: #000000;">)\u000a    a.Display()\u000a    b.Display()\u000a    c.Display()\u000a    d.Display()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u4e03\u3001\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f</strong></p>\u000a<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch7.%e6%a8%a1%e6%9d%bf%e6%96%b9%e6%b3%95%e6%a8%a1%e5%bc%8f.png" alt="" width="387" height="170" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5b9a\u4e49\u4e00\u4e2a\u64cd\u4f5c\u4e2d\u7684\u7b97\u6cd5\u9aa8\u67b6\uff0c\u5c06\u4e00\u4e9b\u6b65\u9aa4\u5ef6\u8fdf\u81f3\u5b50\u7c7b\u4e2d\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u8003\u8bd5\u65f6\u4f7f\u7528\u540c\u4e00\u79cd\u8003\u5377\uff08\u7236\u7c7b\uff09\uff0c\u4e0d\u540c\u5b66\u751f\u4e0a\u4ea4\u81ea\u5df1\u586b\u5199\u7684\u8bd5\u5377\uff08\u5b50\u7c7b\u65b9\u6cd5\u7684\u5b9e\u73b0\uff09</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('7f7b3d2c-c8e3-4e1a-86f8-3b943571fc8e')"><img id="code_img_closed_7f7b3d2c-c8e3-4e1a-86f8-3b943571fc8e" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_7f7b3d2c-c8e3-4e1a-86f8-3b943571fc8e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7f7b3d2c-c8e3-4e1a-86f8-3b943571fc8e',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u6a21\u677f\u65b9\u6cd5\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_7f7b3d2c-c8e3-4e1a-86f8-3b943571fc8e" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestPaper:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> TestQuestion1(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Test1:A. B. C. D.</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">(%s)</span><span style="color: #800000;">"</span> %<span style="color: #000000;">self.Answer1()\u000a\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> TestQuestion2(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Test1:A. B. C. D.</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">(%s)</span><span style="color: #800000;">"</span> %<span style="color: #000000;">self.Answer2()\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer1(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">""</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer2(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">""</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> TestPaperA(TestPaper):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer1(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">"</span><span style="color: #800000;">B</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer2(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">"</span><span style="color: #800000;">C</span><span style="color: #800000;">"</span><span style="color: #000000;">;\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> TestPaperB(TestPaper):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer1(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">"</span><span style="color: #800000;">D</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Answer2(self):\u000a        </span><span style="color: #0000ff;">return</span> <span style="color: #800000;">"</span><span style="color: #800000;">D</span><span style="color: #800000;">"</span><span style="color: #000000;">;\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    s1 </span>=<span style="color: #000000;"> TestPaperA()\u000a    s2 </span>=<span style="color: #000000;"> TestPaperB()\u000a    </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">student 1</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a    s1.TestQuestion1()\u000a    s1.TestQuestion2()\u000a    </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">student 2</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a    s2.TestQuestion1()\u000a    s2.TestQuestion2()</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p>&nbsp;<strong>\u516b\u3001\u5916\u89c2\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch8.%e5%a4%96%e8%a7%82%e6%a8%a1%e5%bc%8f.png" alt="" width="512" height="313" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u4e3a\u4e00\u7ec4\u8c03\u7528\u63d0\u4f9b\u4e00\u81f4\u7684\u63a5\u53e3\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u63a5\u53e3\u5c06\u51e0\u79cd\u8c03\u7528\u5206\u522b\u7ec4\u5408\u6210\u4e3a\u4e24\u7ec4\uff0c\u7528\u6237\u901a\u8fc7\u63a5\u53e3\u8c03\u7528\u5176\u4e2d\u7684\u4e00\u7ec4\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('117956cc-5a98-40c6-9aa6-654a4e7bfc11')"><img id="code_img_closed_117956cc-5a98-40c6-9aa6-654a4e7bfc11" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_117956cc-5a98-40c6-9aa6-654a4e7bfc11" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('117956cc-5a98-40c6-9aa6-654a4e7bfc11',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u5916\u89c2\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_117956cc-5a98-40c6-9aa6-654a4e7bfc11" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> SubSystemOne:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodOne(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">SubSysOne</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> SubSystemTwo:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodTwo(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">SubSysTwo</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> SubSystemThree:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodThree(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">SubSysThree</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> SubSystemFour:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodFour(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">SubSysFour</span><span style="color: #800000;">"</span>\u000a\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Facade:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.one </span>=<span style="color: #000000;"> SubSystemOne()\u000a        self.two </span>=<span style="color: #000000;"> SubSystemTwo()\u000a        self.three </span>=<span style="color: #000000;"> SubSystemThree()\u000a        self.four </span>=<span style="color: #000000;"> SubSystemFour()\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodA(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">MethodA</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        self.one.MethodOne()\u000a        self.two.MethodTwo()\u000a        self.four.MethodFour()\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MethodB(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">MethodB</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        self.two.MethodTwo()\u000a        self.three.MethodThree()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    facade </span>=<span style="color: #000000;"> Facade()\u000a    facade.MethodA()\u000a    facade.MethodB()</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e5d\u3001\u5efa\u9020\u8005\u6a21\u5f0f</strong></p>\u000a<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch9.%e5%bb%ba%e9%80%a0%e8%80%85%e6%a8%a1%e5%bc%8f.png" alt="" width="392" height="280" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5c06\u4e00\u4e2a\u590d\u6742\u5bf9\u8c61\u7684\u6784\u5efa(Director)\u4e0e\u5b83\u7684\u8868\u793a(Builder)\u5206\u79bb\uff0c\u4f7f\u5f97\u540c\u6837\u7684\u6784\u5efa\u8fc7\u7a0b\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u8868\u793a(ConcreteBuilder)\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a&ldquo;\u753b&rdquo;\u51fa\u4e00\u4e2a\u56db\u80a2\u5065\u5168\uff08\u5934\u8eab\u624b\u817f\uff09\u7684\u5c0f\u4eba</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('1f55bf0b-5e25-46e9-8563-b4325b373288')"><img id="code_img_closed_1f55bf0b-5e25-46e9-8563-b4325b373288" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_1f55bf0b-5e25-46e9-8563-b4325b373288" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1f55bf0b-5e25-46e9-8563-b4325b373288',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u5efa\u9020\u8005\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_1f55bf0b-5e25-46e9-8563-b4325b373288" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHead(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHand(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateBody(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateFoot(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> ThinPerson(Person):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHead(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thin head</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHand(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thin hand</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateBody(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thin body</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateFoot(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thin foot</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> ThickPerson(Person):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHead(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thick head</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateHand(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thick hand</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateBody(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thick body</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateFoot(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">thick foot</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Director:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,temp):\u000a        self.p </span>=<span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Create(self):\u000a        self.p.CreateHead()\u000a        self.p.CreateBody()\u000a        self.p.CreateHand()\u000a        self.p.CreateFoot()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    p </span>=<span style="color: #000000;"> ThickPerson()\u000a    d </span>=<span style="color: #000000;"> Director(p)\u000a    d.Create()</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u5341\u3001\u89c2\u5bdf\u8005\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch10.%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8f.png" alt="" width="510" height="344" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5b9a\u4e49\u4e86\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u8ba9\u591a\u4e2a\u89c2\u5bdf\u5bf9\u8c61\u540c\u65f6\u76d1\u542c\u4e00\u4e2a\u4e3b\u9898\u5bf9\u8c61\uff0c\u5f53\u4e3b\u9898\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u4f1a\u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u516c\u53f8\u91cc\u6709\u4e24\u79cd\u4e0a\u73ed\u65f6\u8d81\u8001\u677f\u4e0d\u5728\u65f6\u5077\u61d2\u7684\u5458\u5de5\uff1a\u770bNBA\u7684\u548c\u770b\u80a1\u7968\u884c\u60c5\u7684\uff0c\u5e76\u4e14\u4e8b\u5148\u8ba9\u8001\u677f\u79d8\u4e66\u5f53\u8001\u677f\u51fa\u73b0\u65f6\u901a\u77e5\u4ed6\u4eec\u7ee7\u7eed\u505a\u624b\u5934\u4e0a\u7684\u5de5\u4f5c\u3002</p>\u000a<p>\u7a0b\u5e8f\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('3f4f6c9a-211d-487d-8e98-f50fd3b8de53')"><img id="code_img_closed_3f4f6c9a-211d-487d-8e98-f50fd3b8de53" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_3f4f6c9a-211d-487d-8e98-f50fd3b8de53" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3f4f6c9a-211d-487d-8e98-f50fd3b8de53',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u89c2\u5bdf\u8005\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_3f4f6c9a-211d-487d-8e98-f50fd3b8de53" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Observer:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,strname,strsub):\u000a        self.name </span>=<span style="color: #000000;"> strname\u000a        self.sub </span>=<span style="color: #000000;"> strsub\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Update(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> StockObserver(Observer):\u000a    </span><span style="color: #008000;">#</span><span style="color: #008000;">no need to rewrite __init__()</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Update(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">%s:%s,stop watching Stock and go on work!</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name,self.sub.action)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> NBAObserver(Observer):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Update(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">%s:%s,stop watching NBA and go on work!</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name,self.sub.action)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> SecretaryBase:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.observers </span>=<span style="color: #000000;"> []\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Attach(self,new_observer):\u000a        </span><span style="color: #0000ff;">pass</span> \u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Notify(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Secretary(SecretaryBase):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Attach(self,new_observer):\u000a        self.observers.append(new_observer)\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Notify(self):\u000a        </span><span style="color: #0000ff;">for</span> p <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.observers:\u000a            p.Update()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    p </span>=<span style="color: #000000;"> Secretary()\u000a    s1 </span>= StockObserver(<span style="color: #800000;">"</span><span style="color: #800000;">xh</span><span style="color: #800000;">"</span><span style="color: #000000;">,p)\u000a    s2 </span>= NBAObserver(<span style="color: #800000;">"</span><span style="color: #800000;">wyt</span><span style="color: #800000;">"</span><span style="color: #000000;">,p)\u000a    p.Attach(s1);\u000a    p.Attach(s2);\u000a    p.action </span>= <span style="color: #800000;">"</span><span style="color: #800000;">WARNING:BOSS </span><span style="color: #800000;">"</span><span style="color: #000000;">;\u000a    p.Notify()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u5341\u4e00\u3001\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch11.%e6%8a%bd%e8%b1%a1%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f.png" alt="" width="475" height="381" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u63d0\u4f9b\u4e00\u4e2a\u521b\u5efa\u4e00\u7cfb\u5217\u76f8\u5173\u6216\u76f8\u4e92\u4f9d\u8d56\u5bf9\u8c61\u7684\u63a5\u53e3\uff0c\u800c\u65e0\u9700\u6307\u5b9a\u5b83\u4eec\u7684\u7c7b\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u63d0\u4f9b\u5bf9\u4e0d\u540c\u7684\u6570\u636e\u5e93\u8bbf\u95ee\u7684\u652f\u6301\u3002</p>\u000a<p>\u3000\u3000\u3000\u3000\u3000IUser\u548cIDepartment\u662f\u4e24\u79cd\u4e0d\u540c\u7684\u62bd\u8c61\u4ea7\u54c1\uff0c\u5b83\u4eec\u90fd\u6709Access\u548cSQL Server\u8fd9\u4e24\u79cd\u4e0d\u540c\u7684\u5b9e\u73b0\uff1bIFactory\u662f\u4ea7\u751fIUser\u548cIDepartment\u7684\u62bd\u8c61\u5de5\u5382\uff0c\u6839\u636e\u5177\u4f53\u5b9e\u73b0\uff08AccessFactory\u548cSqlFactory\uff09\u4ea7\u751f\u5bf9\u5e94\u7684\u5177\u4f53\u7684\u5bf9\u8c61\uff08CAccessUser\u4e0eCAccessDepartment\uff0c\u6216\u8005CSqlUser\u4e0eCSqlDepartment\uff09\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('5a72dea8-8d5d-428f-af3d-6c311ca557dd')"><img id="code_img_closed_5a72dea8-8d5d-428f-af3d-6c311ca557dd" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_5a72dea8-8d5d-428f-af3d-6c311ca557dd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5a72dea8-8d5d-428f-af3d-6c311ca557dd',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_5a72dea8-8d5d-428f-af3d-6c311ca557dd" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> IUser:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetUser(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertUser(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> IDepartment:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetDepartment(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertDepartment(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> CAccessUser(IUser):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetUser(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Access GetUser</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertUser(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Access InsertUser</span><span style="color: #800000;">"</span>\u000a\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> CAccessDepartment(IDepartment):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetDepartment(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Access GetDepartment</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertDepartment(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Access InsertDepartment</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> CSqlUser(IUser):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetUser(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Sql GetUser</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertUser(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Sql InsertUser</span><span style="color: #800000;">"</span>\u000a\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> CSqlDepartment(IDepartment):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetDepartment(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Sql GetDepartment</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> InsertDepartment(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Sql InsertDepartment</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> IFactory:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateUser(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateDepartment(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> AccessFactory(IFactory):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateUser(self):\u000a        temp</span>=<span style="color: #000000;">CAccessUser()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateDepartment(self):\u000a        temp </span>=<span style="color: #000000;"> CAccessDepartment()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> SqlFactory(IFactory):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateUser(self):\u000a        temp </span>=<span style="color: #000000;"> CSqlUser()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateDepartment(self):\u000a        temp </span>=<span style="color: #000000;"> CSqlDepartment()\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    factory </span>=<span style="color: #000000;"> SqlFactory()\u000a    user</span>=<span style="color: #000000;">factory.CreateUser()\u000a    depart</span>=<span style="color: #000000;">factory.CreateDepartment()\u000a    user.GetUser()\u000a    depart.GetDepartment()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u5341\u4e8c\u3001\u72b6\u6001\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch12.%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8f.png" alt="" width="461" height="306" /></strong></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5f53\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u5728\u72b6\u6001\u6539\u53d8\u65f6\u5141\u8bb8\u6539\u53d8\u5176\u884c\u4e3a\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u770b\u8d77\u6765\u50cf\u662f\u6539\u53d8\u4e86\u5176\u7c7b\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u63cf\u8ff0\u4e00\u4e2a\u7a0b\u5e8f\u5458\u7684\u5de5\u4f5c\u72b6\u6001\uff0c\u5f53\u9700\u8981\u6539\u53d8\u72b6\u6001\u65f6\u53d1\u751f\u6539\u53d8\uff0c\u4e0d\u540c\u72b6\u6001\u4e0b\u7684\u65b9\u6cd5\u5b9e\u73b0\u4e0d\u540c</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('0d6bd26b-97a7-4165-8b0b-663bca3a938a')"><img id="code_img_closed_0d6bd26b-97a7-4165-8b0b-663bca3a938a" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_0d6bd26b-97a7-4165-8b0b-663bca3a938a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0d6bd26b-97a7-4165-8b0b-663bca3a938a',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u72b6\u6001\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_0d6bd26b-97a7-4165-8b0b-663bca3a938a" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> State:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> WirteProgram(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Work:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.hour </span>= 9<span style="color: #000000;">\u000a        self.current </span>=<span style="color: #000000;"> ForenoonState()\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetState(self,temp):\u000a        self.current </span>=<span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> WriteProgram(self):\u000a        self.current.WriteProgram(self)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> NoonState(State):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> WriteProgram(self,w):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">noon working</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">if</span> (w.hour&lt;13<span style="color: #000000;">):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">fun.</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">need to rest.</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> ForenoonState(State):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> WriteProgram(self,w):\u000a        </span><span style="color: #0000ff;">if</span> (w.hour&lt;12<span style="color: #000000;">):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">morning working</span><span style="color: #800000;">"</span>\u000a            <span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">energetic</span><span style="color: #800000;">"</span>\u000a        <span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            w.SetState(NoonState())        \u000a            w.WriteProgram()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    mywork </span>=<span style="color: #000000;"> Work()\u000a    mywork.hour </span>= 9<span style="color: #000000;">\u000a    mywork.WriteProgram()\u000a    mywork.hour </span>=14<span style="color: #000000;">\u000a    mywork.WriteProgram()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u5341\u4e09\u3001\u9002\u914d\u5668\u6a21\u5f0f</strong></p>\u000a<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch13.%e9%80%82%e9%85%8d%e5%99%a8%e6%a8%a1%e5%bc%8f.png" alt="" width="576" height="255" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5c06\u4e00\u4e2a\u7c7b\u7684\u63a5\u53e3\u8f6c\u6362\u6210\u4e3a\u5ba2\u6237\u5e0c\u671b\u7684\u53e6\u5916\u4e00\u4e2a\u63a5\u53e3\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u7528\u6237\u901a\u8fc7\u9002\u914d\u5668\u4f7f\u7528\u4e00\u4e2a\u7c7b\u7684\u65b9\u6cd5\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('a4ad00df-9be7-44ae-88f8-c6df6d40fc2f')"><img id="code_img_closed_a4ad00df-9be7-44ae-88f8-c6df6d40fc2f" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_a4ad00df-9be7-44ae-88f8-c6df6d40fc2f" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a4ad00df-9be7-44ae-88f8-c6df6d40fc2f',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u9002\u914d\u5668\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_a4ad00df-9be7-44ae-88f8-c6df6d40fc2f" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Target:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Request():\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">common request.</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Adaptee(Target):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SpecificRequest(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">specific request.</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Adapter(Target):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,ada):\u000a        self.adaptee </span>=<span style="color: #000000;"> ada\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Request(self):\u000a        self.adaptee.SpecificRequest()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    adaptee </span>=<span style="color: #000000;"> Adaptee()\u000a    adapter </span>=<span style="color: #000000;"> Adapter(adaptee)\u000a    adapter.Request()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u5341\u56db\u3001\u5907\u5fd8\u5f55\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch14.%e5%a4%87%e5%bf%98%e5%bd%95%e6%a8%a1%e5%bc%8f.png" alt="" width="523" height="227" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5728\u4e0d\u7834\u574f\u5c01\u88c5\u6027\u7684\u524d\u63d0\u4e0b\u6355\u83b7\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u90e8\u72b6\u6001\uff0c\u5e76\u5728\u8be5\u5bf9\u8c61\u4e4b\u5916\u4fdd\u5b58\u8fd9\u4e2a\u72b6\u6001\uff0c\u4ee5\u540e\u53ef\u4ee5\u5c06\u5bf9\u8c61\u6062\u590d\u5230\u8fd9\u4e2a\u72b6\u6001\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u5c06Originator\u5bf9\u8c61\u7684\u72b6\u6001\u5c01\u88c5\u6210Memo\u5bf9\u8c61\u4fdd\u5b58\u5728Caretaker\u5185</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('67bb0a6f-0504-4abe-b506-14dcbea4770d')"><img id="code_img_closed_67bb0a6f-0504-4abe-b506-14dcbea4770d" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_67bb0a6f-0504-4abe-b506-14dcbea4770d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('67bb0a6f-0504-4abe-b506-14dcbea4770d',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u5907\u5fd8\u5f55\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_67bb0a6f-0504-4abe-b506-14dcbea4770d" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Originator:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.state </span>= <span style="color: #800000;">""</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Show(self):\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> self.state\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> CreateMemo(self):\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> Memo(self.state)\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetMemo(self,memo):\u000a        self.state </span>=<span style="color: #000000;"> memo.state\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Memo:\u000a    state</span>= <span style="color: #800000;">""</span>\u000a    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,ts):\u000a        self.state </span>=<span style="color: #000000;"> ts\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Caretaker:\u000a    memo </span>= <span style="color: #800000;">""</span>\u000a\u000a<span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    on </span>=<span style="color: #000000;"> Originator()\u000a    on.state </span>= <span style="color: #800000;">"</span><span style="color: #800000;">on</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a    on.Show()\u000a    c </span>=<span style="color: #000000;"> Caretaker()\u000a    c.memo</span>=<span style="color: #000000;">on.CreateMemo()\u000a    on.state</span>=<span style="color: #800000;">"</span><span style="color: #800000;">off</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a    on.Show()\u000a    on.SetMemo(c.memo)\u000a    on.Show()</span></pre>\u000a</div>\u000a</div>\u000a<p><strong>\u5341\u4e94\u3001\u7ec4\u5408\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch15.%e7%bb%84%e5%90%88%e6%a8%a1%e5%bc%8f.png" alt="" width="414" height="310" /></strong></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6210\u6811\u5f62\u7ed3\u6784\u4ee5\u8868\u793a&ldquo;\u90e8\u5206-\u6574\u4f53&rdquo;\u7684\u5c42\u6b21\u7ed3\u6784</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u516c\u53f8\u4eba\u5458\u7684\u7ec4\u7ec7\u7ed3\u6784</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('f1c6bc82-1760-4214-b35c-902940ddfa95')"><img id="code_img_closed_f1c6bc82-1760-4214-b35c-902940ddfa95" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_f1c6bc82-1760-4214-b35c-902940ddfa95" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f1c6bc82-1760-4214-b35c-902940ddfa95',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u7ec4\u5408\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_f1c6bc82-1760-4214-b35c-902940ddfa95" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Component:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,strName):\u000a        self.m_strName </span>=<span style="color: #000000;"> strName\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Add(self,com):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Display(self,nDepth):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Leaf(Component):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Add(self,com):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">leaf can't add</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Display(self,nDepth):\u000a        strtemp </span>= <span style="color: #800000;">""</span>\u000a        <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> range(nDepth):\u000a            strtemp</span>=strtemp+<span style="color: #800000;">"</span><span style="color: #800000;">-</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        strtemp</span>=strtemp+<span style="color: #000000;">self.m_strName\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> strtemp\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Composite(Component):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,strName):\u000a        self.m_strName </span>=<span style="color: #000000;"> strName\u000a        self.c </span>=<span style="color: #000000;"> []\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Add(self,com):\u000a        self.c.append(com)\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Display(self,nDepth):\u000a        strtemp</span>=<span style="color: #800000;">""</span>\u000a        <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> range(nDepth):\u000a            strtemp</span>=strtemp+<span style="color: #800000;">"</span><span style="color: #800000;">-</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a        strtemp</span>=strtemp+<span style="color: #000000;">self.m_strName\u000a        </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> strtemp\u000a        </span><span style="color: #0000ff;">for</span> com <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.c:\u000a            com.Display(nDepth</span>+2<span style="color: #000000;">)\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    p </span>= Composite(<span style="color: #800000;">"</span><span style="color: #800000;">Wong</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    p.Add(Leaf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Lee</span><span style="color: #800000;">"</span><span style="color: #000000;">))\u000a    p.Add(Leaf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Zhao</span><span style="color: #800000;">"</span><span style="color: #000000;">))\u000a    p1 </span>= Composite(<span style="color: #800000;">"</span><span style="color: #800000;">Wu</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    p1.Add(Leaf(</span><span style="color: #800000;">"</span><span style="color: #800000;">San</span><span style="color: #800000;">"</span><span style="color: #000000;">))\u000a    p.Add(p1)\u000a    p.Display(</span>1);</pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u5341\u516d\u3001\u8fed\u4ee3\u5668\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch16.%e8%bf%ad%e4%bb%a3%e5%99%a8%e6%a8%a1%e5%bc%8f.png" alt="" width="372" height="233" /></strong></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u63d0\u4f9b\u65b9\u6cd5\u987a\u5e8f\u8bbf\u95ee\u4e00\u4e2a\u805a\u5408\u5bf9\u8c61\u4e2d\u5404\u5143\u7d20\uff0c\u800c\u53c8\u4e0d\u66b4\u9732\u8be5\u5bf9\u8c61\u7684\u5185\u90e8\u8868\u793a</p>\u000a<p>\u8bf4\u660e\uff1a\u8fd9\u4e2a\u6a21\u5f0f\u6ca1\u6709\u5199\u4ee3\u7801\u5b9e\u73b0\uff0c\u539f\u56e0\u662f\u4f7f\u7528Python\u7684\u5217\u8868\u548cfor ... in list\u5c31\u80fd\u591f\u5b8c\u6210\u4e0d\u540c\u7c7b\u578b\u5bf9\u8c61\u805a\u5408\u7684\u8fed\u4ee3\u529f\u80fd\u4e86\u3002</p>\u000a<p>&nbsp;</p>\u000a<p><strong>\u5341\u4e03\u3001\u5355\u4f8b\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch17.%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f.png" alt="" width="512" height="86" /></strong></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u4fdd\u8bc1\u7c7b\u4ec5\u6709\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5e76\u63d0\u4f9b\u4e00\u4e2a\u8bbf\u95ee\u5b83\u7684\u5168\u5c40\u8bbf\u95ee\u70b9\u3002</p>\u000a<p>\u8bf4\u660e\uff1a &nbsp; &nbsp; \u4e3a\u4e86\u5b9e\u73b0\u5355\u4f8b\u6a21\u5f0f\u8d39\u4e86\u4e0d\u5c11\u5de5\u592b\uff0c\u540e\u6765\u67e5\u5230\u4e00\u7bc7\u535a\u6587\u5bf9\u6b64\u6709\u5f88\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u800c\u4e14\u5b9e\u73b0\u65b9\u5f0f\u4e5f\u5f88\u4e30\u5bcc\uff0c\u901a\u8fc7\u5bf9\u4ee3\u7801\u7684\u5b66\u4e60\u53ef\u4ee5\u4e86\u89e3\u66f4\u591aPython\u7684\u7528\u6cd5\u3002\u4ee5\u4e0b\u7684\u4ee3\u7801\u51fa\u81ea<span style="font-size: 15px;"><span style="color: #0000ff;"><a href="http://blog.csdn.net/GhostFromHeaven"><span style="color: #0000ff;">GhostFromHeaven\u7684\u4e13\u680f</span></a></span>\uff0c\u5730\u5740\uff1a<span><span style="color: #0000ff;"><a href="http://blog.csdn.net/ghostfromheaven/article/details/7671853" target="_blank"><span style="color: #0000ff;">http://blog.csdn.net/ghostfromheaven/article/details/7671853</span></a></span>\u3002\u4e0d\u8fc7\u6b63\u5982\u5176\u4f5c\u8005\u5728</span></span><span class="link_title" style="font-size: 14px;"><span style="font-size: 15px; color: #0000ff;"><a href="http://blog.csdn.net/ghostfromheaven/article/details/7671914"><span style="color: #0000ff;">Python\u5355\u4f8b\u6a21\u5f0f\u7ec8\u6781\u7248</span></a></span>\u6240\u8bf4\uff1a</span></p>\u000a<blockquote>\u000a<p><span>\u6211\u8981\u95ee\u7684\u662f\uff0cPython\u771f\u7684\u9700\u8981\u5355\u4f8b\u6a21\u5f0f\u5417\uff1f\u6211\u6307\u50cf\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\u4e2d\u7684\u5355\u4f8b\u6a21\u5f0f\u3002</span></p>\u000a<p><span>\u7b54\u6848\u662f\uff1a<span><strong>\u4e0d\u9700\u8981\uff01</strong></span></span></p>\u000a<p><span>\u56e0\u4e3a\uff0cPython\u6709\u6a21\u5757\uff08module\uff09\uff0c\u6700pythonic\u7684\u5355\u4f8b\u5178\u8303\u3002</span></p>\u000a<p><span>\u6a21\u5757\u5728\u5728\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u53ea\u6709\u4e00\u4efd\uff0c\u5b83\u672c\u8eab\u5c31\u662f\u5355\u4f8b\u7684\uff0c\u5c06\u4f60\u6240\u9700\u8981\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u76f4\u63a5\u66b4\u9732\u5728\u6a21\u5757\u4e2d\u53d8\u6210\u6a21\u5757\u7684\u5168\u5c40\u53d8\u91cf\u548c\u65b9\u6cd5\u5373\u53ef\uff01</span></p>\u000a</blockquote>\u000a<p>&nbsp;</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('a804ccfd-86bb-422d-b16c-613549f0da35')"><img id="code_img_closed_a804ccfd-86bb-422d-b16c-613549f0da35" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_a804ccfd-86bb-422d-b16c-613549f0da35" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a804ccfd-86bb-422d-b16c-613549f0da35',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u5355\u4f8b\u6a21\u5f0f\uff08\u56db\u79cd\u65b9\u6cd5\uff09</span>\u000a<div id="cnblogs_code_open_a804ccfd-86bb-422d-b16c-613549f0da35" class="cnblogs_code_hide">\u000a<pre><span style="color: #008000;">#</span><span style="color: #008000;">-*- encoding=utf-8 -*-</span>\u000a<span style="color: #0000ff;">print</span> <span style="color: #800000;">'</span><span style="color: #800000;">----------------------\u65b9\u6cd51--------------------------</span><span style="color: #800000;">'</span>\u000a<span style="color: #008000;">#</span><span style="color: #008000;">\u65b9\u6cd51,\u5b9e\u73b0__new__\u65b9\u6cd5</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u5e76\u5728\u5c06\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u7ed1\u5b9a\u5230\u7c7b\u53d8\u91cf_instance\u4e0a,</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u5982\u679ccls._instance\u4e3aNone\u8bf4\u660e\u8be5\u7c7b\u8fd8\u6ca1\u6709\u5b9e\u4f8b\u5316\u8fc7,\u5b9e\u4f8b\u5316\u8be5\u7c7b,\u5e76\u8fd4\u56de</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u5982\u679ccls._instance\u4e0d\u4e3aNone,\u76f4\u63a5\u8fd4\u56decls._instance</span>\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Singleton(object):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kw):\u000a        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span> hasattr(cls, <span style="color: #800000;">'</span><span style="color: #800000;">_instance</span><span style="color: #800000;">'</span><span style="color: #000000;">):\u000a            orig </span>=<span style="color: #000000;"> super(Singleton, cls)\u000a            cls._instance </span>= orig.<span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kw)\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> cls._instance\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> MyClass(Singleton):\u000a    a </span>= 1<span style="color: #000000;">\u000a\u000aone </span>=<span style="color: #000000;"> MyClass()\u000atwo </span>=<span style="color: #000000;"> MyClass()\u000a\u000atwo.a </span>= 3\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> one.a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">3</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">one\u548ctwo\u5b8c\u5168\u76f8\u540c,\u53ef\u4ee5\u7528id(), ==, is\u68c0\u6d4b</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(one)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">29097904</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(two)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">29097904</span>\u000a<span style="color: #0000ff;">print</span> one ==<span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000a<span style="color: #0000ff;">print</span> one <span style="color: #0000ff;">is</span><span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000a\u000a<span style="color: #0000ff;">print</span> <span style="color: #800000;">'</span><span style="color: #800000;">----------------------\u65b9\u6cd52--------------------------</span><span style="color: #800000;">'</span>\u000a<span style="color: #008000;">#</span><span style="color: #008000;">\u65b9\u6cd52,\u5171\u4eab\u5c5e\u6027;\u6240\u8c13\u5355\u4f8b\u5c31\u662f\u6240\u6709\u5f15\u7528(\u5b9e\u4f8b\u3001\u5bf9\u8c61)\u62e5\u6709\u76f8\u540c\u7684\u72b6\u6001(\u5c5e\u6027)\u548c\u884c\u4e3a(\u65b9\u6cd5)</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u540c\u4e00\u4e2a\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5929\u7136\u62e5\u6709\u76f8\u540c\u7684\u884c\u4e3a(\u65b9\u6cd5),</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u53ea\u9700\u8981\u4fdd\u8bc1\u540c\u4e00\u4e2a\u7c7b\u7684\u6240\u6709\u5b9e\u4f8b\u5177\u6709\u76f8\u540c\u7684\u72b6\u6001(\u5c5e\u6027)\u5373\u53ef</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u5c5e\u6027\u7684\u6700\u7b80\u5355\u6700\u76f4\u63a5\u7684\u65b9\u6cd5\u5c31\u662f__dict__\u5c5e\u6027\u6307\u5411(\u5f15\u7528)\u540c\u4e00\u4e2a\u5b57\u5178(dict)</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u53ef\u53c2\u770b:http://code.activestate.com/recipes/66531/</span>\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Borg(object):\u000a    _state </span>=<span style="color: #000000;"> {}\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kw):\u000a        ob </span>= super(Borg, cls).<span style="color: #800080;">__new__</span>(cls, *args, **<span style="color: #000000;">kw)\u000a        ob.</span><span style="color: #800080;">__dict__</span> =<span style="color: #000000;"> cls._state\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ob\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> MyClass2(Borg):\u000a    a </span>= 1<span style="color: #000000;">\u000a\u000aone </span>=<span style="color: #000000;"> MyClass2()\u000atwo </span>=<span style="color: #000000;"> MyClass2()\u000a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">one\u548ctwo\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u5bf9\u8c61,id, ==, is\u5bf9\u6bd4\u7ed3\u679c\u53ef\u770b\u51fa</span>\u000atwo.a = 3\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> one.a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">3</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(one)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">28873680</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(two)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">28873712</span>\u000a<span style="color: #0000ff;">print</span> one ==<span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">False</span>\u000a<span style="color: #0000ff;">print</span> one <span style="color: #0000ff;">is</span><span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">False</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u4f46\u662fone\u548ctwo\u5177\u6709\u76f8\u540c\u7684\uff08\u540c\u4e00\u4e2a__dict__\u5c5e\u6027\uff09,\u89c1:</span>\u000a<span style="color: #0000ff;">print</span> id(one.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">30104000</span>\u000a<span style="color: #0000ff;">print</span> id(two.<span style="color: #800080;">__dict__</span><span style="color: #000000;">)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">30104000</span>\u000a\u000a<span style="color: #0000ff;">print</span> <span style="color: #800000;">'</span><span style="color: #800000;">----------------------\u65b9\u6cd53--------------------------</span><span style="color: #800000;">'</span>\u000a<span style="color: #008000;">#</span><span style="color: #008000;">\u65b9\u6cd53:\u672c\u8d28\u4e0a\u662f\u65b9\u6cd51\u7684\u5347\u7ea7\uff08\u6216\u8005\u8bf4\u9ad8\u7ea7\uff09\u7248</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u4f7f\u7528__metaclass__\uff08\u5143\u7c7b\uff09\u7684\u9ad8\u7ea7python\u7528\u6cd5</span>\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Singleton2(type):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(cls, name, bases, dict):\u000a        super(Singleton2, cls).</span><span style="color: #800080;">__init__</span><span style="color: #000000;">(name, bases, dict)\u000a        cls._instance </span>=<span style="color: #000000;"> None\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__call__</span>(cls, *args, **<span style="color: #000000;">kw):\u000a        </span><span style="color: #0000ff;">if</span> cls._instance <span style="color: #0000ff;">is</span><span style="color: #000000;"> None:\u000a            cls._instance </span>= super(Singleton2, cls).<span style="color: #800080;">__call__</span>(*args, **<span style="color: #000000;">kw)\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> cls._instance\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> MyClass3(object):\u000a    </span><span style="color: #800080;">__metaclass__</span> =<span style="color: #000000;"> Singleton2\u000a\u000aone </span>=<span style="color: #000000;"> MyClass3()\u000atwo </span>=<span style="color: #000000;"> MyClass3()\u000a\u000atwo.a </span>= 3\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> one.a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">3</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(one)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">31495472</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(two)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">31495472</span>\u000a<span style="color: #0000ff;">print</span> one ==<span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000a<span style="color: #0000ff;">print</span> one <span style="color: #0000ff;">is</span><span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000a\u000a<span style="color: #0000ff;">print</span> <span style="color: #800000;">'</span><span style="color: #800000;">----------------------\u65b9\u6cd54--------------------------</span><span style="color: #800000;">'</span>\u000a<span style="color: #008000;">#</span><span style="color: #008000;">\u65b9\u6cd54:\u4e5f\u662f\u65b9\u6cd51\u7684\u5347\u7ea7\uff08\u9ad8\u7ea7\uff09\u7248\u672c,</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u4f7f\u7528\u88c5\u9970\u5668(decorator),</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u8fd9\u662f\u4e00\u79cd\u66f4pythonic,\u66f4elegant\u7684\u65b9\u6cd5,</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">\u5355\u4f8b\u7c7b\u672c\u8eab\u6839\u672c\u4e0d\u77e5\u9053\u81ea\u5df1\u662f\u5355\u4f8b\u7684,\u56e0\u4e3a\u4ed6\u672c\u8eab(\u81ea\u5df1\u7684\u4ee3\u7801)\u5e76\u4e0d\u662f\u5355\u4f8b\u7684</span>\u000a<span style="color: #0000ff;">def</span> singleton(cls, *args, **<span style="color: #000000;">kw):\u000a    instances </span>=<span style="color: #000000;"> {}\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> _singleton():\u000a        </span><span style="color: #0000ff;">if</span> cls <span style="color: #0000ff;">not</span> <span style="color: #0000ff;">in</span><span style="color: #000000;"> instances:\u000a            instances[cls] </span>= cls(*args, **<span style="color: #000000;">kw)\u000a        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> instances[cls]\u000a    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> _singleton\u000a\u000a@singleton\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> MyClass4(object):\u000a    a </span>= 1\u000a    <span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span>(self, x=<span style="color: #000000;">0):\u000a        self.x </span>=<span style="color: #000000;"> x\u000a\u000aone </span>=<span style="color: #000000;"> MyClass4()\u000atwo </span>=<span style="color: #000000;"> MyClass4()\u000a\u000atwo.a </span>= 3\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> one.a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">3</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(one)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">29660784</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> id(two)\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">29660784</span>\u000a<span style="color: #0000ff;">print</span> one ==<span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000a<span style="color: #0000ff;">print</span> one <span style="color: #0000ff;">is</span><span style="color: #000000;"> two\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">True</span>\u000aone.x = 1\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> one.x\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">1</span>\u000a<span style="color: #0000ff;">print</span><span style="color: #000000;"> two.x\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">1</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><span style="color: #000000;"><strong>\u5341\u516b\u3001\u6865\u63a5\u6a21\u5f0f</strong></span></p>\u000a<p><span style="color: #000000;"><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch18.%e6%a1%a5%e6%8e%a5%e6%a8%a1%e5%bc%8f.png" alt="" width="489" height="229" /></strong></span></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5c06\u62bd\u8c61\u90e8\u5206\u4e0e\u5b83\u7684\u5b9e\u73b0\u90e8\u5206\u5206\u79bb\uff0c\u4f7f\u5b83\u4eec\u90fd\u53ef\u4ee5\u72ec\u7acb\u5730\u53d8\u5316\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u4e24\u79cd\u54c1\u724c\u7684\u624b\u673a\uff0c\u8981\u6c42\u5b83\u4eec\u90fd\u53ef\u4ee5\u8fd0\u884c\u6e38\u620f\u548c\u901a\u8baf\u5f55\u4e24\u4e2a\u8f6f\u4ef6\uff0c\u800c\u4e0d\u662f\u4e3a\u6bcf\u4e2a\u54c1\u724c\u7684\u624b\u673a\u90fd\u72ec\u7acb\u7f16\u5199\u4e0d\u540c\u7684\u8f6f\u4ef6\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u867d\u7136\u4f7f\u7528\u4e86object\u7684\u65b0\u578b\u7c7b\uff0c\u4e0d\u8fc7\u5728\u8fd9\u91cc\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u662f\u5bf9\u5728Python2.2\u4e4b\u540e&ldquo;\u5c3d\u91cf\u4f7f\u7528\u65b0\u578b\u7c7b&rdquo;\u7684\u5efa\u8bae\u7684\u9075\u4ece\u793a\u8303\u3002</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('bb38a7a1-27ae-4f62-b7a3-7dd087cd393e')"><img id="code_img_closed_bb38a7a1-27ae-4f62-b7a3-7dd087cd393e" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_bb38a7a1-27ae-4f62-b7a3-7dd087cd393e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('bb38a7a1-27ae-4f62-b7a3-7dd087cd393e',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u6865\u63a5\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_bb38a7a1-27ae-4f62-b7a3-7dd087cd393e" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetSoft(object):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetGame(HandsetSoft):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Game</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetAddressList(HandsetSoft):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Address List</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetBrand(object):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.m_soft </span>=<span style="color: #000000;"> None\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetHandsetSoft(self,temp):\u000a        self.m_soft</span>=<span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetBrandM(HandsetBrand):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span> (self.m_soft ==<span style="color: #000000;"> None):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">BrandM</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a            self.m_soft.Run()\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> HandsetBrandN(HandsetBrand):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Run(self):\u000a        </span><span style="color: #0000ff;">if</span> <span style="color: #0000ff;">not</span> (self.m_soft ==<span style="color: #000000;"> None):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">BrandN</span><span style="color: #800000;">"</span><span style="color: #000000;">\u000a            self.m_soft.Run()\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    brand </span>=<span style="color: #000000;"> HandsetBrandM()\u000a    brand.SetHandsetSoft(HandsetGame())\u000a    brand.Run()\u000a    brand.SetHandsetSoft(HandsetAddressList())\u000a    brand.Run()    </span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u5341\u4e5d\u3001\u547d\u4ee4\u6a21\u5f0f</strong></p>\u000a<p><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch19.%e5%91%bd%e4%bb%a4%e6%a8%a1%e5%bc%8f.png" alt="" width="404" height="258" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u5c06\u8bf7\u6c42\u5c01\u88c5\u6210\u5bf9\u8c61\uff0c\u4ece\u800c\u4f7f\u53ef\u7528\u4e0d\u540c\u7684\u8bf7\u6c42\u5bf9\u5ba2\u6237\u8fdb\u884c\u53c2\u6570\u5316\uff1b\u5bf9\u8bf7\u6c42\u6392\u961f\u6216\u8bb0\u5f55\u8bf7\u6c42\u65e5\u5fd7\uff0c\u4ee5\u53ca\u652f\u6301\u53ef\u64a4\u6d88\u7684\u64cd\u4f5c\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u70e7\u70e4\u5e97\u6709\u4e24\u79cd\u98df\u7269\uff0c\u7f8a\u8089\u4e32\u548c\u9e21\u7fc5\u3002\u5ba2\u6237\u5411\u670d\u52a1\u5458\u70b9\u5355\uff0c\u670d\u52a1\u5458\u5c06\u70b9\u597d\u7684\u5355\u544a\u8bc9\u5927\u53a8\uff0c\u7531\u5927\u53a8\u8fdb\u884c\u70f9\u996a\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u6ce8\u610f\u5728\u904d\u5386\u5217\u8868\u65f6\u4e0d\u8981\u7528\u6ce8\u91ca\u7684\u65b9\u5f0f\u5220\u9664\uff0c\u5426\u5219\u4f1a\u51fa\u73b0bug\u3002bug\u793a\u4f8b\u7a0b\u5e8f\u9644\u5728\u540e\u9762\uff0c\u6211\u8ba4\u4e3a\u8fd9\u662f\u56e0\u4e3aremove\u6253\u4e71\u4e86for\u8fed\u4ee3\u67e5\u8be2\u5217\u8868\u7684\u987a\u5e8f\u5bfc\u81f4\u7684\u3002</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('fb45739c-ad58-4b9c-93ec-cfbf5999af66')"><img id="code_img_closed_fb45739c-ad58-4b9c-93ec-cfbf5999af66" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_fb45739c-ad58-4b9c-93ec-cfbf5999af66" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('fb45739c-ad58-4b9c-93ec-cfbf5999af66',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u547d\u4ee4\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_fb45739c-ad58-4b9c-93ec-cfbf5999af66" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Barbucer:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> MakeMutton(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Mutton</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> MakeChickenWing(self):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Chicken Wing</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Command:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,temp):\u000a        self.receiver</span>=<span style="color: #000000;">temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> ExecuteCmd(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> BakeMuttonCmd(Command):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> ExecuteCmd(self):\u000a        self.receiver.MakeMutton()\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> ChickenWingCmd(Command):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> ExecuteCmd(self):\u000a        self.receiver.MakeChickenWing()\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Waiter:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.order </span>=<span style="color: #000000;">[]\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetCmd(self,command):\u000a        self.order.append(command)\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Add Order</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> Notify(self):\u000a        </span><span style="color: #0000ff;">for</span> cmd <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.order:\u000a            </span><span style="color: #008000;">#</span><span style="color: #008000;">self.order.remove(cmd)</span>\u000a            <span style="color: #008000;">#</span><span style="color: #008000;">lead to a bug</span>\u000a<span style="color: #000000;">            cmd.ExecuteCmd()\u000a            \u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    barbucer</span>=<span style="color: #000000;">Barbucer()\u000a    cmd</span>=<span style="color: #000000;">BakeMuttonCmd(barbucer)\u000a    cmd2</span>=<span style="color: #000000;">ChickenWingCmd(barbucer)\u000a    girl</span>=<span style="color: #000000;">Waiter()\u000a    girl.SetCmd(cmd)\u000a    girl.SetCmd(cmd2)\u000a    girl.Notify()</span></pre>\u000a</div>\u000a</div>\u000a<p>\u5728for\u4e2dremove\u4f1a\u5bfc\u81f4bug\u7684\u5c55\u793a\u4ee3\u7801\uff1a</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('435dec72-d26a-40b8-ad22-616d75fe6be3')"><img id="code_img_closed_435dec72-d26a-40b8-ad22-616d75fe6be3" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_435dec72-d26a-40b8-ad22-616d75fe6be3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('435dec72-d26a-40b8-ad22-616d75fe6be3',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">bug</span>\u000a<div id="cnblogs_code_open_435dec72-d26a-40b8-ad22-616d75fe6be3" class="cnblogs_code_hide">\u000a<pre>c=[0,1,2,3<span style="color: #000000;">]\u000a</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> c:\u000a    </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> i\u000a    c.remove(i)\u000a\u000a</span><span style="color: #008000;">#</span><span style="color: #008000;">output:</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">0</span><span style="color: #008000;">\u000a#</span><span style="color: #008000;">2</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u5341\u3001\u804c\u8d23\u94fe\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch20.%e8%81%8c%e8%b4%a3%e9%93%be%e6%a8%a1%e5%bc%8f.png" alt="" width="443" height="288" /></strong></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u4f7f\u591a\u4e2a\u5bf9\u8c61\u90fd\u6709\u673a\u4f1a\u5904\u7406\u8bf7\u6c42\uff0c\u4ece\u800c\u907f\u514d\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u7684\u8026\u5408\u5173\u7cfb\u3002\u5c06\u5bf9\u8c61\u8fde\u6210\u94fe\u5e76\u6cbf\u7740\u8fd9\u6761\u94fe\u4f20\u9012\u8bf7\u6c42\u76f4\u5230\u88ab\u5904\u7406\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u8bf7\u5047\u548c\u52a0\u85aa\u7b49\u8bf7\u6c42\u53d1\u7ed9\u4e0a\u7ea7\uff0c\u5982\u679c\u4e0a\u7ea7\u65e0\u6743\u51b3\u5b9a\uff0c\u90a3\u4e48\u9012\u4ea4\u7ed9\u4e0a\u7ea7\u7684\u4e0a\u7ea7\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('14f60f42-5dcd-4231-a077-afb6b858dac4')"><img id="code_img_closed_14f60f42-5dcd-4231-a077-afb6b858dac4" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_14f60f42-5dcd-4231-a077-afb6b858dac4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('14f60f42-5dcd-4231-a077-afb6b858dac4',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u804c\u8d23\u94fe\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_14f60f42-5dcd-4231-a077-afb6b858dac4" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Request:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,tcontent,tnum):\u000a        self.content </span>=<span style="color: #000000;"> tcontent\u000a        self.num </span>=<span style="color: #000000;"> tnum\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Manager:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,temp):\u000a        self.name </span>=<span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> SetSuccessor(self,temp):\u000a        self.manager </span>=<span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetRequest(self,req):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> CommonManager(Manager):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetRequest(self,req):\u000a        </span><span style="color: #0000ff;">if</span>(req.num&gt;=0 <span style="color: #0000ff;">and</span> req.num&lt;10<span style="color: #000000;">):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">%s handled %d request.</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name,req.num)\u000a        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            self.manager.GetRequest(req)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> MajorDomo(Manager):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetRequest(self,req):\u000a        </span><span style="color: #0000ff;">if</span>(req.num&gt;=10<span style="color: #000000;">):\u000a            </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">%s handled %d request.</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name,req.num)\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    common </span>= CommonManager(<span style="color: #800000;">"</span><span style="color: #800000;">Zhang</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    major </span>= MajorDomo(<span style="color: #800000;">"</span><span style="color: #800000;">Lee</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    common.SetSuccessor(major)\u000a    req </span>= Request(<span style="color: #800000;">"</span><span style="color: #800000;">rest</span><span style="color: #800000;">"</span>,33<span style="color: #000000;">)\u000a    common.GetRequest(req)\u000a    req2 </span>= Request(<span style="color: #800000;">"</span><span style="color: #800000;">salary</span><span style="color: #800000;">"</span>,3<span style="color: #000000;">)\u000a    common.GetRequest(req2)</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u5341\u4e00\u3001\u4e2d\u4ecb\u8005\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch22.%e4%ba%ab%e5%85%83%e6%a8%a1%e5%bc%8f.png" alt="" width="482" height="249" /></strong>\u6a21\u5f0f\u7279\u70b9\uff1a\u7528\u4e00\u4e2a\u5bf9\u8c61\u6765\u5c01\u88c5\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u4ea4\u4e92\uff0c\u4e2d\u4ecb\u8005\u4f7f\u5404\u5bf9\u8c61\u4e0d\u9700\u8981\u663e\u793a\u5730\u76f8\u4e92\u5f15\u7528\uff0c\u4ece\u800c\u4f7f\u8026\u5408\u677e\u6563\uff0c\u800c\u4e14\u53ef\u4ee5\u72ec\u7acb\u5730\u6539\u53d8\u5b83\u4eec\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u4e24\u4e2a\u5bf9\u8c61\u901a\u8fc7\u4e2d\u4ecb\u8005\u76f8\u4e92\u901a\u4fe1</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('a7129b7a-4a08-4f39-924d-01412676f9cf')"><img id="code_img_closed_a7129b7a-4a08-4f39-924d-01412676f9cf" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_a7129b7a-4a08-4f39-924d-01412676f9cf" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a7129b7a-4a08-4f39-924d-01412676f9cf',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u4e2d\u4ecb\u8005\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_a7129b7a-4a08-4f39-924d-01412676f9cf" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Mediator:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Send(self,message,col):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Colleague:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,temp):\u000a        self.mediator </span>=<span style="color: #000000;"> temp\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Colleague1(Colleague):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Send(self,message):\u000a        self.mediator.Send(message,self)\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Notify(self,message):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Colleague1 get a message:%s</span><span style="color: #800000;">"</span> %<span style="color: #000000;">message\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Colleague2(Colleague):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Send(self,message):\u000a        self.mediator.Send(message,self)\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Notify(self,message):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Colleague2 get a message:%s</span><span style="color: #800000;">"</span> %<span style="color: #000000;">message\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> ConcreteMediator(Mediator):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Send(self,message,col):\u000a        </span><span style="color: #0000ff;">if</span>(col==<span style="color: #000000;">col1):\u000a            col2.Notify(message)\u000a        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            col1.Notify(message)\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    m </span>=<span style="color: #000000;">ConcreteMediator()\u000a    col1 </span>=<span style="color: #000000;"> Colleague1(m)\u000a    col2 </span>=<span style="color: #000000;"> Colleague1(m)\u000a    m.col1</span>=<span style="color: #000000;">col1\u000a    m.col2</span>=<span style="color: #000000;">col2\u000a    col1.Send(</span><span style="color: #800000;">"</span><span style="color: #800000;">How are you?</span><span style="color: #800000;">"</span><span style="color: #000000;">);\u000a    col2.Send(</span><span style="color: #800000;">"</span><span style="color: #800000;">Fine.</span><span style="color: #800000;">"</span>);</pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u5341\u4e8c\u3001\u4eab\u5143\u6a21\u5f0f</strong></p>\u000a<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch22.%e4%ba%ab%e5%85%83%e6%a8%a1%e5%bc%8f.png" alt="" width="513" height="265" /></p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u8fd0\u7528\u5171\u4eab\u6280\u672f\u6709\u6548\u5730\u652f\u6301\u5927\u91cf\u7ec6\u7c92\u5ea6\u7684\u5bf9\u8c61\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u4e00\u4e2a\u7f51\u7ad9\u5de5\u5382\uff0c\u6839\u636e\u7528\u6237\u8bf7\u6c42\u7684\u7c7b\u522b\u8fd4\u56de\u76f8\u5e94\u7c7b\u522b\u7684\u7f51\u7ad9\u3002\u5982\u679c\u8fd9\u79cd\u7c7b\u522b\u7684\u7f51\u7ad9\u5df2\u7ecf\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u90a3\u4e48\u8fd4\u56de\u8fd9\u79cd\u7f51\u7ad9\u5e76\u52a0\u4e0a\u4e0d\u540c\u7528\u6237\u7684\u72ec\u7279\u7684\u6570\u636e\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u90a3\u4e48\u751f\u6210\u4e00\u4e2a\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u4e3a\u4e86\u5c55\u793a\u6bcf\u79cd\u7f51\u7ad9\u7684\u7531\u7528\u6237\u8bf7\u6c42\u7684\u6b21\u6570\uff0c\u8fd9\u91cc\u4e3a\u5b83\u4eec\u5efa\u7acb\u4e86\u4e00\u4e2a\u5f15\u7528\u6b21\u6570\u7684\u5b57\u5178\u3002</p>\u000a<p>\u3000\u3000\u3000\u3000\u3000\u3000\u4e4b\u6240\u4ee5\u4e0d\u7528Python\u7684sys<span>\u6a21\u5757\u4e2d\u7684sys.getrefcount()\u65b9\u6cd5\u7edf\u8ba1\u5f15\u7528\u8ba1\u6570\u662f\u56e0\u4e3a\u6709\u7684\u5bf9\u8c61\u53ef\u80fd\u5728\u522b\u5904\u88ab\u9690\u5f0f\u7684\u5f15\u7528\uff0c\u4ece\u800c\u589e\u52a0\u4e86\u5f15\u7528\u8ba1\u6570\u3002</span><span style="line-height: 1.5;">&nbsp;</span></p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('d7d50499-f84f-4908-ac78-5b5ab1f08085')"><img id="code_img_closed_d7d50499-f84f-4908-ac78-5b5ab1f08085" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_d7d50499-f84f-4908-ac78-5b5ab1f08085" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d7d50499-f84f-4908-ac78-5b5ab1f08085',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u4eab\u5143\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_d7d50499-f84f-4908-ac78-5b5ab1f08085" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> sys\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> WebSite:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Use(self):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> ConcreteWebSite(WebSite):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,strName):\u000a        self.name </span>=<span style="color: #000000;"> strName\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Use(self,user):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Website type:%s,user:%s</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name,user)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> UnShareWebSite(WebSite):\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self,strName):\u000a        self.name </span>=<span style="color: #000000;"> strName\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Use(self,user):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">UnShare Website type:%s,user:%s</span><span style="color: #800000;">"</span> %<span style="color: #000000;">(self.name, user)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> WebFactory:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        test </span>= ConcreteWebSite(<span style="color: #800000;">"</span><span style="color: #800000;">test</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a        self.webtype </span>={<span style="color: #800000;">"</span><span style="color: #800000;">test</span><span style="color: #800000;">"</span><span style="color: #000000;">:test}\u000a        self.count </span>= {<span style="color: #800000;">"</span><span style="color: #800000;">test</span><span style="color: #800000;">"</span><span style="color: #000000;">:0}\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetWeb(self,webtype):\u000a        </span><span style="color: #0000ff;">if</span> webtype <span style="color: #0000ff;">not</span> <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.webtype:\u000a            temp </span>=<span style="color: #000000;"> ConcreteWebSite(webtype)\u000a            self.webtype[webtype] </span>=<span style="color: #000000;"> temp\u000a            self.count[webtype] </span>=1\u000a        <span style="color: #0000ff;">else</span><span style="color: #000000;">:\u000a            temp </span>=<span style="color: #000000;"> self.webtype[webtype]\u000a            self.count[webtype] </span>= self.count[webtype]+1\u000a        <span style="color: #0000ff;">return</span><span style="color: #000000;"> temp\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetCount(self):\u000a        </span><span style="color: #0000ff;">for</span> key <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.webtype:\u000a            </span><span style="color: #008000;">#</span><span style="color: #008000;">print "type: %s, count:%d" %(key,sys.getrefcount(self.webtype[key]))</span>\u000a            <span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">type: %s, count:%d </span><span style="color: #800000;">"</span> %<span style="color: #000000;">(key,self.count[key])\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    f </span>=<span style="color: #000000;"> WebFactory()\u000a    ws</span>=f.GetWeb(<span style="color: #800000;">"</span><span style="color: #800000;">blog</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws.Use(</span><span style="color: #800000;">"</span><span style="color: #800000;">Lee</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws2</span>=f.GetWeb(<span style="color: #800000;">"</span><span style="color: #800000;">show</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws2.Use(</span><span style="color: #800000;">"</span><span style="color: #800000;">Jack</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws3</span>=f.GetWeb(<span style="color: #800000;">"</span><span style="color: #800000;">blog</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws3.Use(</span><span style="color: #800000;">"</span><span style="color: #800000;">Chen</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws4</span>=UnShareWebSite(<span style="color: #800000;">"</span><span style="color: #800000;">TEST</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    ws4.Use(</span><span style="color: #800000;">"</span><span style="color: #800000;">Mr.Q</span><span style="color: #800000;">"</span><span style="color: #000000;">)\u000a    </span><span style="color: #0000ff;">print</span><span style="color: #000000;"> f.webtype\u000a    f.GetCount()\u000a    </span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u5341\u4e09\u3001\u89e3\u91ca\u5668\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch23.%e8%a7%a3%e9%87%8a%e5%99%a8%e6%a8%a1%e5%bc%8f.png" alt="" width="538" height="355" /></strong></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u8bed\u8a00\uff0c\u5b9a\u4e49\u5b83\u7684\u6587\u6cd5\u7684\u4e00\u79cd\u8868\u793a\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u89e3\u91ca\u5668\uff0c\u8fd9\u4e2a\u89e3\u91ca\u5668\u4f7f\u7528\u8be5\u8868\u793a\u6765\u89e3\u91ca\u8bed\u8a00\u4e2d\u7684\u53e5\u5b50\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\uff08\u53ea\u662f\u6a21\u5f0f\u7279\u70b9\u7684\u6700\u7b80\u5355\u793a\u8303\uff09</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('8d8c9ecd-76f2-4664-9009-a2aa783d8a46')"><img id="code_img_closed_8d8c9ecd-76f2-4664-9009-a2aa783d8a46" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_8d8c9ecd-76f2-4664-9009-a2aa783d8a46" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8d8c9ecd-76f2-4664-9009-a2aa783d8a46',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u89e3\u91ca\u5668\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_8d8c9ecd-76f2-4664-9009-a2aa783d8a46" class="cnblogs_code_hide">\u000a<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Context:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.input</span>=<span style="color: #800000;">""</span><span style="color: #000000;">\u000a        self.output</span>=<span style="color: #800000;">""</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> AbstractExpression:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Interpret(self,context):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Expression(AbstractExpression):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Interpret(self,context):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">terminal interpret</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> NonterminalExpression(AbstractExpression):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Interpret(self,context):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">Nonterminal interpret</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    context</span>= <span style="color: #800000;">""</span><span style="color: #000000;">\u000a    c </span>=<span style="color: #000000;"> []\u000a    c </span>= c +<span style="color: #000000;"> [Expression()]\u000a    c </span>= c +<span style="color: #000000;"> [NonterminalExpression()]\u000a    c </span>= c +<span style="color: #000000;"> [Expression()]\u000a    c </span>= c +<span style="color: #000000;"> [Expression()]\u000a    </span><span style="color: #0000ff;">for</span> a <span style="color: #0000ff;">in</span><span style="color: #000000;"> c:\u000a        a.Interpret(context)</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p>\u000a<p><strong>\u4e8c\u5341\u56db\u3001\u8bbf\u95ee\u8005\u6a21\u5f0f</strong></p>\u000a<p><strong><img style="display: block; margin-left: auto; margin-right: auto;" src="http://images.cnblogs.com/cnblogs_com/wuyuegb2312/468244/o_ch24.%e8%ae%bf%e9%97%ae%e8%80%85%e6%a8%a1%e5%bc%8f.png" alt="" width="553" height="563" /></strong></p>\u000a<p>&nbsp;</p>\u000a<p>\u6a21\u5f0f\u7279\u70b9\uff1a\u8868\u793a\u4e00\u4e2a\u4f5c\u7528\u4e8e\u67d0\u5bf9\u8c61\u7ed3\u6784\u4e2d\u7684\u5404\u5143\u7d20\u7684\u64cd\u4f5c\u3002\u5b83\u4f7f\u4f60\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u5404\u5143\u7d20\u7684\u7c7b\u7684\u524d\u63d0\u4e0b\u5b9a\u4e49\u4f5c\u7528\u4e8e\u8fd9\u4e9b\u5143\u7d20\u7684\u65b0\u64cd\u4f5c\u3002</p>\u000a<p>\u7a0b\u5e8f\u5b9e\u4f8b\uff1a\u5bf9\u4e8e\u7537\u4eba\u548c\u5973\u4eba\uff08\u63a5\u53d7\u8bbf\u95ee\u8005\u7684\u5143\u7d20\uff0cObjectStructure\u7528\u4e8e\u7a77\u4e3e\u8fd9\u4e9b\u5143\u7d20\uff09\uff0c\u4e0d\u540c\u7684\u906d\u9047\uff08\u5177\u4f53\u7684\u8bbf\u95ee\u8005\uff09\u5f15\u53d1\u4e24\u79cd\u5bf9\u8c61\u7684\u4e0d\u540c\u884c\u4e3a\u3002</p>\u000a<p>\u4ee3\u7801\u7279\u70b9\uff1a\u65e0</p>\u000a<div class="cnblogs_code" onclick="cnblogs_code_show('70063e18-76db-4242-88ac-f286b68b90d7')"><img id="code_img_closed_70063e18-76db-4242-88ac-f286b68b90d7" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_70063e18-76db-4242-88ac-f286b68b90d7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('70063e18-76db-4242-88ac-f286b68b90d7',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">\u8bbf\u95ee\u8005\u6a21\u5f0f</span>\u000a<div id="cnblogs_code_open_70063e18-76db-4242-88ac-f286b68b90d7" class="cnblogs_code_hide">\u000a<pre><span style="color: #008000;">#</span><span style="color: #008000;"> -*- coding: UTF-8 -*-</span>\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Person:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Accept(self,visitor):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Man(Person):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Accept(self,visitor):\u000a        visitor.GetManConclusion(self)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Woman(Person):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Accept(self,visitor):\u000a        visitor.GetWomanConclusion(self)\u000a\u000a</span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Action:\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetManConclusion(self,concreteElementA):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> GetWomanConclusion(self,concreteElementB):\u000a        </span><span style="color: #0000ff;">pass</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Success(Action):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetManConclusion(self,concreteElementA):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">\u7537\u4eba\u6210\u529f\u65f6\uff0c\u80cc\u540e\u6709\u4e2a\u4f1f\u5927\u7684\u5973\u4eba</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> GetWomanConclusion(self,concreteElementB):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">\u5973\u4eba\u6210\u529f\u65f6\uff0c\u80cc\u540e\u6709\u4e2a\u4e0d\u6210\u529f\u7684\u7537\u4eba</span><span style="color: #800000;">"</span>\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> Failure(Action):\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> GetManConclusion(self,concreteElementA):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">\u7537\u4eba\u5931\u8d25\u65f6\uff0c\u95f7\u5934\u559d\u9152\uff0c\u8c01\u4e5f\u4e0d\u7528\u529d</span><span style="color: #800000;">"</span>\u000a    <span style="color: #0000ff;">def</span><span style="color: #000000;"> GetWomanConclusion(self,concreteElementB):\u000a        </span><span style="color: #0000ff;">print</span> <span style="color: #800000;">"</span><span style="color: #800000;">\u5973\u4eba\u5931\u8d25\u65f6\uff0c\u773c\u6cea\u6c6a\u6c6a\uff0c\u8c01\u4e5f\u529d\u4e0d\u4e86</span><span style="color: #800000;">"</span>\u000a\u000a\u000a<span style="color: #0000ff;">class</span><span style="color: #000000;"> ObjectStructure:\u000a    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__init__</span><span style="color: #000000;">(self):\u000a        self.plist</span>=<span style="color: #000000;">[]\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Add(self,p):\u000a        self.plist</span>=self.plist+<span style="color: #000000;">[p]\u000a    </span><span style="color: #0000ff;">def</span><span style="color: #000000;"> Display(self,act):\u000a        </span><span style="color: #0000ff;">for</span> p <span style="color: #0000ff;">in</span><span style="color: #000000;"> self.plist:\u000a            p.Accept(act)\u000a\u000a</span><span style="color: #0000ff;">if</span> <span style="color: #800080;">__name__</span> == <span style="color: #800000;">"</span><span style="color: #800000;">__main__</span><span style="color: #800000;">"</span><span style="color: #000000;">:\u000a    os </span>=<span style="color: #000000;"> ObjectStructure()\u000a    os.Add(Man())\u000a    os.Add(Woman())\u000a    sc </span>=<span style="color: #000000;"> Success()\u000a    os.Display(sc)\u000a    fl </span>=<span style="color: #000000;"> Failure()\u000a    os.Display(fl)</span></pre>\u000a</div>\u000a</div>\u000a<p>&nbsp;</p></div><div id="MySignature"></div>\u000a<div class="clear"></div>\u000a<div id="blog_post_info_block">\u000a<div id="BlogPostCategory"></div>\u000a<div id="EntryTag"></div>\u000a<div id="blog_post_info">\u000a</div>\u000a<div class="clear"></div>\u000a<div id="post_next_prev"></div>\u000a</div>\u000a\u000a\u000a		<p class="postfoot">\u000a			posted on <span id="post-date">2013-04-09 16:58</span> <a href='http://www.cnblogs.com/wuyuegb2312/'>\u4e94\u5cb3</a> \u9605\u8bfb(<span id="post_view_count">...</span>) \u8bc4\u8bba(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=3008320" rel="nofollow">\u7f16\u8f91</a> <a href="#" onclick="AddToWz(3008320);return false;">\u6536\u85cf</a>\u000a		</p>\u000a	</div>\u000a	<script type="text/javascript">var allowComments=true,cb_blogId=80216,cb_entryId=3008320,cb_blogApp=currentBlogApp,cb_blogUserGuid='03b9a8f9-1a00-e011-ac81-842b2b196315',cb_entryCreatedDate='2013/4/9 16:58:00';loadViewCount(cb_entryId);</script>\u000a	\u000a</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>\u000a<div id='comment_form' class='commentform'>\u000a<a name='commentform'></a>\u000a<div id='divCommentShow'></div>\u000a<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>\u5237\u65b0\u8bc4\u8bba</a><a href='#' onclick='return RefreshPage();'>\u5237\u65b0\u9875\u9762</a><a href='#top'>\u8fd4\u56de\u9876\u90e8</a></div>\u000a<div id='comment_form_container'></div>\u000a<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>\u000a<div id='ad_t2'></div>\u000a<div id='opt_under_post'></div>\u000a<div id='ad_c1' class='c_ad_block'></div>\u000a<div id='under_post_news'></div>\u000a<div id='ad_c2' class='c_ad_block'></div>\u000a<div id='under_post_kb'></div>\u000a<div id='HistoryToday' class='c_ad_block'></div>\u000a<script type='text/javascript'>\u000a    fixPostBody();\u000a    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);\u000a    deliverAdT2();\u000a    deliverAdC1();\u000a    deliverAdC2();    \u000a    loadNewsAndKb();\u000a    loadBlogSignature();\u000a    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);\u000a    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);\u000a    loadOptUnderPost();\u000a    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   \u000a</script>\u000a</div>\u000a\u000a\u000a</div>\u000a\u000a<p id="footer">\u000a	Powered by: \u000a	<br />\u000a	\u000a	<a id="Footer1_Hyperlink3" NAME="Hyperlink1" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">\u535a\u5ba2\u56ed</a>\u000a	<br />\u000a	Copyright &copy; \u4e94\u5cb3\u000a</p>\u000a<!--PageEndHtml Block Begin-->\u000a<div style="position:fixed; right:2px; bottom:0px;"><a href="#">\u56de\u5230\u9876\u90e8</a></div>\u000a<!--PageEndHtml Block End-->\u000a</body>\u000a</html>\u000a
p3
a.