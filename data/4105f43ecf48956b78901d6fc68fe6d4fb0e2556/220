(lp0
S'http://www.cnblogs.com/itech/archive/2012/01/10/2318293.html'
p1
aS'python\xe7\xb1\xbb\xe5\xba\x9332[\xe5\xba\x8f\xe5\x88\x97\xe5\x8c\x96\xe5\x92\x8c\xe5\x8f\x8d\xe5\xba\x8f\xe5\x88\x97\xe5\x8c\x96\xe4\xb9\x8bpickle] - iTech - \xe5\x8d\x9a\xe5\xae\xa2\xe5\x9b\xad'
p2
aI0
aV\u000a<!DOCTYPE html>\u000a<html lang="zh-cn">\u000a<head>\u000a<meta charset="utf-8"/>\u000a<meta name="viewport" content="width=device-width, initial-scale=1" />\u000a<title>python\u7c7b\u5e9332[\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4e4bpickle] - iTech - \u535a\u5ba2\u56ed</title>\u000a<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=03KQeESEmpLfzDqUo0NiWUg5Zd5aRam3JHBZTK05Wug1"/>\u000a<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip.css?v=xPXJVC4GCITs1yYYgSeLkcicCxapqseaPVQLFGMO1wc1"/>\u000a<link type="text/css" rel="stylesheet" href="/blog/customcss/50245.css?v=i5PJFs5v3S8UN9D6qWPMF%2bF5VHM%3d"/>\u000a<link id="mobile-style" media="only screen and (max-width: 768px)" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip-mobile.css?v=Dqkl0vQK0F6DoWU0YX1XCCm2GnYpl8EWb8iHcIYGO681"/>\u000a<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/itech/rss"/>\u000a<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/itech/rsd.xml"/>\u000a<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/itech/wlwmanifest.xml"/>\u000a<script src="//common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  \u000a<script type="text/javascript">var currentBlogApp = 'itech', cb_enable_mathjax=false;var isLogined=false;</script>\u000a<script src="/bundles/blog-common.js?v=hH1lCMV8WaIu271Nx7jPuv36TENW9-RsSxziLxUpjtc1" type="text/javascript"></script>\u000a</head>\u000a<body>\u000a<a name="top"></a>\u000a\u000a<!--done-->\u000a<div id="home">\u000a<div id="header">\u000a	<div id="blogTitle">\u000a	<a id="lnkBlogLogo" href="http://www.cnblogs.com/itech/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="\u8fd4\u56de\u4e3b\u9875" /></a>			\u000a		\u000a<!--done-->\u000a<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/itech/">iTech's Blog</a></h1>\u000a<h2><font size="4" color=red><a href=http://ciandcd.com>www.ciandcd.com</a>\uff1a\u000a\u6301\u7eed\u96c6\u6210\u603b\u7fa4172758282\u000a<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=d0d91a73baae99ec83b0548f566268698a56c5af7226dd05e7e7aa8f40f4a811"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-\u603b\u7fa4" title="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-\u603b\u7fa4"></a>\u000a\u6301\u7eed\u96c6\u62102\u7fa4567940397\u000a<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=53038eeb2b883ea489a53f1c19bbf49b7daa3d8b3ad6e50695fcdb8910cfdc93"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-2" title="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-2"></a>\u000a\u6301\u7eed\u96c6\u62103\u7fa4567931165\u000a<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=b52da216b7a21abcbd65114e9f628c68a3b7df62481f681b3774621ca0da5842"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-\u62db\u8058" title="\u6301\u7eed\u96c6\u6210\u548c\u53d1\u5e03-\u62db\u8058"></a>\u000a</font>\u000a<br/>\u000a<font size="4" color=red><a href=http://www.linux6.com>www.linux6.com</a>: \u000alinux\u8ba8\u8bba\u603b\u7fa4426095548\u000a<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=0fe24f2c2d0542a788bd2420e07a9c05ea547da1259ccd08795ff5842c4349cf"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="www.linux6.com-\u603b\u7fa4" title="www.linux6.com-\u603b\u7fa4"></a>\u000alinux\u8ba8\u8bba2\u7fa4483205747\u000a<a target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=de6c2efbf557ebf8047442485ae884fc93062768548cd6116ecad3658962834f"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="www.linux6.com-2" title="www.linux6.com-2"></a>\u000a</font>\u000a<br/></h2>\u000a\u000a\u000a\u000a		\u000a	</div><!--end: blogTitle \u535a\u5ba2\u7684\u6807\u9898\u548c\u526f\u6807\u9898 -->\u000a	<div id="navigator">\u000a		\u000a<ul id="navList">\u000a<li><a id="blog_nav_sitehome" class="menu" href="http://www.cnblogs.com/">\u535a\u5ba2\u56ed</a></li>\u000a<li><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/itech/">\u9996\u9875</a></li>\u000a<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">\u65b0\u968f\u7b14</a></li>\u000a<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/iTech">\u8054\u7cfb</a></li>\u000a<li><a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/itech/rss">\u8ba2\u9605</a>\u000a<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="http://www.cnblogs.com/itech/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="\u8ba2\u9605" /></a>--></li>\u000a<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">\u7ba1\u7406</a></li>\u000a</ul>\u000a		<div class="blogStats">\u000a			\u000a			<div id="blog_stats">\u000a<span id="stats_post_count">\u968f\u7b14 - 652&nbsp; </span>\u000a<span id="stats_article_count">\u6587\u7ae0 - 69&nbsp; </span>\u000a<span id="stats-comment_count">\u8bc4\u8bba - 383</span>\u000a</div>\u000a			\u000a		</div><!--end: blogStats -->\u000a	</div><!--end: navigator \u535a\u5ba2\u5bfc\u822a\u680f -->\u000a</div><!--end: header \u5934\u90e8 -->\u000a\u000a<div id="main">\u000a	<div id="mainContent">\u000a	<div class="forFlow">\u000a		\u000a<div id="post_detail">\u000a<!--done-->\u000a<div id="topics">\u000a	<div class = "post">\u000a		<h1 class = "postTitle">\u000a			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/itech/archive/2012/01/10/2318293.html">python\u7c7b\u5e9332[\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u4e4bpickle]</a>\u000a		</h1>\u000a		<div class="clear"></div>\u000a		<div class="postBody">\u000a			<div id="cnblogs_post_body"><div><div></div><div></div><div><div></div><div>&nbsp;</div><p>\u4e00 pickle</p><div>pickle\u6a21\u5757\u7528\u6765\u5b9e\u73b0python\u5bf9\u8c61\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u3002\u901a\u5e38\u5730pickle\u5c06python\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a\u4e8c\u8fdb\u5236\u6d41\u6216\u6587\u4ef6\u3002</div><p>&nbsp;</p><div></div><div>python\u5bf9\u8c61\u4e0e\u6587\u4ef6\u4e4b\u95f4\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff1a</div><div>pickle.dump()</div><div>pickle.load()</div><div></div><div>\u5982\u679c\u8981\u5b9e\u73b0python\u5bf9\u8c61\u548c\u5b57\u7b26\u4e32\u95f4\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\uff0c\u5219\u4f7f\u7528\uff1a</div><div>pickle.dumps()</div><div>pickle.loads()</div><p>&nbsp;</p><div></div><div>\u53ef\u4ee5\u88ab\u5e8f\u5217\u5316\u7684\u7c7b\u578b\u6709\uff1a</div><div>* None,True \u548c False;</div><div>* \u6574\u6570\uff0c\u6d6e\u70b9\u6570\uff0c\u590d\u6570;</div><div>* \u5b57\u7b26\u4e32\uff0c\u5b57\u8282\u6d41\uff0c\u5b57\u8282\u6570\u7ec4;</div><div>* \u5305\u542b\u53efpickle\u5bf9\u8c61\u7684tuples\uff0clists\uff0csets\u548cdictionaries\uff1b</div><div>* \u5b9a\u4e49\u5728module\u9876\u5c42\u7684\u51fd\u6570\uff1a</div><div>* \u5b9a\u4e49\u5728module\u9876\u5c42\u7684\u5185\u7f6e\u51fd\u6570\uff1b</div><div>* \u5b9a\u4e49\u5728module\u9876\u5c42\u7684\u7c7b\uff1b</div><div>* \u62e5\u6709__dict__()\u6216__setstate__()\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b\uff1b</div><p>&nbsp;</p><div></div><div>\u6ce8\u610f\uff1a\u5bf9\u4e8e\u51fd\u6570\u6216\u7c7b\u7684\u5e8f\u5217\u5316\u662f\u4ee5\u540d\u5b57\u6765\u8bc6\u522b\u7684\uff0c\u6240\u4ee5\u9700\u8981import\u76f8\u5e94\u7684module\u3002</div><p>&nbsp;</p><p>\u4e8c pickle\u7684\u8fd0\u884c\u8fc7\u7a0b</p><div>\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u8981\u662f\u7684\u5bf9\u8c61picklable\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u989d\u5916\u7684\u4ee3\u7801\u3002\u9ed8\u8ba4\u5730pickle\u5c06\u667a\u80fd\u5730\u68c0\u67e5\u7c7b\u548c\u5b9e\u4f8b\u7684\u5c5e\u6027\uff0c\u5f53\u4e00\u4e2a\u7c7b\u5b9e\u4f8b\u53cd\u5e8f\u5217\u5316\u7684\u65f6\u5019\uff0c\u5b83\u7684__init__()\u65b9\u6cd5\u901a\u5e38\u4e0d\u88ab\u8c03\u7528\u3002\u800c\u662f\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u672a\u521d\u59cb\u5316\u7684\u5b9e\u4f8b\uff0c\u7136\u540e\u518d\u56de\u590d\u5b58\u50a8\u7684\u5c5e\u6027\u3002</div><p>&nbsp;</p><div></div><div>\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0\u4e0b\u5217\u7684\u65b9\u6cd5\u6765\u4fee\u6539\u9ed8\u8ba4\u7684\u884c\u4e3a\uff1a</div><div>object.__getstate__() :\u9ed8\u8ba4\u5730\u5e8f\u5217\u5316\u5bf9\u8c61\u7684__dict__,\u4f46\u662f\u5982\u679c\u4f60\u5b9e\u73b0\u4e86__getstate__(),\u5219__getstate__()\u51fd\u6570\u8fd4\u56de\u7684\u503c\u5c06\u88ab\u5e8f\u5217\u5316\u3002</div><div>object.__setstate__(state) :\u5982\u679c\u7c7b\u578b\u5b9e\u73b0\u4e86\u6b64\u65b9\u6cd5\uff0c\u5219\u5728\u53cd\u5e8f\u5217\u5316\u7684\u65f6\u5019\uff0c\u6b64\u65b9\u6cd5\u7528\u6765\u6062\u590d\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</div><div>object.__getnewargs__() \uff1a \u5982\u679c\u5b9e\u4f8b\u6784\u9020\u7684\u65f6\u5019\uff08__new__()\uff09\u9700\u8981\u53c2\u6570\uff0c\u5219\u9700\u8981\u5b9e\u73b0\u6b64\u51fd\u6570\u3002</div><div></div><div></div><div>\u6ce8\u610f\uff1a\u5982\u679c__getstate__()\u8fd4\u56deFalse\uff0c\u5219\u5728\u53cd\u5e8f\u5217\u5316\u7684\u65f6\u5019__setstate__()\u5219\u4e0d\u88ab\u8c03\u7528\u3002</div><p>&nbsp;</p><div></div><div>\u6709\u7684\u65f6\u5019\u4e3a\u4e86\u6548\u7387\uff0c\u6216\u4e0a\u9762\u76843\u4e2a\u51fd\u6570\u4e0d\u80fd\u6ee1\u8db3\u9700\u6c42\u65f6\uff0c\u9700\u8981\u5b9e\u73b0__reduce__()\u51fd\u6570\u3002</div><p>&nbsp;</p><div></div><div>\u4e09 \u5b9e\u4f8b</div><div><div class="cnblogs_code"><div><span style="color: #0000FF;">import</span>&nbsp;pickle<br /><br /><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;An&nbsp;arbitrary&nbsp;collection&nbsp;of&nbsp;objects&nbsp;supported&nbsp;by&nbsp;pickle.</span><span style="color: #008000;"><br /></span>data&nbsp;=&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>:&nbsp;[1,&nbsp;2.0,&nbsp;3,&nbsp;4+6j],<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #800000;">'</span><span style="color: #800000;">b</span><span style="color: #800000;">'</span>:&nbsp;(<span style="color: #800000;">"</span><span style="color: #800000;">character&nbsp;string</span><span style="color: #800000;">"</span>,&nbsp;b<span style="color: #800000;">"</span><span style="color: #800000;">byte&nbsp;string</span><span style="color: #800000;">"</span>),<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span>:&nbsp;set([None,&nbsp;True,&nbsp;False])<br />}<br /><br />with&nbsp;open(<span style="color: #800000;">'</span><span style="color: #800000;">data.pickle</span><span style="color: #800000;">'</span>,&nbsp;<span style="color: #800000;">'</span><span style="color: #800000;">wb</span><span style="color: #800000;">'</span>)&nbsp;as&nbsp;f:<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Pickle&nbsp;the&nbsp;'data'&nbsp;dictionary&nbsp;using&nbsp;the&nbsp;highest&nbsp;protocol&nbsp;available.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;pickle.dump(data,&nbsp;f,&nbsp;pickle.HIGHEST_PROTOCOL)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<br />with&nbsp;open(<span style="color: #800000;">'</span><span style="color: #800000;">data.pickle</span><span style="color: #800000;">'</span>,&nbsp;<span style="color: #800000;">'</span><span style="color: #800000;">rb</span><span style="color: #800000;">'</span>)&nbsp;as&nbsp;f:<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;The&nbsp;protocol&nbsp;version&nbsp;used&nbsp;is&nbsp;detected&nbsp;automatically,&nbsp;so&nbsp;we&nbsp;do&nbsp;not</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;have&nbsp;to&nbsp;specify&nbsp;it.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;pickle.load(f)<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">print</span>(str(data))<br />&nbsp; &nbsp;&nbsp;</div></div></div><div></div><div>&nbsp;</div><p>\u56db \u4fee\u6539picklable\u7c7b\u578b\u7684\u9ed8\u8ba4\u884c\u4e3a&nbsp;&nbsp; &nbsp;&nbsp;</p><div class="cnblogs_code"><div><span style="color: #0000FF;">class</span>&nbsp;TextReader:<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #800000;">"""</span><span style="color: #800000;">Print&nbsp;and&nbsp;number&nbsp;lines&nbsp;in&nbsp;a&nbsp;text&nbsp;file.</span><span style="color: #800000;">"""</span><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">def</span>&nbsp;<span style="color: #800080;">__init__</span>(self,&nbsp;filename):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.filename&nbsp;=&nbsp;filename<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file&nbsp;=&nbsp;open(filename)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.lineno&nbsp;=&nbsp;0<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">def</span>&nbsp;readline(self):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.lineno&nbsp;+=&nbsp;1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;self.file.readline()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">if</span>&nbsp;<span style="color: #0000FF;">not</span>&nbsp;line:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">return</span>&nbsp;None<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">if</span>&nbsp;line.endswith(<span style="color: #800000;">'</span><span style="color: #800000;">\u005cn</span><span style="color: #800000;">'</span>):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;line[:-1]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">return</span>&nbsp;<span style="color: #800000;">"</span><span style="color: #800000;">%i:&nbsp;%s</span><span style="color: #800000;">"</span>&nbsp;%&nbsp;(self.lineno,&nbsp;line)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">def</span>&nbsp;<span style="color: #800080;">__getstate__</span>(self):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Copy&nbsp;the&nbsp;object's&nbsp;state&nbsp;from&nbsp;self.__dict__&nbsp;which&nbsp;contains</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;all&nbsp;our&nbsp;instance&nbsp;attributes.&nbsp;Always&nbsp;use&nbsp;the&nbsp;dict.copy()</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;method&nbsp;to&nbsp;avoid&nbsp;modifying&nbsp;the&nbsp;original&nbsp;state.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;=&nbsp;self.<span style="color: #800080;">__dict__</span>.copy()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Remove&nbsp;the&nbsp;unpicklable&nbsp;entries.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">del</span>&nbsp;state[<span style="color: #800000;">'</span><span style="color: #800000;">file</span><span style="color: #800000;">'</span>]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">return</span>&nbsp;state<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">def</span>&nbsp;<span style="color: #800080;">__setstate__</span>(self,&nbsp;state):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Restore&nbsp;instance&nbsp;attributes&nbsp;(i.e.,&nbsp;filename&nbsp;and&nbsp;lineno).</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.<span style="color: #800080;">__dict__</span>.update(state)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Restore&nbsp;the&nbsp;previously&nbsp;opened&nbsp;file's&nbsp;state.&nbsp;To&nbsp;do&nbsp;so,&nbsp;we&nbsp;need&nbsp;to</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;reopen&nbsp;it&nbsp;and&nbsp;read&nbsp;from&nbsp;it&nbsp;until&nbsp;the&nbsp;line&nbsp;count&nbsp;is&nbsp;restored.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;=&nbsp;open(self.filename)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000FF;">for</span>&nbsp;_&nbsp;<span style="color: #0000FF;">in</span>&nbsp;range(self.lineno):<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file.readline()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;Finally,&nbsp;save&nbsp;the&nbsp;file.</span><span style="color: #008000;"><br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.file&nbsp;=&nbsp;file<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />reader&nbsp;=&nbsp;TextReader(<span style="color: #800000;">"</span><span style="color: #800000;">hello.txt</span><span style="color: #800000;">"</span>)<br /><span style="color: #0000FF;">print</span>(reader.readline())<br /><span style="color: #0000FF;">print</span>(reader.readline())<br />s&nbsp;=&nbsp;pickle.dumps(reader)<br /><span style="color: #008000;">#</span><span style="color: #008000;">print(s)</span><span style="color: #008000;"><br /></span>new_reader&nbsp;=&nbsp;pickle.loads(s)<br /><span style="color: #0000FF;">print</span>(new_reader.readline())<br /><br /><span style="color: #008000;">#</span><span style="color: #008000;">&nbsp;the&nbsp;output&nbsp;is&nbsp;</span><span style="color: #008000;"><br />#</span><span style="color: #008000;">&nbsp;1:&nbsp;hello</span><span style="color: #008000;"><br />#</span><span style="color: #008000;">&nbsp;2:&nbsp;how&nbsp;are&nbsp;you</span><span style="color: #008000;"><br />#</span><span style="color: #008000;">&nbsp;3:&nbsp;goodbye</span><span style="color: #008000;"><br /></span>&nbsp; &nbsp;&nbsp;</div></div><p><br /></p><p>\u5b8c\uff01&nbsp;</p><div></div></div><p>&nbsp;</p></div><div></div></div><div id="MySignature"></div>\u000a<div class="clear"></div>\u000a<div id="blog_post_info_block">\u000a<div id="BlogPostCategory"></div>\u000a<div id="EntryTag"></div>\u000a<div id="blog_post_info">\u000a</div>\u000a<div class="clear"></div>\u000a<div id="post_next_prev"></div>\u000a</div>\u000a\u000a\u000a		</div>\u000a		<div class = "postDesc">posted @ <span id="post-date">2012-01-10 17:49</span> <a href='http://www.cnblogs.com/itech/'>iTech</a> \u9605\u8bfb(<span id="post_view_count">...</span>) \u8bc4\u8bba(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=2318293" rel="nofollow">\u7f16\u8f91</a> <a href="#" onclick="AddToWz(2318293);return false;">\u6536\u85cf</a></div>\u000a	</div>\u000a	<script type="text/javascript">var allowComments=true,cb_blogId=50245,cb_entryId=2318293,cb_blogApp=currentBlogApp,cb_blogUserGuid='caee16b0-1cf5-dd11-9e4d-001cf0cd104b',cb_entryCreatedDate='2012/1/10 17:49:00';loadViewCount(cb_entryId);</script>\u000a	\u000a</div><!--end: topics \u6587\u7ae0\u3001\u8bc4\u8bba\u5bb9\u5668-->\u000a</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>\u000a<div id='comment_form' class='commentform'>\u000a<a name='commentform'></a>\u000a<div id='divCommentShow'></div>\u000a<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>\u5237\u65b0\u8bc4\u8bba</a><a href='#' onclick='return RefreshPage();'>\u5237\u65b0\u9875\u9762</a><a href='#top'>\u8fd4\u56de\u9876\u90e8</a></div>\u000a<div id='comment_form_container'></div>\u000a<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>\u000a<div id='ad_t2'></div>\u000a<div id='opt_under_post'></div>\u000a<div id='ad_c1' class='c_ad_block'></div>\u000a<div id='under_post_news'></div>\u000a<div id='ad_c2' class='c_ad_block'></div>\u000a<div id='under_post_kb'></div>\u000a<div id='HistoryToday' class='c_ad_block'></div>\u000a<script type='text/javascript'>\u000a    fixPostBody();\u000a    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);\u000a    deliverAdT2();\u000a    deliverAdC1();\u000a    deliverAdC2();    \u000a    loadNewsAndKb();\u000a    loadBlogSignature();\u000a    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);\u000a    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);\u000a    loadOptUnderPost();\u000a    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   \u000a</script>\u000a</div>\u000a\u000a\u000a	</div><!--end: forFlow -->\u000a	</div><!--end: mainContent \u4e3b\u4f53\u5185\u5bb9\u5bb9\u5668-->\u000a\u000a	<div id="sideBar">\u000a		<div id="sideBarMain">\u000a			\u000a<!--done-->\u000a<div class="newsItem">\u000a<h3 class="catListTitle">\u516c\u544a</h3>\u000a	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>\u000a</div>\u000a\u000a			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>\u000a			\u000a			<div id="leftcontentcontainer">\u000a				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>\u000a			</div>\u000a			\u000a		</div><!--end: sideBarMain -->\u000a	</div><!--end: sideBar \u4fa7\u8fb9\u680f\u5bb9\u5668 -->\u000a	<div class="clear"></div>\u000a	</div><!--end: main -->\u000a	<div class="clear"></div>\u000a	<div id="footer">\u000a		\u000a<!--done-->\u000aCopyright &copy;2016 iTech\u000a	</div><!--end: footer -->\u000a</div><!--end: home \u81ea\u5b9a\u4e49\u7684\u6700\u5927\u5bb9\u5668 -->\u000a<!--PageEndHtml Block Begin-->\u000a<!-- JiaThis Button BEGIN -->\u000a<script type="text/javascript" src="http://v2.jiathis.com/code/jiathis_r.js?type=left&amp;btn=l8.gif" charset="utf-8"></script>\u000a<!-- JiaThis Button END -->\u000a<!--PageEndHtml Block End-->\u000a</body>\u000a</html>\u000a
p3
a.