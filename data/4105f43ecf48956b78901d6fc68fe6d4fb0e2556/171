(lp0
S'http://wiki.jerrypeng.me/learning-lisp.html'
p1
aS'Jerry\xe7\x9a\x84\xe4\xb8\xaa\xe4\xba\xba\xe7\xbb\xb4\xe5\x9f\xba'
p2
aI0
aV<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> \u000a<html xmlns="http://www.w3.org/1999/xhtml">\u000a<head> \u000a<link rel="Stylesheet" type="text/css" href="css/style.css" /> \u000a<title>Jerry\u7684\u4e2a\u4eba\u7ef4\u57fa</title> \u000a<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> \u000a</head> \u000a<body> \u000a    <div id="navbar">\u000a    	<ul>\u000a    		<li> <a href="http://jerrypeng.me">Blog</a> </li>\u000a    		<li> <a class="activated" href="index.html">WIKI</a> </li>\u000a    		<li> <a href="https://github.com/moonranger">Github</a> </li>\u000a    		<li> <a href="about.html">About</a> </li>\u000a    		<li class="search">\u000a                <form action="http://www.google.com/search" method="get">\u000a                    <input name="sitesearch" value="http://wiki.jerrypeng.me/" type="hidden" />\u000a                    <input name="hl" value="zh-CN" type="hidden" />\u000a                    <input name="ie" value="UTF-8" type="hidden" />\u000a                    <input size="25" name="q" id="query" value="Search..." type="text" \u000a                        onfocus="if( this.value=='Search...') {this.value='' };" \u000a                        onblur="if( this.value=='') {this.value='Search...' };" />\u000a                </form>\u000a            </li>\u000a    	</ul>\u000a    </div>\u000a    <div id="content">\u000a\u000a<h1 id="toc_1"> Lisp\u5165\u95e8\u7b14\u8bb0</h1>\u000a<div class="toc">\u000a<ul>\u000a<li><a href="#toc_1"> Lisp\u5165\u95e8\u7b14\u8bb0</a></li>\u000a<ul>\u000a<li><a href="#toc_1.1">1. \u8bed\u6cd5\u548c\u8bed\u4e49</a></li>\u000a<ul>\u000a<li><a href="#toc_1.1.1">1.1. S-expression</a></li>\u000a<li><a href="#toc_1.1.2">1.2. Lisp Form</a></li>\u000a<li><a href="#toc_1.1.3">1.3. Lisp\u7684\u6c42\u503c\u89c4\u5219</a></li>\u000a<ul>\u000a<li><a href="#toc_1.1.3.1">1.3.1. atom</a></li>\u000a<li><a href="#toc_1.1.3.2">1.3.2. list</a></li>\u000a</ul>\u000a<li><a href="#toc_1.1.4">1.4. \u5173\u4e8eTrue\u548cFalse</a></li>\u000a</ul>\u000a<li><a href="#toc_1.2">2. \u51fd\u6570</a></li>\u000a<ul>\u000a<li><a href="#toc_1.2.1">2.1. \u53ef\u9009\u53c2\u6570\uff08&amp;optional\uff09</a></li>\u000a<li><a href="#toc_1.2.2">2.2. \u5176\u4ed6\u53c2\u6570\uff08&amp;rest\uff09</a></li>\u000a<li><a href="#toc_1.2.3">2.3. \u5173\u952e\u5b57\u53c2\u6570\uff08&amp;key\uff09</a></li>\u000a<li><a href="#toc_1.2.4">2.4. \u591a\u79cd\u53c2\u6570\u7684\u6df7\u5408</a></li>\u000a<li><a href="#toc_1.2.5">2.5. \u51fd\u6570\u8fd4\u56de\u503c</a></li>\u000a<li><a href="#toc_1.2.6">2.6. \u9ad8\u9636\u51fd\u6570</a></li>\u000a<li><a href="#toc_1.2.7">2.7. \u533f\u540d\u51fd\u6570</a></li>\u000a</ul>\u000a<li><a href="#toc_1.3">3. \u53d8\u91cf</a></li>\u000a<ul>\u000a<li><a href="#toc_1.3.1">3.1. \u51fd\u6570\u53c2\u6570</a></li>\u000a<li><a href="#toc_1.3.2">3.2. LET\u64cd\u4f5c\u7b26</a></li>\u000a<li><a href="#toc_1.3.3">3.3. Binding Form</a></li>\u000a<li><a href="#toc_1.3.4">3.4. \u95ed\u5305(Closure)</a></li>\u000a<li><a href="#toc_1.3.5">3.5. \u52a8\u6001\u53d8\u91cf(Dynamic or Special Variables)</a></li>\u000a<li><a href="#toc_1.3.6">3.6. \u5e38\u91cf(constants)</a></li>\u000a<li><a href="#toc_1.3.7">3.7. \u8d4b\u503c</a></li>\u000a</ul>\u000a<li><a href="#toc_1.4">4. \u5b8f\uff1a\u6807\u51c6\u63a7\u5236\u7ed3\u6784</a></li>\u000a<ul>\u000a<li><a href="#toc_1.4.1">4.1. when\u548cunless</a></li>\u000a<li><a href="#toc_1.4.2">4.2. cond</a></li>\u000a<li><a href="#toc_1.4.3">4.3. and, or\u548cnot</a></li>\u000a<li><a href="#toc_1.4.4">4.4. Lisp\u4e2d\u7684\u5faa\u73af\u7ed3\u6784\u6982\u8ff0</a></li>\u000a<li><a href="#toc_1.4.5">4.5. dolist\u548cdotimes</a></li>\u000a<li><a href="#toc_1.4.6">4.6. do</a></li>\u000a<li><a href="#toc_1.4.7">4.7. \u5f3a\u5927\u7684loop</a></li>\u000a<ul>\u000a<li><a href="#toc_1.4.7.1">4.7.1. \u4e00\u4e9b\u4f8b\u5b50</a></li>\u000a</ul>\u000a</ul>\u000a<li><a href="#toc_1.5">5. \u81ea\u5b9a\u4e49\u5b8f</a></li>\u000a<ul>\u000a<li><a href="#toc_1.5.1">5.1. \u5b9a\u4e49\u5b8f\u7684\u901a\u5e38\u6b65\u9aa4</a></li>\u000a<li><a href="#toc_1.5.2">5.2. \u5b8f\u7684\u53c2\u6570</a></li>\u000a<ul>\u000a<li><a href="#toc_1.5.2.1">5.2.1. Destructuring Parameters</a></li>\u000a<li><a href="#toc_1.5.2.2">5.2.2. &amp;body</a></li>\u000a</ul>\u000a<li><a href="#toc_1.5.3">5.3. \u5b8f\u5c55\u5f00\u8868\u8fbe\u5f0f\u7684\u751f\u6210</a></li>\u000a<li><a href="#toc_1.5.4">5.4. \u5b8f\u5b9a\u4e49\u8981\u6ce8\u610f\u7684\u95ee\u9898</a></li>\u000a<li><a href="#toc_1.5.5">5.5. \u7528\u6765\u751f\u6210\u5b8f\u7684\u5b8f(macro-writing macro)</a></li>\u000a</ul>\u000a</ul>\u000a</ul>\u000a</div>\u000a<h2 id="toc_1.1">1. \u8bed\u6cd5\u548c\u8bed\u4e49</h2>\u000a<p>\u000aLisp\u8bed\u6cd5\u8bed\u4e49\u5c42\u9762\u7684\u4e1c\u897f\u771f\u7684\u5f88\u201c\u7b80\u5355\u201d\uff0cLisp\u7684\u6c42\u503c\u8fc7\u7a0b\u5305\u542b\u4e24\u6b65\uff1a\u000a</p>\u000a<ol>\u000a<li>\u000a\u6587\u672c\u7ffb\u8bd1\u6210S-expression as Lisp forms\u000a</li>\u000a<li>\u000a\u5bf9Lisp forms\u6c42\u503c\u000a</li>\u000a</ol>\u000a\u000a<h3 id="toc_1.1.1">1.1. S-expression</h3>\u000a<p>\u000a\u7531atom\u548clist\u7ec4\u6210\u7684\u8868\u8fbe\u5f0f\u000a</p>\u000a<ul>\u000a<li>\u000alist\u662f\u5305\u542b\u5728\u5c0f\u62ec\u53f7\u91cc\u7684\uff0c\u7531\u7a7a\u683c\u5206\u5f00\u7684\u4e00\u7ec4\u5143\u7d20 \u000a</li>\u000a<ul>\u000a<li>\u000alist\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u5176\u4ed6list\u6216atom\u2014\u2014\u5373list\u7684\u5143\u7d20\u4e5f\u662fS-expression\u000a</li>\u000a<li>\u000a\u8fd9\u5c31\u662f\u6570\u636e\u7ed3\u6784\u4e2d\u5b66\u5230\u8fc7\u7684\u5e7f\u4e49\u8868\u000a</li>\u000a</ul>\u000a<li>\u000aatom\u662f\u9664\u4e86list\u4ee5\u5916\u7684\u6240\u6709\u000a</li>\u000a<ul>\u000a<li>\u000aNumber, String\u000a</li>\u000a<li>\u000aSymbol\u000a</li>\u000a<li>\u000aKeyword\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.1.2">1.2. Lisp Form</h3>\u000a<p>\u000aLisp form\u662f\u5305\u542b\u8bed\u4e49\u7684S-expression\uff0c\u662f\u7b26\u5408\u4e00\u5b9a\u89c4\u5219\u7684S-expression\u3002\u000a\u4efb\u4f55atom\u548c\u7b2c\u4e00\u4e2a\u5143\u7d20\u662fsymbol\u7684list\u90fd\u662f\u5408\u6cd5\u7684Lisp form \u000a</p>\u000a\u000a<h3 id="toc_1.1.3">1.3. Lisp\u7684\u6c42\u503c\u89c4\u5219</h3>\u000a<h4 id="toc_1.1.3.1">1.3.1. atom</h4>\u000a<ul>\u000a<li>\u000aSymbol\u6c42\u503c\u5f97\u5230Symbol\u5f53\u524d\u7684\u503c\u000a</li>\u000a<li>\u000a\u5176\u4ed6atom\u672c\u8eab\u5c31\u662f\u503c\u000a</li>\u000a</ul>\u000a\u000a<h4 id="toc_1.1.3.2">1.3.2. list</h4>\u000a<ul>\u000a<li>\u000a\u51fd\u6570\u8c03\u7528\uff08function call\uff09\u000a</li>\u000a<ul>\u000a<li>\u000a\u5f62\u5982(function-name argument*)\u000a</li>\u000a<li>\u000a\u522b\u7684\u8bed\u8a00\u4e2d\u7684\u6709\u4e00\u4e9b\u8868\u8fbe\u5f0f\u5728Lisp\u91cc\u5176\u5b9e\u662f\u51fd\u6570\u8c03\u7528\u000a</li>\u000a<ul>\u000a<li>\u000a(+ 2 3)\u000a</li>\u000a<li>\u000a(* 10 10)\u000a</li>\u000a<li>\u000a\u628a+, *\u7b49\u5f53\u6210\u662f\u51fd\u6570\u540d\u5c31\u597d\u7406\u89e3\u591a\u4e86,\u4e0d\u8981\u5c06\u5176\u5f53\u4f5c\u662f\u540e\u7f00\u8868\u8fbe\u5f0f\u000a</li>\u000a</ul>\u000a</ul>\u000a<li>\u000a\u7279\u6b8a\u64cd\u4f5c\u7b26\uff08special operator\uff09\u000a</li>\u000a<ul>\u000a<li>\u000a\u5178\u578b\u7684\u5982if\uff0c\u65e0\u6cd5\u5f53\u4f5c\u51fd\u6570\u8c03\u7528\u5904\u7406\uff0c\u56e0\u4e3a\u6709\u90e8\u5206\u6c42\u503c\u7684\u9700\u8981\u000a</li>\u000a<ul>\u000a<li>\u000a(if test-form then-form [else-form]) \u000a</li>\u000a</ul>\u000a<li>\u000a\u6c42\u503c\u89c4\u5219\u56e0\u64cd\u4f5c\u7b26\u800c\u5f02\u000a</li>\u000a<li>\u000aquote\u64cd\u4f5c\u7b26\uff08\u53ef\u4ee5\u7b80\u5199\u6210\u4e00\u4e2a\u5355\u5f15\u53f7\uff1a'\uff09\u000a</li>\u000a<ul>\u000a<li>\u000a\u4e0d\u6c42\u503c\uff0c\u76f4\u63a5\u8fd4\u56de\u53c2\u6570\u000a</li>\u000a</ul>\u000a</ul>\u000a<li>\u000a\u5b8f\uff08macros\uff09\u000a</li>\u000a<ul>\u000a<li>\u000a\u4f20\u9012\u7ed9\u5b8f\u7684S-expression\u4e0d\u4f1a\u88ab\u6c42\u503c\u000a</li>\u000a<li>\u000a\u5b8f\u5904\u7406\u540e\u8fd4\u56de\u7684S-expression\u88ab\u66ff\u6362\u5230\u5b8f\u8c03\u7528\u5904\u5e76\u88ab\u6c42\u503c\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.1.4">1.4. \u5173\u4e8eTrue\u548cFalse</h3>\u000a<ul>\u000a<li>\u000a\u7b26\u53f7NIL\u662fFalse\uff0c\u5176\u4ed6\u4e00\u5207\u90fd\u662fTrue\u000a</li>\u000a<ul>\u000a<li>\u000aNIL\u65e2\u662fatom\uff0c\u53c8\u662flist\u2014\u2014\u7a7alist\u000a</li>\u000a</ul>\u000a<li>\u000a\u7b26\u53f7T\u662f\u5e38\u88ab\u7528\u6765\u8868\u8fbeTrue\u000a</li>\u000a</ul>\u000a\u000a<h2 id="toc_1.2">2. \u51fd\u6570</h2>\u000a<h3 id="toc_1.2.1">2.1. \u53ef\u9009\u53c2\u6570\uff08&amp;optional\uff09</h3>\u000a<ul>\u000a<li>\u000a\u53c2\u6570\u5217\u8868\u4e2d&amp;optional\u540e\u9762\u7684\u53c2\u6570\u90fd\u662f\u53ef\u9009\u7684\uff0c\u4f46\u4ecd\u7136\u6309\u7167\u987a\u5e8f\u5339\u914d\u000a</li>\u000a<li>\u000a\u53ef\u9009\u53c2\u6570\u7684\u9ed8\u8ba4\u503c\u662fNIL\u000a</li>\u000a<li>\u000a\u53ef\u4ee5\u5c06\u53c2\u6570\u5199\u6210\u4e8c\u5143\u7ec4\u6765\u6307\u5b9a\u9ed8\u8ba4\u503c\u000a</li>\u000a<ul>\u000a<li>\u000a\u9ed8\u8ba4\u503c\u53ef\u4ee5\u5f15\u7528\u524d\u9762\u51fa\u73b0\u8fc7\u7684\u53c2\u6570\u000a</li>\u000a</ul>\u000a<li>\u000a\u53ef\u4ee5\u5199\u6210\u4e09\u5143\u7ec4\uff0c\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u8be5\u53c2\u6570\u7684\u503c\u662f\u5426\u4e3a\u9ed8\u8ba4\u503c\u000a</li>\u000a<ul>\u000a<li>\u000a\u6b64\u53d8\u91cf\u901a\u5e38\u7684\u547d\u540d\u89c4\u5219\u662f\u53c2\u6570\u540d\u540e\u52a0\u4e0a-supplied-p\u000a<pre class="brush: lisp;">\u000a(defun make-rectangle \u000a    (width &amp;optional (height width height-supplied-p))\u000a    ...)\u000a</pre>\u000a</li>\u000a</ul>\u000a</ul>\u000a<h3 id="toc_1.2.2">2.2. \u5176\u4ed6\u53c2\u6570\uff08&amp;rest\uff09</h3>\u000a<ul>\u000a<li>\u000a\u7c7b\u4f3cPython\u7684*args\u000a</li>\u000a<li>\u000a\u5305\u542b\u6240\u6709\u5176\u4ed6\u53c2\u6570\u7684\u5217\u8868\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.2.3">2.3. \u5173\u952e\u5b57\u53c2\u6570\uff08&amp;key\uff09</h3>\u000a<ul>\u000a<li>\u000a\u5728\u51fd\u6570\u5b9a\u4e49\u5904\u7684\u5199\u6cd5\u548c&amp;optional\u4e00\u6837\u000a</li>\u000a<li>\u000a\u8c03\u7528\u51fd\u6570\u7684\u5730\u65b9\u5fc5\u987b\u52a0\u4e0a\u540c\u540d\u7684\u5b57\u9762\u5e38\u91cf\uff08\u5192\u53f7\u5f00\u5934\uff09\u000a<pre class="brush: lisp;">\u000a(defun hello (&amp;key a b c)\u000a    ...)\u000a(hello :a "a-value")\u000a(hello :b 100)\u000a</pre>\u000a</li>\u000a<li>\u000a\u53ef\u4ee5\u6539\u53d8\u5173\u952e\u5b57\u7684\u503c\uff1a\u5c06\u53c2\u6570\u540d\u66ff\u6362\u6210\u4e00\u4e2a\u4e8c\u5143\u7ec4\uff0c\u524d\u9762\u662f\u5173\u952e\u5b57\uff0c\u540e\u9762\u662f\u53c2\u6570\u540d\u000a<pre class="brush: lisp;">\u000a(defun foo \u000a    (&amp;key ((:apple a)) ((:box b) 0) ((:charlie c) 0 c-supplied-p))\u000a    (list a b c c-supplied-p))\u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.2.4">2.4. \u591a\u79cd\u53c2\u6570\u7684\u6df7\u5408</h3>\u000a<ul>\u000a<li>\u000a\u5e94\u8be5\u6309\u7167required\uff0coptional\uff0crest\uff0ckey\u7684\u987a\u5e8f\u5b9a\u4e49\u000a</li>\u000a<li>\u000a\u4e0d\u8981\u5c06optional\u548ckey\u6df7\u7528\uff0c\u4f1a\u5e26\u6765\u4e00\u4e9b\u610f\u6599\u4e4b\u5916\u7684\u9519\u8bef\u000a</li>\u000a<li>\u000arest\u548ckey\u6df7\u7528\uff0c\u53c2\u6570\u4f1a\u88ab\u4e24\u8005\u90fd\u6536\u96c6\u5230\u3002\u000a<pre class="brush: lisp;">\u000a(defun foo (&amp;rest rest &amp;key a b c) (list rest a b c))\u000a(foo :a 1 :b 2 :c 3)  ==&gt; ((:A 1 :B 2 :C 3) 1 2 3)\u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.2.5">2.5. \u51fd\u6570\u8fd4\u56de\u503c</h3>\u000a<ul>\u000a<li>\u000a\u7528RETURN-FROM\u6765\u4ece\u51fd\u6570\u4f53\u4e2d\u8fd4\u56de\u000a</li>\u000a<ul>\u000a<li>\u000a\u9700\u8981\u663e\u5f0f\u5e26\u4e0a\u51fd\u6570\u540d\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.2.6">2.6. \u9ad8\u9636\u51fd\u6570</h3>\u000a<ul>\u000a<li>\u000a\u7528function\u64cd\u4f5c\u7b26\u6765\u83b7\u53d6\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\u000a</li>\u000a<ul>\u000a<li>\u000a\u7b80\u5199#'\u000a</li>\u000a</ul>\u000a<li>\u000a\u7528FUNCALL\u548cAPPLY\u6765\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u000a</li>\u000a<ul>\u000a<li>\u000aFUNCALL\u548c\u76f4\u63a5\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u5dee\u4e0d\u591a\uff0c\u9700\u8981\u663e\u5f0f\u6307\u5b9a\u53c2\u6570\u000a</li>\u000a<li>\u000aAPPLY\u53ef\u4ee5\u5c06\u5217\u8868\u5c55\u5f00\u6210\u4e3a\u53c2\u6570\u4f20\u9012\u8fdb\u51fd\u6570\u000a</li>\u000a<ul>\u000a<li>\u000a\u7c7b\u4f3cPython\u91ccfoobar(*args)\u8fd9\u79cd\u7528\u6cd5\u000a</li>\u000a<li>\u000a\u53ef\u4ee5\u6df7\u7528\u4e24\u79cd\u53c2\u6570\u4f20\u9012\u65b9\u6cd5\u000a<pre class="brush: lisp;">\u000a(defun plot (fn min max step)\u000a  (loop for i from min to max by step do\u000a        (loop repeat (funcall fn i) do (format t "*"))\u000a        (format t "~%")))\u000a(apply #'plot #'exp plot-data) ;#'exp\u662f\u7b2c\u4e00\u4e2a\u53c2\u6570fn\uff0c\u5176\u4ed6\u53c2\u6570\u5219\u7531plot-data\u5c55\u5f00\u5f97\u5230\u000a</pre>\u000a</li>\u000a</ul>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.2.7">2.7. \u533f\u540d\u51fd\u6570</h3>\u000a<ul>\u000a<li>\u000a\u533f\u540d\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u201c\u95ed\u5305\u201d\u000a</li>\u000a<li>\u000a\u6240\u8c13\u7684\u201c\u95ed\u5305\u201d\u662f\u6307\u8fd9\u6837\u7684\u51fd\u6570\u53ef\u4ee5\u90e8\u5206\u5730\u6355\u83b7\u5176\u521b\u5efa\u5904\u7684\u73af\u5883\uff08\u5c40\u90e8\u53d8\u91cf\u7b49\uff09\u000a</li>\u000a<ul>\u000a<li>\u000a\u8be6\u89c1\u53d8\u91cf\u90e8\u5206\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h2 id="toc_1.3">3. \u53d8\u91cf</h2>\u000a<h3 id="toc_1.3.1">3.1. \u51fd\u6570\u53c2\u6570</h3>\u000a<p>\u000a\u6bcf\u6b21\u8c03\u7528\u65f6\u7ed1\u5b9a\u7684\u5c40\u90e8\u53d8\u91cf\u000a</p>\u000a\u000a<h3 id="toc_1.3.2">3.2. LET\u64cd\u4f5c\u7b26</h3>\u000a<p>\u000a\u57fa\u672c\u5f62\u5f0f\u5982\u4e0b\uff1a\u000a</p>\u000a<pre class="brush: lisp;">\u000a(let (variable*)\u000a  body-form*)\u000a</pre>\u000a<ul>\u000a<li>\u000avariable\u90e8\u5206\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u53d8\u91cf\u53ca\u5176\u521d\u59cb\u503c\uff08\u9ed8\u8ba4\u662fNIL\uff09\u000a</li>\u000a<li>\u000abody-form\u662f\u8fd9\u4e9b\u53d8\u91cf\u4f5c\u7528\u57df\u5185\u7684\u8bed\u53e5\u000a</li>\u000a<li>\u000alet\u53ef\u4ee5\u5d4c\u5957\uff0c\u5982\u679c\u6709\u540c\u540d\u53d8\u91cf\uff0c\u4ee5form\u6700\u9760\u8fd1\u7684let\u4e3a\u51c6\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.3.3">3.3. Binding Form</h3>\u000a<p>\u000adefun\uff0clet\uff0cdotimes\u7b49\u5305\u542b\u53c2\u6570\u4ee5\u53cabody\u7684form\u90fd\u88ab\u6210\u4e3abinding form\u3002\u000abinding form\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u53ea\u5728\u5bf9\u5e94\u7684body\u4e2d\u6709\u6548\u3002\u8fd9\u4e2a\u89c4\u5219\u5728\u5176\u4ed6\u5927\u90e8\u5206\u7f16\u7a0b\u8bed\u8a00\u5982Python\uff0cJava\u7b49\u90fd\u4e00\u6837\u3002\u000a</p>\u000a\u000a<h3 id="toc_1.3.4">3.4. \u95ed\u5305(Closure)</h3>\u000a<p>\u000a\u7b80\u800c\u8a00\u4e4b\u5c31\u662f\u5d4c\u5957\u7684\u51fd\u6570\u53ef\u4ee5\u6355\u6349\u5176\u6240\u5728\u7684lexical scope\u7684\u4e0a\u4e0b\u6587\u73af\u5883\uff0c\u4f7f\u5176\u548c\u51fd\u6570\u7ed1\u5b9a\uff0c\u5e76\u5728\u000a\u8d85\u51fa\u76f8\u5e94\u7684scope\u4ee5\u540e\uff08\u6bd4\u5982\u5916\u5c42\u51fd\u6570\u8fd4\u56de\u4ee5\u540e\uff09\u4ecd\u7136\u6709\u6548\u3002\u000a</p>\u000a<ul>\u000a<li>\u000a\u6240\u4ee5\u628a\u95ed\u5305\u548c\u533f\u540d\u51fd\u6570\u7b49\u540c\u662f\u4e0d\u5bf9\u7684\u2026\u2026\u000a</li>\u000a</ul>\u000a<p>\u000a\u53e6\u5916\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6355\u6349\u5230\u7684\u662fcontext\uff0c\u800c\u4e0d\u662f\u53d8\u91cf\u7684\u503c\u3002\u000a</p>\u000a\u000a<h3 id="toc_1.3.5">3.5. \u52a8\u6001\u53d8\u91cf(Dynamic or Special Variables)</h3>\u000a<ul>\u000a<li>\u000a\u53d8\u91cf\u76f8\u5f53\u4e8e\u5176\u4ed6\u8bed\u8a00\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u4f46\u66f4\u597d\u7528\u4e5f\u66f4\u5bb9\u6613\u7ba1\u7406\uff08we'll see\uff09\u000a</li>\u000a<li>\u000a\u7528defvar\u548cdefparameter\u6765\u5b9a\u4e49\u52a8\u6001\u53d8\u91cf\u000a<pre class="brush: lisp;">\u000a(defvar *count* 0\u000a  "Count of widgets made so far.")\u000a\u000a(defparameter *gap-tolerance* 0.001\u000a  "Tolerance to be allowed in widget gaps.")\u000a</pre>\u000a</li>\u000a<li>\u000a\u901a\u5e38\u7684\u547d\u540d\u89c4\u5219\u662f\u524d\u540e\u90fd\u52a0\u4e0a*\uff08\u5f88\u91cd\u8981\uff01\uff09\u000a</li>\u000a<li>\u000adefvar\u548cdefparameter\u7684\u533a\u522b\u5728\u4e8e\u524d\u8005\u53ea\u5728\u68c0\u67e5\u5230\u53d8\u91cf\u672a\u7ed1\u5b9a\u65f6\u624d\u8d4b\u4e88\u521d\u503c\uff0c\u800c\u540e\u8005\u603b\u662f\u8d4b\u4e88\u521d\u503c\u3002\u000a<pre class="brush: lisp;">\u000a(defvar *a* 1)\u000a(defvar *a* 3)\u000a*a* ;\u7ed3\u679c\u662f1\u000a(defparameter *b* 1)\u000a(defparameter *b* 3)\u000a*b* ;\u7ed3\u679c\u662f3\u000a</pre>\u000a</li>\u000a<li>\u000a\u79f0\u4e4b\u4e3a\u52a8\u6001\u53d8\u91cf\u7684\u91cd\u8981\u539f\u56e0\u662f\u53ef\u4ee5\u5bf9\u5176\u505arebind\uff0c\u5728\u4e00\u4e2ascope\u5185\u6539\u53d8\u5b83\u7684\u503c\uff0c\u800c\u5728\u51fa\u4e86\u8be5scope\u4ee5\u540e\u6062\u590d\u539f\u6765\u7684\u7ed1\u5b9a\u3002\u000a</li>\u000a<ul>\u000a<li>\u000a\u7ed1\u5b9a\u50cf\u662f\u4e00\u4e2a\u5806\u6808\uff0c\u603b\u662f\u4f7f\u7528\u6808\u9876\u7684\u7ed1\u5b9a \u000a</li>\u000a<li>\u000a\u6539\u53d8\u5f53\u524d\u7ed1\u5b9a\u4e0b\u7684\u503c\u4e0d\u4f1a\u5f71\u54cd\u5230\u4e0a\u5c42/\u4e0b\u5c42\u7ed1\u5b9a\u000a<pre class="brush: lisp;">\u000a(defvar *val* 10)\u000a(defun print_val () (format t "Value is: ~d~%" *val*))\u000a(print_val)\u000a(let ((*val* 20)) (print_val))\u000a(print_val)\u000a</pre>\u000a</li>\u000a<li>\u000a\u8fd0\u884c\u7ed3\u679c\uff1a\u000a<pre class="brush: plain;">\u000aValue is: 10\u000aValue is: 20\u000aValue is: 10\u000a</pre>\u000a</li>\u000a</ul>\u000a<li>\u000a\u4efb\u4f55\u9700\u8981\u53d8\u91cf\u7ed1\u5b9a\u7684\u5730\u65b9\u90fd\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u53d8\u91cf\uff1alet\uff0c\u51fd\u6570\u53c2\u6570\u7b49\u7b49\u3002\u000a</li>\u000a<ul>\u000a<li>\u000a\u6240\u4ee5\u547d\u540d\u5f88\u91cd\u8981\uff0c\u5fc5\u987b\u8981\u5728\u524d\u540e\u52a0\u4e0a*\u000a<pre class="brush: plain;">\u000aThis means whenever you use such a name in a binding form--in a LET or as a function parameter \u000aor any other construct that creates a new variable binding--the binding that's created will \u000abe a dynamic binding. \u000a</pre>\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.3.6">3.6. \u5e38\u91cf(constants)</h3>\u000a<ul>\u000a<li>\u000a\u7528defconstant\u6765\u5b9a\u4e49\u5e38\u91cf\u000a</li>\u000a<li>\u000a\u547d\u540d\u98ce\u683c\u662f\u524d\u540e\u52a0\u4e0a+\uff08\u4f46\u4e0d\u50cf\u52a8\u6001\u53d8\u91cf\u7684\u547d\u540d\u89c4\u5219\u90a3\u6837\u6d41\u884c\uff09\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.3.7">3.7. \u8d4b\u503c</h3>\u000a<ul>\u000a<li>\u000a\u901a\u7528\u7684\u8d4b\u503c\u64cd\u4f5c\u7b26\uff1asetf\u000a</li>\u000a<li>\u000a\u53ef\u4ee5\u5bf9\u5c40\u90e8\u53d8\u91cf\u548c\u52a8\u6001\u53d8\u91cf\u4f7f\u7528\uff0c\u4e14\u53ea\u5f71\u54cd\u5f53\u524d\u7ed1\u5b9a\u000a</li>\u000a<li>\u000a\u8981\u8d4b\u4e88\u7684\u503c\u540c\u65f6\u4e5f\u662fsetf\u64cd\u4f5c\u7b26\u7684\u8fd4\u56de\u503c\u000a</li>\u000a<li>\u000asetf\u53ef\u4ee5\u540c\u65f6\u5bf9\u591a\u4e2a\u53d8\u91cf\u8d4b\u503c\u000a</li>\u000a<ul>\u000a<li>\u000a\u8fd9\u79cd\u60c5\u51b5setf\u7684\u8fd4\u56de\u503c\u662f\u6700\u540e\u4e00\u4e2a\u53d8\u91cf\u7684\u503c\u000a<pre class="brush: lisp;">\u000a(let (a b)\u000a  (format t "setf a and b: ~d~%" (setf a 1 b 2)))\u000a</pre>\u000a</li>\u000a<li>\u000a\u8fd0\u884c\u7ed3\u679c\uff1a\u000a<pre class="brush: plain;">\u000asetf a and b: 2\u000a</pre>\u000a</li>\u000a</ul>\u000a<li>\u000asetf\u5c31\u50cf\u5176\u4ed6\u8bed\u8a00\u7684\u8d4b\u503c\u64cd\u4f5c\u7b26=\uff0c\u80fd\u7528\u5728\u51e0\u4e4e\u6240\u6709\u9700\u8981\u590d\u5236\u7684\u5730\u65b9\u000a</li>\u000a<ul>\u000a<li>\u000a\u6570\u7ec4\uff0c\u54c8\u5e0c\u8868\u000a</li>\u000a</ul>\u000a<li>\u000a\u7528\u4e8e\u8d4b\u503c\u7684\uff0c\u57fa\u4e8esetf\u7684\u5176\u4ed6\u5b8f\uff1a\u000a</li>\u000a<ul>\u000a<li>\u000aincf, decf\u81ea\u589e\uff0c\u81ea\u51cf\u000a</li>\u000a<li>\u000arotatef\u4ea4\u6362\u53d8\u91cf\u7684\u503c\u000a</li>\u000a<li>\u000ashiftf\u4ece\u53f3\u5230\u5de6\u79fb\u52a8\u53d8\u91cf\u7684\u503c\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h2 id="toc_1.4">4. \u5b8f\uff1a\u6807\u51c6\u63a7\u5236\u7ed3\u6784</h2>\u000a<h3 id="toc_1.4.1">4.1. when\u548cunless</h3>\u000a<ul>\u000a<li>\u000a\u76f8\u5f53\u4e8e\u5176\u4ed6\u8bed\u8a00\u7684if\u548cif not\u000a</li>\u000a<li>\u000a\u89e3\u51b3if\u7684then\u548celse\u90e8\u5206\u53ea\u80fd\u5305\u542b\u5355\u4e00form\u7684\u95ee\u9898\u000a<pre class="brush: lisp;">\u000a(defmacro when (condition &amp;rest body)\u000a  `(if ,condition (progn ,@body)))\u000a  \u000a(defmacro unless (condition &amp;rest body)\u000a  `(if (not ,condition) (progn ,@body)))\u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.2">4.2. cond</h3>\u000a<ul>\u000a<li>\u000a\u89e3\u51b3\u5d4c\u5957if\u7684ugly\u5199\u6cd5\u000a</li>\u000a<li>\u000a\u57fa\u672c\u5f62\u5f0f\u5982\u4e0b\uff1a\u000a<pre class="brush: lisp;">\u000a(cond (a (do-x))\u000a      (b (do-y))\u000a      (t (do-z)))\u000a</pre>\u000a</li>\u000a<li>\u000a\u5d4c\u5957if\u4e2d\u6700\u540e\u4e00\u4e2aelse\u5728cond\u4e2d\u901a\u5e38\u8868\u73b0\u4e3a\u4e00\u4e2aT\u52a0\u5bf9\u5e94\u7684\u8868\u8fbe\u5f0f\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.3">4.3. and, or\u548cnot</h3>\u000a<ul>\u000a<li>\u000aand, or\u662f\u5b8f\uff0cnot\u5176\u5b9e\u662f\u51fd\u6570\u000a</li>\u000a<li>\u000aand\u548cor\u652f\u6301\u77ed\u8def\u6c42\u503c\u000a</li>\u000a<ul>\u000a<li>\u000aand\u5728\u9047\u5230\u7b2c\u4e00\u4e2aNIL\u65f6\u505c\u6b62\u6c42\u503c\u5e76\u8fd4\u56deNIL\uff0c\u6240\u6709\u90fd\u975eNIL\u5219\u8fd4\u56de\u6700\u540e\u4e00\u4e2aform\u7684\u503c\u000a</li>\u000a<li>\u000aor\u5728\u9047\u5230\u7b2c\u4e00\u4e2a\u975eNIL\u65f6\u505c\u6b62\u6c42\u503c\u5e76\u8fd4\u56de\u5bf9\u5e94form\u7684\u503c\uff0c\u6240\u6709\u7684\u90fd\u662fNIL\u5219\u8fd4\u56deNIL\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.4">4.4. Lisp\u4e2d\u7684\u5faa\u73af\u7ed3\u6784\u6982\u8ff0</h3>\u000a<ul>\u000a<li>\u000a\u8bed\u8a00\u6838\u5fc3\u53ea\u6709\u57fa\u672c\u7684\u8df3\u8f6c\u64cd\u4f5c\u7b26\u000a</li>\u000a<li>\u000a\u6784\u5efa\u5728\u6838\u5fc3\u4e0a\u7684\u57fa\u7840\u5faa\u73af\u7ed3\u6784do\u000a</li>\u000a<li>\u000a\u6784\u5efa\u5728do\u4e4b\u4e0a\u7684\u6709dolist\u548cdotimes\uff0c\u4e00\u4e2a\u7528\u6765\u904d\u5386\u5217\u8868\uff0c\u4e00\u4e2a\u7528\u6765\u505a\u8ba1\u6570\u5faa\u73af\u000a</li>\u000a<li>\u000aloop\uff0c\u6709\u4eba\u6068\u6709\u4eba\u7231\uff0c\u51e0\u4e4e\u53ef\u4ee5\u6210\u4e3a\u4e00\u4e2a\u8ff7\u4f60\u8bed\u8a00\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.5">4.5. dolist\u548cdotimes</h3>\u000a<ul>\u000a<li>\u000adolist\u904d\u5386\u5217\u8868\uff0c\u5c06\u5217\u8868\u7684\u5143\u7d20\u7ed1\u5b9a\u5230\u6307\u5b9a\u53d8\u91cf\u4e0a\u5e76\u6267\u884cbody form\u000a<pre class="brush: lisp;">\u000a(dolist (var list-form)\u000a  body-form*)\u000a</pre>\u000a</li>\u000a<li>\u000adolist\u7684\u8fd4\u56de\u503c\u662fNIL\u000a</li>\u000a<li>\u000adotimes\u5c060\u5230count-1\u7ed1\u5b9a\u5230\u6307\u5b9a\u7684\u53d8\u91cf\u4e0a\u5e76\u6267\u884cbody form\u000a<pre class="brush: lisp;">\u000a(dotimes (var count-form)\u000a  body-form*)\u000a</pre>\u000a</li>\u000a<li>\u000a\u53ef\u4ee5\u7528return\u4ecedolist\u548cdotimes\u4e2d\u8fd4\u56de\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.6">4.6. do</h3>\u000a<p>\u000ado\u5faa\u73af\u7c7b\u4f3c\u5176\u4ed6\u8bed\u8a00\u91cc\u7684for\u5faa\u73af\uff0c\u53ef\u4ee5\u5b9a\u4e49\u53d8\u91cf\u7684\u521d\u503c\uff0c\u5faa\u73af\u7684\u6d4b\u8bd5\u6761\u4ef6\u4ee5\u53ca\u53d8\u91cf\u7684\u66f4\u65b0\u8bed\u53e5\uff0c\u000a\u4f46\u662fdo\u66f4\u5f3a\u5927\u5e76\u4e14\u770b\u8d77\u6765\u4e5f\u66f4\u590d\u6742\u3002\u000ado\u7684\u7ed3\u6784\u662f\u8fd9\u6837\u7684\uff1a\u000a</p>\u000a<pre class="brush: lisp;">\u000a(do (variable-definition*)\u000a    (end-test-form result-form*)\u000a  statement*)\u000a</pre>\u000a\u000a<p>\u000a\u5176\u4e2dvariable-definition\u90e8\u5206\u5b9a\u4e49\u53d8\u91cf\u53ca\u5176\u521d\u503c\u3001\u6b65\u957f\u3002\u8fd9\u90e8\u5206\u7684\u89c4\u5219\u662f\uff1a\u000a</p>\u000a<pre class="brush: lisp;">\u000a(var init-form step-form)\u000a</pre>\u000a<ul>\u000a<li>\u000ainit-form\u662f\u5728do\u5f00\u59cb\u7684\u65f6\u5019\u6c42\u503c\u5e76\u7ed1\u5b9a\u7ed9\u5bf9\u5e94\u53d8\u91cf\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u53d8\u91cf\u7684\u503c\u662fNIL\u000a</li>\u000a<li>\u000astep-form\u5728\u6bcf\u4e00\u6b21\u5faa\u73af\u7ed3\u675f\u540e\u6c42\u503c\uff0c \u5176\u7ed3\u679c\u4f1a\u88ab\u8d4b\u503c\u7ed9\u5bf9\u5e94\u53d8\u91cf\u000a</li>\u000a<li>\u000astep-form\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u53d8\u91cf\u7684\u503c\u4e0d\u4f1a\u88abdo\u6539\u53d8\uff0c\u4f46\u662fbody-form\u91cc\u53ef\u4ee5\u6539\u53d8\u53d8\u91cf\u7684\u503c\u000a</li>\u000a</ul>\u000a\u000a<p>\u000a\u6bcf\u6b21\u5faa\u73af\u5f00\u59cb\uff0c\u53d8\u91cf\u88ab\u8d4b\u4e88\u503c\u4ee5\u540e\uff0cend-test-form\u4f1a\u88ab\u6c42\u503c\uff0c\u5982\u679c\u7ed3\u679c\u662fNIL\uff0c\u5faa\u73af\u7ee7\u7eed\uff0c\u000a\u6309\u987a\u5e8f\u6c42\u503cstatement\u90e8\u5206\u7684form\uff1b\u5982\u679c\u7ed3\u679c\u4e0d\u662fNIL\uff0cresult-form\u4f1a\u88ab\u6c42\u503c\uff0c\u000a\u5176\u7ed3\u679c\u4f1a\u88ab\u4f5c\u4e3ado\u7684\u8fd4\u56de\u503c\uff0c\u540c\u65f6do\u7ed3\u675f\u3002\u000a</p>\u000a\u000a<p>\u000ado\u7684\u7ed3\u6784\u8ba9\u4eba\u770b\u7740\u5341\u5206\u773c\u6655\uff0c\u4e00\u5b9a\u8981\u770b\u6e05\u695a\u62ec\u53f7\u2026\u2026\u2026\u2026\u2026\u2026\u000a</p>\u000a\u000a<p>\u000ado\u7684\u51e0\u4e2a\u7b80\u5355\u4f8b\u5b50\uff08\u6458\u81eaPractical Common Lisp\uff09\u000a</p>\u000a<ul>\u000a<li>\u000a\u6ca1\u6709body-form\u7684\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8ba1\u7b97\u8868\u8fbe\u5f0f\u000a<pre class="brush: lisp;">\u000a(do ((n 0 (1+ n))\u000a     (cur 0 next)\u000a          (next 1 (+ cur next)))\u000a    ((= 10 n) cur))\u000a</pre>\u000a</li>\u000a<li>\u000a\u6ca1\u6709\u7ed1\u5b9a\u4efb\u4f55\u53d8\u91cf\u7684do\u5faa\u73af(\u7c7b\u4f3c\u5176\u4ed6\u8bed\u8a00while\u7684\u7528\u6cd5\uff1f)\u000a<pre class="brush: lisp;">\u000a(do ()\u000a    ((&gt; (get-universal-time) *some-future-date*))\u000a  (format t "Waiting~%")\u000a  (sleep 60)) \u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.4.7">4.7. \u5f3a\u5927\u7684loop</h3>\u000a<p>\u000aloop\u5b8f\u5b9a\u4e49\u4e86\u4e00\u5957\u76f8\u5bf9\u72ec\u7acb\u7684\u8ff7\u4f60\u8bed\u8a00\uff0c\u7528\u975e\u5e38\u5bb9\u6613\u7406\u89e3\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u590d\u6742\u7684\u5faa\u73af\u884c\u4e3a\u3002\u000a</p>\u000a<ul>\u000a<li>\u000aPython\u7684\u5217\u8868\u89e3\u6790\u516b\u6210\u4eceLisp\u7684loop\u5b8f\u6284\u7684\u000a<pre class="brush: lisp;">\u000a(loop for i from 1 to 10 collecting i) ==&gt; (1 2 3 4 5 6 7 8 9 10)\u000a</pre>\u000a</li>\u000a<li>\u000a\u5728Lisper\u4e2d\u6709\u4eba\u7231\uff0c\u6709\u4eba\u6068\u000a</li>\u000a<ul>\u000a<li>\u000a\u6068\u4ed6\u7684\u7406\u7531\u662f\u4e0d\u591fLispy\uff08\u62ec\u53f7\u4e0d\u591f\u591a\u2026\u2026\uff09\u000a</li>\u000a</ul>\u000a</ul>\u000a<h4 id="toc_1.4.7.1">4.7.1. \u4e00\u4e9b\u4f8b\u5b50</h4>\u000a<ul>\u000a<li>\u000a\u8ba1\u7b97\u4e00\u53e5\u8bdd\u4e2d\u5143\u97f3\u5b57\u6bcd\uff08aeiou\uff09\u7684\u6570\u91cf\u000a<pre class="brush: lisp;">\u000a(loop for x across "the quick brown fox jumps over the lazy dog"\u000a      counting (find x "aeiou")) ==&gt; 11\u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<ul>\u000a<li>\u000a\u8ba1\u7b97\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7b2c11\u4e2a\u5143\u7d20\u000a<pre class="brush: lisp;">\u000a(loop for i below 10\u000a      and a = 0 then b\u000a      and b = 1 then (+ b a)\u000a      finally (return  a))\u000a</pre>\u000a</li>\u000a</ul>\u000a\u000a<h2 id="toc_1.5">5. \u81ea\u5b9a\u4e49\u5b8f</h2>\u000a<p>\u000a\u5b8f\u662f\u7528\u6765\u4ea7\u751f\u4ee3\u7801\u7684\u51fd\u6570\uff0c\u5b83\u5728\u7f16\u8bd1\u671f\u95f4\u8fd0\u884c\uff08\u5b8f\u5c55\u5f00\uff09\u3002\u53ea\u6709\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\u6240\u6709\u7684\u5b8f\u90fd\u88ab\u5c55\u5f00\u4e86\uff0c\u4ea7\u751f\u7684\u4e2d\u95f4\u4ee3\u7801\u90fd\u88ab\u7f16\u8bd1\u4e86\uff0c\u000a\u624d\u80fd\u8fdb\u5165\u7a0b\u5e8f\u5b9e\u9645\u7684\u8fd0\u884c\u671f\u3002\u56e0\u6b64\uff0c\u5728\u5b8f\u5c55\u5f00\u7684\u65f6\u5019\u662f\u65e0\u6cd5\u8bbf\u95ee\u53ea\u6709\u8fd0\u884c\u671f\u624d\u5b58\u5728\u7684\u6570\u636e\u3002\u000a</p>\u000a\u000a<p>\u000a\u5173\u4e8e\u5b8f\u6700\u6838\u5fc3\u7684\u662f\uff1a*<strong>\u7f16\u8bd1\u5668\u5c06\u672a\u6c42\u503c\u7684Lisp form\uff08\u4ee3\u7801\uff09\u4f20\u7ed9\u5b8f\uff0c\u5b8f\u8fd4\u56de\u7684\u5904\u7406\u8fc7\u7684Lisp form\uff08\u4ee3\u7801\uff09</strong>*\u000a</p>\u000a\u000a<h3 id="toc_1.5.1">5.1. \u5b9a\u4e49\u5b8f\u7684\u901a\u5e38\u6b65\u9aa4</h3>\u000a<ol>\u000a<li>\u000a\u8bc6\u522b\u51fa\u91cd\u590d\u4ee3\u7801\uff0c\u5e76\u60f3\u51fa\u6765\u7528\u5b8f\u6765\u66ff\u4ee3\u7684\u65b9\u5f0f\u000a</li>\u000a<li>\u000a\u5199\u51fa\u4e00\u4e2a\u5b8f\u8c03\u7528\u7684\u4f8b\u5b50\uff0c\u5e76\u5199\u51fa\u5176\u5c55\u5f00\u540e\u7684\u6837\u5b50\u000a</li>\u000a<li>\u000a\u6839\u636e\u8fd9\u4e2a\u4f8b\u5b50\u6765\u5199\u5b8f\u7684\u5b9e\u73b0\u000a</li>\u000a<li>\u000a\u786e\u4fdd\u5b8f\u5e26\u6765\u7684\u62bd\u8c61\u4e0d\u4f1a\u6cc4\u6f0f\u000a</li>\u000a</ol>\u000a\u000a<h3 id="toc_1.5.2">5.2. \u5b8f\u7684\u53c2\u6570</h3>\u000a<h4 id="toc_1.5.2.1">5.2.1. Destructuring Parameters</h4>\u000a<p>\u000a\u9664\u4e86\u652f\u6301\u548c\u666e\u901a\u51fd\u6570\u4e00\u6837\u7684\u53c2\u6570\u5199\u6cd5\uff0c\u5b8f\u8fd8\u652f\u6301destructuring parameters\u3002\u000adestructuring parameter\u6709\u70b9\u7c7b\u4f3cPython\u91cc\u7684\u5143\u7ec4\u5c55\u5f00\u3002\u000a\u5047\u5982\u6709\u4ee5\u4e0b\u5b8f\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4ee3\u8868\u6761\u4ef6\u7684\u4e00\u4e2aLisp form\uff08\u5c31\u662f\u4e00\u4e2alist\uff09\u3002\u000a\u5728\u5b8f\u7684body\u91cc\u53ef\u80fd\u9700\u8981\u4ece\u8fd9\u4e2alist\u91cc\u63d0\u53d6\u4e0d\u540c\u7684\u90e8\u5206\u800c\u4e0d\u662f\u5c06\u5176\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e3a\u4e86\u65b9\u4fbf\u5b8f\u7684\u7f16\u5199\uff0c\u000a\u53ef\u4ee5\u628acondition\u66ff\u6362\u6210destructuring parameter\u7684\u5199\u6cd5\uff0c\u7701\u53bb\u4e86\u5728body\u4e2d\u7528first\uff0csecond\u4e4b\u7c7b\u7684\u64cd\u4f5c\u7b26\u6765\u83b7\u53d6form\u4e2d\u7684\u5143\u7d20\u3002\u000a</p>\u000a<pre class="brush: lisp;">\u000a(defmacro foobar (condition &amp;rest body)\u000a  ...)\u000a</pre>\u000a<p>\u000a\u53ef\u4ee5\u66ff\u6362\u6210\u5982\u4e0b\u5199\u6cd5\uff1a\u000a</p>\u000a<pre class="brush: lisp;">\u000a(defmacro foobar ((op val1 val2) &amp;rest body)\u000a  ...)\u000a</pre>\u000a<p>\u000a\u5176\u4e2dop, val1, val2\u5206\u522b\u7ed1\u5b9a\u5230\u4e86condition form\u7684\u7b2c\u4e00\u3001\u7b2c\u4e8c\u548c\u7b2c\u4e09\u4e2a\u5143\u7d20\u4e0a\u4e86\u3002\u000a\u95ed\u7740\u773c\u775b\u90fd\u80fd\u60f3\u8c61\uff0cdestructuring parameters\u53ef\u4ee5\u6781\u5927\u7b80\u5316\u5b8f\u7684\u7f16\u5199\u3002\u000a</p>\u000a\u000a<p>\u000adestructuring parameters\u7684\u53e6\u4e00\u4e2a\u597d\u5904\u662f\u5b83\u65e0\u5f62\u4e2d\u7ed9\u5b8f\u7684\u5bf9\u5e94\u53c2\u6570\u591a\u52a0\u4e86\u4e00\u4e2a\u7ea6\u675f\uff1a\u5373\u5bf9\u5e94\u7684form\u91cc\u7684\u5143\u7d20\u4e2a\u6570\u3002\u000a\u5728\u5b8f\u5c55\u5f00\u7684\u65f6\u5019\u5982\u679cform\u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u4e0d\u5339\u914d\uff0cLisp\u7f16\u8bd1\u5668\u4f1a\u62a5\u9519\u3002\u6bd4\u5982\u4ee3\u8868\u53d8\u91cf\u521d\u59cb\u5316\u7684form\u6700\u591a\u4e0d\u4f1a\u8d85\u8fc73\u4e2a\u5143\u7d20\uff0c\u000a\u4e14\u5fc5\u987b\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u5143\u7d20\u3002\u95ee\u9898\u6765\u4e86\uff0c\u53ef\u53d8\u7684destructing parameters\u8981\u600e\u4e48\u5b9a\u4e49\uff1f\u000a</p>\u000a\u000a<p>\u000a\u7b54\u6848\u662f\uff1adestructuring parameters\u4e5f\u652f\u6301&amp;optional, &amp;key\u548c&amp;rest\u53c2\u6570\u000a</p>\u000a\u000a<h4 id="toc_1.5.2.2">5.2.2. &amp;body</h4>\u000a<p>\u000a\u5b8f\u7684\u53c2\u6570\u5217\u8868\u4e2d\u53ef\u4ee5\u7528&amp;body\uff0c\u5b83\u548c&amp;rest\u542b\u4e49\u662f\u4e00\u6837\u7684\u3002\u56e0\u4e3a\u5b8f\u51fd\u6570\u91cc\u7684\u5176\u4ed6\u53c2\u6570\u4e00\u822c\u90fd\u4f1a\u662f\u5b8f\u7684body forms\uff0c\u000a\u6240\u4ee5\u901a\u5e38\u7528&amp;body\u6765\u6807\u793abody forms\u53c2\u6570\u3002\u000a</p>\u000a\u000a<h3 id="toc_1.5.3">5.3. \u5b8f\u5c55\u5f00\u8868\u8fbe\u5f0f\u7684\u751f\u6210</h3>\u000a<p>\u000a\u7528backquote\u8868\u8fbe\u5f0f\u6765\u751f\u6210Lisp form\u3002\u000abackquote\uff08\u7b26\u53f7`\uff09\u548c\u666e\u901a\u7684quote\uff08'\uff09\u7684\u552f\u4e00\u533a\u522b\u5c31\u662f\u5728backquote\u8868\u8fbe\u5f0f\u4e2d\u53ef\u4ee5\u7528\u9017\u53f7\uff08,\uff09\u6765unquote\u90e8\u5206\u8868\u8fbe\u5f0f\u3002\u000a</p>\u000a<ul>\u000a<li>\u000aunquote\u7684\u542b\u4e49\u5c31\u662f\u5c06\u7b26\u53f7\u7684\u503c\u66ff\u6362\u8fdb\u53bb\uff0c\u800c\u4e0d\u7528\u7b26\u53f7\u672c\u8eab\u000a</li>\u000a<li>\u000aunquote\u7684\u9017\u53f7\u540e\u9762\u53ef\u4ee5\u8ddf\u4e0a\u4e00\u4e2a@\u7b26\u53f7\uff0c\u6b64\u65f6\u7b26\u53f7\u7684\u503c\u5fc5\u987b\u662f\u4e2alist\uff0c\u6b64list\u4f1a\u88ab\u5c55\u5f00\u5230backquote\u8868\u8fbe\u5f0f\u7684\u540c\u4e00\u7ea7\u3002\u000a</li>\u000a<ul>\u000a<li>\u000a\u89e3\u91ca\u8d77\u6765\u592a\u62d7\u53e3\uff0c\u4e0a\u4f8b\u5b50\u000a<pre class="brush: lisp;">\u000a#Backquote Syntax      Equivalent List-Building Code            Result\u000a#------------------------------------------------------------------------------\u000a`(a (+ 1 2) c)         (list 'a '(+ 1 2) 'c)                    (a (+ 1 2) c)\u000a`(a ,(+ 1 2) c)        (list 'a (+ 1 2) 'c)                     (a 3 c)\u000a`(a (list 1 2) c)      (list 'a '(list 1 2) 'c)                 (a (list 1 2) c)\u000a`(a ,(list 1 2) c)     (list 'a (list 1 2) 'c)                  (a (1 2) c)\u000a`(a ,@(list 1 2) c)    (append (list 'a) (list 1 2) (list 'c))  (a 1 2 c)\u000a</pre>\u000a</li>\u000a</ul>\u000a</ul>\u000a\u000a<h3 id="toc_1.5.4">5.4. \u5b8f\u5b9a\u4e49\u8981\u6ce8\u610f\u7684\u95ee\u9898</h3>\u000a<ul>\u000a<li>\u000a\u5b8f\u5c55\u5f00\u540e\u7684form\u4e2d\u5f15\u7528\u7684sub form\uff0c\u8981\u548c\u4f20\u9012\u65f6\u7684\u987a\u5e8f\u4e00\u81f4\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u4ea7\u751f\u671f\u671b\u4e4b\u5916\u7684\u7ed3\u679c\u000a</li>\u000a<ul>\u000a<li>\u000a\u901a\u5e38\u662f\u5728form\u6709\u526f\u4f5c\u7528\u6216\u8005\u4e92\u76f8\u6709\u5f15\u7528\u5173\u7cfb\u7684\u65f6\u5019\u000a</li>\u000a</ul>\u000a<li>\u000a\u8981\u786e\u4fddsub form\u5728\u5c55\u5f00\u540e\u7684form\u4e2d\u53ea\u88ab\u6c42\u503c\u4e00\u6b21\u000a</li>\u000a<li>\u000a\u7528GENSYM\u6765\u751f\u6210\u53d8\u91cf\u540d\uff0c\u9632\u6b62\u547d\u540d\u51b2\u7a81\u5e26\u6765\u7684bug\u000a</li>\u000a</ul>\u000a\u000a<h3 id="toc_1.5.5">5.5. \u7528\u6765\u751f\u6210\u5b8f\u7684\u5b8f(macro-writing macro)</h3>\u000a<p>\u000a\u597d\u773c\u6655\u2026\u2026\u7b49\u7528\u5230\u7684\u65f6\u5019\u518d\u7814\u7a76\u3002\u000a</p>\u000a<ul>\u000a<li>\u000a\u53ea\u662f\u518d\u589e\u52a0\u4e00\u7ea7\u62bd\u8c61\u000a</li>\u000a<li>\u000a\u8bb0\u4f4f\u5b8f\u5c31\u662f\u7528\u6765\u751f\u6210\u7ed3\u6784\u76f8\u4f3c\u7684\u4ee3\u7801\u7684\u2014\u2014\u5b8f\u5b9a\u4e49\u672c\u8eab\u4e5f\u662f\u4ee3\u7801\uff0c\u76f8\u4f3c\u7684\u90e8\u5206\u4e00\u6837\u53ef\u4ee5\u62bd\u8c61\u6210\u5b8f\u000a</li>\u000a</ul>\u000a    </div>\u000a\u000a    <!--\u000a    <div id="disqus_thread"></div>\u000a    <script type="text/javascript">\u000a        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */\u000a        var disqus_shortname = 'moonranger'; // required: replace example with your forum shortname\u000a\u000a        /* * * DON'T EDIT BELOW THIS LINE * * */\u000a        (function() {\u000a            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\u000a            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';\u000a            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\u000a        })();\u000a    </script>\u000a    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>\u000a    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>\u000a    -->\u000a \u000a</body> \u000a<script type="text/javascript" src="scripts/shCore.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushJScript.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushBash.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushCpp.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushCSharp.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushCss.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushDiff.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushErlang.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushGroovy.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushJava.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushJScript.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushPerl.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushPhp.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushPlain.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushPython.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushRuby.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushScala.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushSql.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushXml.js"></script>\u000a<script type="text/javascript" src="scripts/shBrushClojure.js"></script>\u000a\u000a<link type="text/css" rel="stylesheet" href="styles/shCoreDefault.css"/>\u000a<link type="text/css" rel="stylesheet" href="styles/shThemeRDark.css"/>\u000a<script type="text/javascript">SyntaxHighlighter.all();</script>\u000a</html> \u000a
p3
a.